(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CloseupActionBarCommon"],{"3vRR":function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("n6mq");t.a=({children:e})=>o.a.createElement(a.e,{width:"100%",role:"list"},e)},"6wCo":function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("JW66"),r=n("ENn1"),s=n("ynlw"),l=n("Hrat"),c=n("/MKj"),d=n("Ye/N"),p=n("TgLd"),m=n("GBVV"),u=n("4cpq"),h=n("M1Uz"),f=n("eOdZ");var g=n("U4JR"),b=n("nGHF"),y=n("n6mq");var w=Object(c.connect)(null,e=>({deletePinSponsorship:t=>e(function(e){return async t=>{await f.a.create("SponsoredPinResource",{pinId:e}).callDelete(),t(function(e){return{type:"DELETE_PIN_SPONSORSHIP",payload:{pinId:e}}}(e))}}(t))}))((function({deletePinSponsorship:e,onDeletePinSponsorship:t,onDismiss:n,pinId:a}){const{showOneToast:r}=Object(b.b)(),[s,l]=Object(i.useState)(!1),c=e=>{l(!1),Object(g.b)(101,{view:3,element:12114,pin_id:a}),r(({onHide:t})=>o.a.createElement(h.a,{onHide:t,text:e?d.a._("Something went wrong!","closeup.pinActionDropdown.toastAfterDeletingHasErrors","Pinterest ran into errors while deleting paid sponsorship"):d.a._("Removed!","closeup.pinActionDropdown.toastAfterDeleting","User deleted their paid partnership")}))};return o.a.createElement(p.b,{heading:d.a._("Remove paid partnership?","closeup.pinActionDropdown.deletePinSponsorshipModalHeading","Heading for modal that confirms user wants to delete their partnership"),accessibilityModalLabel:d.a._("Remove paid partnership?","closeup.pinActionDropdown.deletePinSponsorshipModalHeadingLabel","Heading for modal that confirms user wants to delete their partnership"),size:"sm",onDismiss:n,footer:o.a.createElement(y.e,{display:"flex",justifyContent:"center",marginStart:-1,marginEnd:-1},o.a.createElement(y.e,{paddingX:1},o.a.createElement(y.f,{onClick:n,text:d.a._("Cancel","closeup.pinActionDropdown.deletePinSponsorshipModalCancel","Button label for closing sponsorship removal modal")})),o.a.createElement(y.e,{paddingX:1},o.a.createElement(u.a,{id:"confirm-delete-pin-sponsorship"},o.a.createElement(m.b,{color:"red",onClick:()=>{(async()=>{if(!s){l(!0);try{await e(a),t(),c()}catch(n){t(),c(n)}}})()},text:d.a._("Remove","closeup.pinActionDropdown.deletePinSponsorshipModalConfirmButton","Button label for removing sponsorship"),submitting:s}))))},o.a.createElement(y.e,{padding:4},o.a.createElement(y.V,{align:"center"},d.a._("This will remove the paid partnership disclosure on this Pin—if you change your mind you’ll have to start again! This won’t delete the Pin or affect who sees it.","closeup.pinActionDropdown.deletePinSponsorshipDescription","Text description for modal that confirms user wants to delete their sponsorship"))))})),E=n("E/VT"),_=n("7w6Q"),S=n("tkfL");const v=()=>_.a.increment("windows.download.blob.error"),x=(e,t,n)=>{const i=new window.Windows.Storage.Pickers.FileSavePicker;i.suggestedStartLocation=window.Windows.Storage.Pickers.PickerLocationId.picturesLibrary;const{extension:o,extensionName:a,name:r}=(e=>{const t=e.split("/"),n=t[t.length-1],i=n.split(".");if(i.length>1){const e=i.pop();return{extension:"."+e,extensionName:e.toUpperCase(),name:i.join()}}return{extension:".",extensionName:d.a._("Unknown","Label for file picker drop down when the file type is not known","Label for file picker drop down when the file type is not known"),name:n}})(t);i.suggestedFileName=n||r,i.fileTypeChoices.insert(a,[o]),i.pickSaveFileAsync().then(t=>{t&&(window.Windows.Storage.CachedFileManager.deferUpdates(t),t.openAsync(window.Windows.Storage.FileAccessMode.readWrite).then(t=>{const n=e.msDetachStream();window.Windows.Storage.Streams.RandomAccessStream.copyAsync(n,t).then(()=>{t.flushAsync().done(()=>{n.close(),t.close(),_.a.increment("windows.download.blob.success")},v)},v)},v))})};var C=({filename:e,imgSrc:t,category:n})=>{if(!t)return null;return o.a.createElement(S.b,{onClick:()=>{((e,t)=>{try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onreadystatechange=()=>{if(4===n.readyState)if(200!==n.status)_.a.increment("windows.download.blob.nodownload",.1,{status:n.status});else{const i=n.response;x(i,e,t)}},n.send(null)}catch(n){_.a.increment("windows.download.blob.xhrexception",.1,{error:n})}})(t,e)},text:d.a._("Download image","Button to download Pin image","Button to download Pin image")})},R=n("ESls"),T=n("kmwA");function O(e){const{onDismiss:t,myPin:n}=e,[a,r]=Object(i.useState)(1),s=[{label:d.a._("Small","pinActionDropdown.GetEmbedCodeModal.small","Label on segmented controller for pin embed code, for small width"),width:236},{label:d.a._("Medium","pinActionDropdown.GetEmbedCodeModal.medium","Label on segmented controller for pin embed code, for medium width"),width:345},{label:d.a._("Large","pinActionDropdown.GetEmbedCodeModal.large","Label on segmented controller for pin embed code, for large width"),width:450},{label:d.a._("Extra Large","pinActionDropdown.GetEmbedCodeModal.extra_large","Label on segmented controller for pin embed code, for extra-large width"),width:600}];return o.a.createElement(y.x,null,o.a.createElement(p.b,{accessibilityModalLabel:d.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.modalLabel","Accessibility label on modal for pin embed code"),heading:d.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.header","Heading on modal for pin embed code"),onDismiss:t,footer:o.a.createElement(y.e,{display:"flex",direction:"row",justifyContent:"end"},o.a.createElement(y.f,{size:"sm",text:d.a._("Got it!","pinActionDropdown.GetEmbedCodeModal.dismissButton","Button to dismiss embed code modal"),onClick:t}))},o.a.createElement(y.e,{paddingX:6,paddingY:4},o.a.createElement(y.L,{items:s.map(e=>e.label),selectedItemIndex:a,onChange:({activeIndex:e})=>{r(e)}})),o.a.createElement(y.e,{paddingX:8,paddingY:6},o.a.createElement("code",null,`<iframe src="${T.a.settings.ASSETS_SITE_URL}/ext/embed.html?id=${n.id}" height="${Math.ceil(n.height*s[a].width/n.width+100)}" width="${s[a].width}" frameborder="0" scrolling="no" ></iframe>`))))}var I=n("gTC0"),P=n("hFNL"),j=n("LT60"),k=n("v/Q4"),D=n("CONZ"),B=n("eUcp"),A=n("AWyA");var L=Object(c.connect)(e=>({isFullAuth:e.viewer.isAuth&&!e.viewer.isLimitedLogin}),e=>({deletePinMention:t=>e(Object(D.b)(t))}))((function({bestPinImgSrc:e,deletePinMention:t,embedImg:n,hideDownload:a,showEmbed:r,isFullAuth:s,onDropdownClick:l,onReportPin:c,onToggle:p,pinCategory:m,pinDescription:u,pinId:f,pinImgSrc:_,pinTitle:v,reportPin:x,showRemoveMention:T,showRemoveSponsorship:D,usePortal:L}){const{showOneToast:M}=Object(b.b)(),[H,F]=Object(i.useState)(!1),[z,U]=Object(i.useState)(!1),[q,Y]=Object(i.useState)(!1),G=Object(k.a)(),N=Object(A.e)(),X=Object(i.useRef)(),V=()=>{F(!1)},W=()=>{t(f),G.isAuth&&Object(g.b)(8909,{element:116,tag_id:G.id,tag_type:1,view:3}),V(),M(({onHide:e})=>o.a.createElement(h.a,{onHide:e,text:d.a._("@mention removed!","closeup.pinActionDropDown.mentionRemovalToast","Toast that tells user that they have successfully removed the @mention of them in another user's Pin description")}))},$=()=>{V(),Y(!q)},J=()=>{z||Object(g.b)(4439,{view:3,viewParameter:156}),F(!1),U(!z)},K=()=>{"function"==typeof c&&c(f),x()},Z=d.a._("More options","Accessible label for more options dropdown","Accessible label for more options dropdown");return o.a.createElement(y.e,{flex:"grow",alignItems:"center",display:"flex"},o.a.createElement(y.e,{ref:X},o.a.createElement(I.a,{accessibilityLabel:Z,icon:"ellipsis",onClick:()=>{var e;p&&p(),"function"==typeof l&&l(),F(!H),e=981,Object(g.b)(101,{element:e,component:4,view:3,viewParameter:139})}})),H&&(()=>{const t=o.a.createElement(y.e,{zIndex:B.a},o.a.createElement(y.q,{anchor:X.current,idealDirection:"down",onDismiss:V,size:"xs"},o.a.createElement(S.a,null,!a&&"undefined"!=typeof window&&"windows"!==Object(P.b)(window)&&e&&o.a.createElement(E.a,{imgSrc:e||"",filename:v||u,category:m,pinId:f},e=>o.a.createElement(S.b,{onClick:e,text:d.a._("Download image","Button to download Pin image","Button to download Pin image")})),!a&&"undefined"!=typeof window&&"windows"===Object(P.b)(window)&&(e||_)&&o.a.createElement(C,{imgSrc:e||_||"",filename:v||u,category:m}),D&&o.a.createElement(S.b,{onClick:$,text:d.a._("Remove partnership","closeup.pinActionDropDown.removePartnership","Label to allow removing an existing partnership")}),o.a.createElement(S.b,{onClick:s?K:N,text:d.a._("Report Pin","Label for report pin action","Label for report pin action")}),T&&o.a.createElement(S.b,{onClick:W,text:d.a._("Remove @mention","closeup.pinActionDropDown.removeMention","Button that allows user to remove their @mention in the pin's")}),r&&o.a.createElement(R.a,{name:"closeup_pin_embed_code"},({anyEnabled:e})=>e&&o.a.createElement(S.b,{onClick:J,text:d.a._("Get Pin embed code","Label for embed pin action","Label for embed pin action")})))));return L?o.a.createElement(j.a,null,o.a.createElement(y.x,null,t)):t})(),z&&o.a.createElement(O,{myPin:{id:f,height:n.height,width:n.width},onDismiss:J}),q&&o.a.createElement(w,{onDeletePinSponsorship:$,onDismiss:$,pinId:f}))})),M=n("QAzJ"),H=n("YxyV"),F=n("7jH2");t.a=({onDropdownClick:e,onReportPin:t,pin:n,viewParameter:i})=>{var c;const d=Object(k.a)(),{pinTitle:p,pinDescription:m,pinCategory:u}=Object(l.a)(n),h=Object(F.p)({pin:n}),{video:f}=Object(F.x)(h)||{},g=!!f;let b;n.images&&(b=n.embed&&"gif"===n.embed.type?n.embed.src:n.images["736x"]&&n.images["736x"].url);const w=!!n.story_pin_data_id,E=Object(H.d)(n),{isPromoted:_}=Object(s.a)(n),S=n.board.privacy===a.a.BoardPrivacy.SECRET,v=!_&&!S,x=d.isAuth&&(null===(c=n.user_mention_tags)||void 0===c?void 0:c.filter(e=>e.object_id===d.id).length)>0,{sponsorship:C}=n,{creator:R,sponsor:T}=C||{},O=d.isAuth&&!!C&&[R.username,T.username].includes(d.username),{anyEnabled:I}=Object(M.a)("mweb_web_sponsored_pins",O);return o.a.createElement(y.e,{"data-test-id":"pin-action-bar"},o.a.createElement(L,{embedImg:Object(H.e)(n,"736x"),showEmbed:v,bestPinImgSrc:E,hideDownload:g||w,onDropdownClick:e,onReportPin:t,pinCategory:u,pinDescription:m,pinId:n.id,pinImgSrc:b,pinTitle:p,reportPin:Object(r.a)({pin:n,viewParameter:i,viewType:3}),showRemoveMention:x,showRemoveSponsorship:O&&I,usePortal:!1}))}},Hrat:function(e,t,n){var i=n("yaUg"),o=n("Ye/N");t.a=e=>{const t=e.link_domain||{},n=e.tracked_link||e.link||e.images&&e.images.orig&&e.images.orig.url,a=e.rich_metadata,r=e.domain,s=e.closeup_attribution||e.native_creator||t.official_user||e.pinner||e.origin_pinner,l=!(!(a&&a.recipe&&a.recipe.name&&a.recipe.categorized_ingredients)||a.recipe.from_aggregated_data);let c,d;a&&a.products&&a.products[0]&&(c=!!(a&&a.name&&a.offer_summary));const p=e.buyable_product,m=c||p,u=!(!a||!a.article),h=!(!a||!a.tutorial),f=!(!s||!s.username);let g=o.a._("Saved from ","Closeup pin annotation","Closeup pin annotation"),b=f?o.a._("Saved by"):o.a._("Saved from"),y=o.a._("Visit");a&&a.products&&a.products[0]&&a&&a.products[0].name&&a.products[0].offer_summary&&(g=o.a._("Product sold by ","pin annotation","pin annotation"),d=a.products[0].offer_summary),m?(b=o.a._("Sold by"),y=o.a._("Visit")):h?(g=o.a._("Saved from ","pin annotation","pin annotation"),b=f?o.a._("Saved by"):o.a._("Saved from"),y=o.a._("Visit")):l?(g=o.a._("Recipe from ","pin annotation","pin annotation"),b=f?o.a._("Recipe by"):o.a._("Recipe from"),y=o.a._("Make it")):u&&(g=o.a._("Article from ","pin annotation","pin annotation"),b=f?o.a._("Article by"):o.a._("Article from"),y=o.a._("Read it"));const w=e.rich_summary;if(!d&&w){let e;w&&w.products&&w.products[0]&&(e=!!(w&&w.products[0].name&&w.products[0].offer_summary),e&&(g=o.a._("Product sold by ","pin annotation","pin annotation")))}let E,_;f?(E="/"+s.username+"/",_=s.full_name):(E="/source/"+r,_=a&&a.site_name||r);return{actionButtonText:y,image:s&&(s.image_medium_url||s.image_small_url)||e.board&&e.board.image_thumbnail_url,link:E,pinLink:n,pin:e,pinCreditPrefix:g,prefixText:b,subtitle:_,title:Object(i.a)(o.a._("More from {{ subtitle }}"),{subtitle:_}),pinTitle:e.closeup_unified_title,pinDescription:e.closeup_unified_description,pinCategory:e.category}}},OPV1:function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("Ye/N"),r=n("gTC0"),s=n("4cpq"),l=n("dtqy");t.a=Object(l.a)(({handlePinEditButtonClick:e})=>o.a.createElement(s.a,{id:"closeup-pin-edit-button"},o.a.createElement(r.a,{accessibilityLabel:a.a._("Edit","edit button on pin","edit button on pin"),onClick:t=>e&&e(t),icon:"edit"})))},Pus6:function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("R6wO"),r=n("qD10"),s=n("n6mq");t.a=({bold:e,description:t,descriptionColor:n,external:i,hasDividerAfter:l,icon:c,onClick:d,text:p,url:m})=>{const u=o.a.createElement(s.e,{role:"listitem",overflow:"hidden"},o.a.createElement(a.a,{bold:e,description:t,descriptionColor:n,icon:c,text:p}));return o.a.createElement(s.e,null,m?o.a.createElement(r.a,{to:m,external:i,onClick:d},u):o.a.createElement(s.U,{fullWidth:!1,onTap:d},u),l&&o.a.createElement(s.o,null))}},qlIy:function(e,t,n){n.r(t),n.d(t,"CloseupActionBar",(function(){return L}));var i=n("q1tI"),o=n.n(i),a=n("OPV1"),r=n("6wCo"),s=n("c4Fo"),l=n("n6mq");class c extends o.a.Component{constructor(...e){var t,n,i;super(...e),i={paused:!1,showPulsar:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.mountPulsar(),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){clearTimeout(this.timer)}mountPulsar(){if(!this.experience)return;const{display_data:e}=this.experience;e.has_pulsar&&this.setState({showPulsar:!0})}renderPulsar(){const{anchor:e}=this.props,{paused:t}=this.state;if(!e)return null;const n=e.getBoundingClientRect(),{height:i,width:a}=n,r=-(68+i/2),s=-(68-a/2);return o.a.createElement(l.e,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:1,marginTop:r,marginLeft:s,cursor:"pointer",pointerEvents:"none"}}},o.a.createElement(l.G,{paused:t}))}renderFlyout(e){const{anchor:t,flyoutSize:n,idealDirection:i,textOverflow:a}=this.props;return o.a.createElement(l.q,{anchor:t,color:"blue",idealDirection:i||"down",onDismiss:()=>{},shouldFocus:!1,showCaret:!0,size:n},o.a.createElement(l.e,{column:12,padding:3},o.a.createElement(l.V,{color:"white",overflow:a,weight:"bold"},e)))}render(){const{experienceIds:e,placementId:t,shouldTimeoutDismiss:n}=this.props,{showPulsar:i}=this.state;return o.a.createElement(s.a,{experienceIds:e,placementId:t,type:8},e=>{const{complete:t,dismiss:a,display_data:r}=e;return this.experience=e,r.has_pulsar||r.has_tooltip?(n&&r.disappearTime&&r.disappearTime>0&&(this.timer=setTimeout(()=>(a(),null),r.disappearTime)),o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:{zIndex:10}}},i&&this.renderPulsar(),r.has_tooltip&&(!r.has_pulsar||this.state.paused)&&this.renderFlyout(r.text))):(t(),null)})}}var d=n("/MKj"),p=n("1Vso");const m="cubic-bezier(0, 0, 0.58, 1)",u={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:m,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:m,transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function h({reactionLabel:e,handleHideConfirmation:t}){const[n,a]=Object(i.useState)("loaded"),r=Object(i.useRef)();return Object(i.useEffect)(()=>{let e=null,n=null;return r.current=requestAnimationFrame(()=>{e=setTimeout(()=>a("fade"),1e3),n=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(n)}},[]),o.a.createElement(l.e,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(l.e,{rounding:"pill",position:"absolute",color:"darkGray",ref:r,height:20,display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...u[n],whiteSpace:"nowrap"}}},o.a.createElement(l.V,{color:"white",size:"sm",weight:"bold",overflow:"normal"},e)))}var f=n("ihsa"),g=n("eo+c");const b=40,y={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:"translateY(-30px) scaleX(1.6) scaleY(1.6)",transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:"scale(0.625)",transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},w={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function E({reactionButtonRect:e,handleReactionTrayClick:t}){const[n,a]=Object(i.useState)("loading"),[r,s]=Object(i.useState)(""),[c,d]=Object(i.useState)(),[p,m]=Object(i.useState)(!1),[u,h]=Object(i.useState)({}),[E]=Object(i.useState)(e),_=Object(i.useRef)(),S=Object(i.useRef)({});Object(i.useEffect)(()=>{"loading"===n&&(_.current=requestAnimationFrame(()=>a("loaded"))),(()=>{m(!0);const e={...u};g.c.forEach(t=>{S.current[t]&&!e[t]&&(e[t]=S.current[t].getBoundingClientRect())}),Object.keys(e).length===g.c.length&&h(e)})(),!c&&p&&(()=>{const e={...c};g.c.forEach(t=>{const n=u[t],{left:i,top:o}=E,{left:a,top:r}=n,s=i-a-8,l=o-r+9;e[t]={translateX:s,translateY:l}}),d(e)})()},[p,e]);const v=()=>{"clicked"===n&&r&&(a("flying"),setTimeout(()=>{t(r)},750))},x=g.c.map((e,t)=>{const{staticAsset:i,animatedAsset:a,label:s,htmlStyle:d,animationStyle:p}=Object(g.a)(e),m={transitionDelay:.08*t+"s",...y[n]},u={...r===e?y.clicked:y.loaded},h={...c&&r===e?{transform:`translateZ(0) translateX(${c[e].translateX}px) translateY(${c[e].translateY}px) scaleX(0.6) scaleY(0.6) `,...y[n]}:y.fading};let w={};return"loading"===n||"loaded"===n?w={...m}:"clicked"===n?w={...u}:"flying"===n&&(w={...h}),o.a.createElement(l.e,{display:"flex",alignSelf:"center",justifyContent:"between",key:t},o.a.createElement(l.e,{maxHeight:b,maxWidth:b,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",dangerouslySetInlineStyle:{__style:{...w}},ref:t=>{S.current[e]=t}},r!==e&&o.a.createElement(l.e,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0},o.a.createElement(l.e,{width:b,height:b,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})),o.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",position:"relative"},o.a.createElement(f.a,{unsafeCSS:d}),r===e&&"clicked"===n&&o.a.createElement(l.e,{rounding:"pill",color:"darkGray",height:20,dangerouslySetInlineStyle:{__style:y.label},display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2},o.a.createElement(l.V,{color:"white",size:"sm",weight:"bold",overflow:"normal"},s)),o.a.createElement("div",{onClick:v,onKeyDown:v,role:"presentation"},o.a.createElement(l.e,{width:b,height:b,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{...y.icon,...r===e&&"clicked"===n?{animation:p}:{},backgroundImage:`url(${a})`}}})))))});return o.a.createElement(l.e,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{marginLeft:-150}}},o.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"center",width:300,height:80,rounding:"pill",color:"flying"===n?"transparent":"white",dangerouslySetInlineStyle:{__style:{..."flying"!==n?w:{}}},onMouseMove:e=>{const{clientX:t}=e;if("flying"!==n){const e=(e=>{let t;return p&&g.c.forEach(n=>{const i=u[n];if(i&&i.left&&i.right){const{left:o,right:a}=i;e>=o&&e<=a&&(t=n)}}),t||null})(t);e!==r&&s(e),a("clicked")}}},o.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"around",width:"100%",paddingX:5},x)))}var _=n("eOdZ");var S=n("U4JR");function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x={borderRadius:"50%"},C={backgroundColor:"rgb(226, 226, 226)"},R={backgroundColor:"rgb(218, 218, 218)"},T={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};class O extends i.PureComponent{constructor(...e){super(...e),v(this,"state",{clickedReaction:0,isConfirmationShowing:!1,isReactionTrayShowing:!1,reactionButtonRect:null,useInitialReaction:!0,isHoveringOverTray:!1,isHoveringOverButton:!1}),v(this,"reactionButtonRef",o.a.createRef()),v(this,"trayOpenTimer",null),v(this,"trayCloseTimer",null),v(this,"onResize",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),v(this,"onScroll",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),v(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),v(this,"handleReact",(e=7)=>{const{pinId:t,pinUpdateReactionCount:n}=this.props,i={pin_id:t,reaction_type:e},{clickedReaction:o}=this.state;o&&n(t,!1,o),this.setState({clickedReaction:e,useInitialReaction:!1}),n(t,!0,e),_.a.create("ReactionsResource",i).callUpdate()}),v(this,"handleUnreact",()=>{const{pinId:e}=this.props,t={pin_id:e};this.setState({clickedReaction:0,useInitialReaction:!1}),_.a.create("ReactionsResource",t).callDelete()}),v(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef.current&&this.reactionButtonRef.current instanceof HTMLElement){const e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),v(this,"closeTray",()=>{this.setState({isReactionTrayShowing:!1})}),v(this,"startTrayCloseTimer",()=>{clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{const{isHoveringOverTray:e,isHoveringOverButton:t}=this.state;e||t||this.closeTray()},300)}),v(this,"handleOnHoverButton",()=>{this.setState({isHoveringOverButton:!0}),clearTimeout(this.trayOpenTimer),this.trayOpenTimer=setTimeout(()=>{const{isReactionTrayShowing:e,isHoveringOverButton:t}=this.state;!e&&t&&this.setState({isReactionTrayShowing:!0})},500),this.tooltipExperience&&this.tooltipExperience.complete()}),v(this,"handleOffHoverButton",()=>{this.setState({isHoveringOverButton:!1}),this.startTrayCloseTimer()}),v(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),v(this,"handleOffHoverTray",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),v(this,"handleClickButton",()=>{const{clickedReaction:e,useInitialReaction:t}=this.state,{pinId:n,pinUpdateReactionCount:i,reactionByMe:o}=this.props,a=t?o:e;a?(i(n,!1,a),this.handleUnreact()):this.setReaction("love"),clearTimeout(this.trayOpenTimer),this.closeTray(),Object(S.b)(101,{view:3,viewParameter:139,element:11354,objectId:n})}),v(this,"setReaction",e=>{this.handleReact(Object(g.a)(e).type),this.handleShowConfirmation()}),v(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),v(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){clearTimeout(this.trayOpenTimer),clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){const{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:n,clickedReaction:i,useInitialReaction:a,isHoveringOverTray:r}=this.state,{reactionByMe:s,showTooltip:d}=this.props,m=a?s:i,u=m?g.b[m]:"default",{staticAsset:f,label:b}=Object(g.a)(u);return o.a.createElement(l.e,{position:"relative"},o.a.createElement(p.a,{accessibilityLabel:"reaction",onClick:this.handleClickButton,onMouseEnter:this.handleOnHoverButton,onMouseLeave:this.handleOffHoverButton,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"}},({active:e,hovered:t,focused:n})=>{let i={...x};return e?i={...x,...R}:t||r?i={...x,...C}:n&&(i={...x,...T}),o.a.createElement(l.e,{color:"transparent",rounding:"circle",dangerouslySetInlineStyle:{__style:i}},o.a.createElement(l.e,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:44,minWidth:44}}},o.a.createElement(l.e,{height:24,width:24,ref:this.reactionButtonRef,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${f})`}}})))}),d&&!e&&!n&&a&&o.a.createElement(c,{experienceIds:[501977,501995],idealDirection:"down",placementId:12,anchor:this.reactionButtonRef.current,flyoutSize:"lg",onExperienceMount:this.handleExperienceMount}),e&&!!t&&!!t.left&&!!t.top&&o.a.createElement(l.e,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(l.Q,{top:0},o.a.createElement(l.U,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleOffHoverTray},o.a.createElement(E,{reactionButtonRect:t,handleReactionTrayClick:this.setReaction})))),n&&!!m&&b&&o.a.createElement(h,{reactionLabel:b,handleHideConfirmation:this.handleHideConfirmation}))}}var I=Object(d.connect)(null,e=>({pinUpdateReactionCount:(t,n,i)=>e(function(e,t,n){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}(t,n,i))}))(O),P=n("rYoy"),j=n("zXAL"),k=n("T5j3"),D=n("/zJj");function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A=Object(i.lazy)(()=>Promise.resolve().then(n.bind(null,"fepT")));class L extends o.a.Component{constructor(e){super(e),B(this,"sendExperienceComplete",()=>{}),B(this,"handleExternalSend",()=>{this.sendExperienceComplete()}),B(this,"onSendExperienceMount",e=>{e&&e.complete&&500946===e.experience_id&&(this.sendExperienceComplete=e.complete)}),B(this,"promoteButtonRef",Object(i.createRef)()),this.sendButtonTooltipRef=o.a.createRef()}render(){const{editable:e,gridDescription:t,hidePromoteButton:n,imageSrc:i,isFlyoutOpen:s,isOnSecretBoard:d,isPdp:p,onEditSubmit:m,onFlyoutDismiss:u,onToggleFlyout:h,pin:f,promoteButton:g,saveButton:b,shareButtonRef:y,viewParameter:w}=this.props,E=d?null:o.a.createElement(P.a,null,o.a.createElement(l.e,null,o.a.createElement(l.e,{ref:this.sendButtonTooltipRef},o.a.createElement(A,{buttonType:"icon",gridDescription:t,imageSrc:i,isFlyoutOpen:s,onExternalSend:this.handleExternalSend,onFlyoutDismiss:u,onToggleFlyout:h,pinId:f.id,sendType:"pin",shareButtonRef:y})),b&&!s&&o.a.createElement(c,{experienceIds:[500946],placementId:12,anchor:this.sendButtonTooltipRef.current,onExperienceMount:this.onSendExperienceMount}))),_=Object(k.c)(f),S=o.a.createElement(l.e,{display:"flex",color:"white",justifyContent:"between",rounding:2,"data-test-id":"closeup-action-items",maxWidth:p?D.f:D.d},o.a.createElement(l.e,{display:"flex"},e&&o.a.createElement(l.e,{marginEnd:1},o.a.createElement(a.a,{carouselSlotCurrentIndex:f&&f.carousel_data&&f.carousel_data.index,pinId:f.id,onSubmit:m,view:3,viewParameter:w})),o.a.createElement(r.a,{pin:f,viewParameter:w})),o.a.createElement(l.e,{alignItems:"center",display:"flex"},E,_&&o.a.createElement(P.a,null,o.a.createElement(I,{pinId:f.id,reactionByMe:f.reaction_by_me,showTooltip:!0})),!n&&g&&o.a.createElement(P.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(l.e,{ref:this.promoteButtonRef},g),o.a.createElement(c,{experienceIds:[501121],idealDirection:"down",placementId:12,anchor:this.promoteButtonRef.current,flyoutSize:"lg"})))));return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.e,{display:"flex",justifyContent:"between"},S,o.a.createElement(l.e,{marginStart:3},b)))}}t.default=Object(j.a)(L)},tkfL:function(e,t,n){var i=n("3vRR");n.d(t,"a",(function(){return i.a}));var o=n("Pus6");n.d(t,"b",(function(){return o.a}))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/CloseupActionBarCommon-f41d4adc8bce126ec3e8.mjs.map