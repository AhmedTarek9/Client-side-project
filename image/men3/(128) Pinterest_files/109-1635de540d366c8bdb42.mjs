(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[109,56,61,70],{"+lzj":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var a=n("vzKb"),r=n("3/Bf");const i={cumulativeLayoutShiftScore:0,firstInputDelay:null,longTaskDurations:[],largestContentfulPaint:null},o=()=>{i.longTaskDurations=[]},s=()=>i,c=async()=>{const e=({name:e,value:t})=>{"CLS"===e?Object(r.e)(e,100*t):Object(r.e)(e,t)};Object(a.a)({entryTypes:["longtask"]},e=>{e.getEntries().map(e=>i.longTaskDurations.push(e.duration))},()=>o()),Object(a.a)({type:"first-input",buffered:!0},(e,t)=>{const n=e.getEntries()[0];n&&n.startTime&&n.processingStart&&(i.firstInputDelay={startTime:n.startTime,endTime:n.processingStart}),t.disconnect()},()=>{i.firstInputDelay=null}),Object(a.a)({type:"largest-contentful-paint",buffered:!0},e=>{const t=e.getEntries(),n=t[t.length-1];n&&(i.largestContentfulPaint=n.renderTime||n.loadTime||null)}),Object(a.a)({type:"layout-shift",buffered:!0},e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(i.cumulativeLayoutShiftScore+=e.value)})});try{const{getCLS:t,getFID:a,getLCP:r}=await n.e(506).then(n.bind(null,"ONNR"));a(e),r(e,!0),t(e,!0)}catch(t){}}},"/mzO":function(e,t,n){n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("Ye/N"),o=n("n6mq");function s({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:a,isManagedView:s,isNoTitle:c}){const l=s?6:c?0:3;return r.a.createElement(o.e,null,!c&&r.a.createElement(o.o,null),r.a.createElement(o.e,{mdDisplay:"flex",justifyContent:"between",paddingX:s?0:4,paddingY:l},!s&&!c&&r.a.createElement(o.e,{column:12,mdColumn:3,paddingY:2},r.a.createElement(o.V,{size:"md"},i.a._("Comment and Photo Permissions"))),r.a.createElement(o.e,{column:12,mdColumn:s?12:8},r.a.createElement(o.e,{paddingY:1,display:"flex",alignItems:"center"},r.a.createElement(o.R,{onChange:t,id:"CommentSwitch",switched:!e}),r.a.createElement(o.e,{paddingX:2},r.a.createElement(o.w,{htmlFor:"CommentSwitch"},r.a.createElement(o.V,{size:"md"},i.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form"))))),r.a.createElement(o.e,{paddingY:1,alignItems:"center",display:"flex"},r.a.createElement(o.R,{onChange:n,id:"PhotoSwitch",switched:!a}),r.a.createElement(o.e,{paddingX:2},r.a.createElement(o.w,{htmlFor:"PhotoSwitch"},r.a.createElement(o.V,{size:"md"},i.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form"))))))))}},"0BOE":function(e,t,n){n.d(t,"a",(function(){return i}));const a={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},r=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=a[e.charAt(n)]||e.charAt(n);return t},i=(e,t,n="name")=>{const a=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),a=e.split(" ");let i=0;for(let o=0;o<a.length;o+=1)(r(a[o]).includes(n[i])||a[o].includes(n[i]))&&(i+=1);return i===n.length})(e[n].toLowerCase(),a))}},"1+5i":function(e,t,n){var a=n("w/wX"),r=n("sEf8"),i=n("mdPL"),o=i&&i.isSet,s=o?r(o):a;e.exports=s},"1RGD":function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=n("Ye/N"),o=n("vvax"),s=n("n6mq");function c({header:e,onUpdate:t,value:n}){const[c,l]=Object(a.useState)(n?String(Math.floor(Number.parseInt(n,10)/60)):"0"),[d,u]=Object(a.useState)(n?String(Number.parseInt(n,10)%60):"0"),p=(e,n)=>{t(String(Number.parseInt(n,10)+60*Number.parseInt(e,10)))},m=[];for(let a=0;a<=9;a+=1)m.push({value:String(a),label:Object(o.b)(i.a.ngettext("{{ hours }} hour","{{ hours }} hours",a,"storyboard.detailsList.recipe","Option for number of hours a story pin recipe will take"),{hours:a}).join("")});const h=[];for(let a=0;a<60;a+=1)h.push({value:String(a),label:Object(o.b)(i.a.ngettext("{{ minutes }} minute","{{ minutes }} minutes",a,"storyboard.detailsList.recipe","Option for number of minutes a story pin recipe will take"),{minutes:a}).join("")});return r.a.createElement(s.e,{width:"100%",display:"flex",alignItems:"end"},r.a.createElement(s.e,{width:"50%",marginEnd:2},r.a.createElement(s.M,{size:"lg",id:"hours",name:"hours",label:e,placeholder:i.a._("Hours","storyboard.detailsList.recipe","Placeholder caption for hours input in story pin recipe cooktime"),value:c,options:m,onChange:({value:e})=>{Number.isNaN(e)||(l(e),p(e,d))}})),r.a.createElement(s.e,{width:"50%",marginStart:2},r.a.createElement(s.M,{size:"lg",id:"minutes",name:"minutes",placeholder:i.a._("Minutes","storyboard.detailsList.recipe","Placeholder caption for minutes input in story pin recipe cooktime"),value:d,options:h,onChange:({value:e})=>{Number.isNaN(e)||(u(e),p(c,e))}})))}},"2WXK":function(e,t,n){var a=n("q1tI");let r=null,i=!1,o=0;const s=()=>{r&&clearTimeout(r),i=!0,r=setTimeout(()=>{i=!1},100)};t.a=()=>{const[e,t]=Object(a.useState)(!1),n=Object(a.useRef)(null);Object(a.useEffect)(()=>(0===o&&window.addEventListener("scroll",s),o+=1,()=>{n.current&&clearTimeout(n.current),o-=1,o||window.removeEventListener("scroll",s)}),[]);const r=e=>{n.current&&clearTimeout(n.current),n.current=e&&i?setTimeout(()=>r(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:Object(a.useRef)({onMouseOver:()=>r(!0),onMouseLeave:()=>r(!1)}).current}}},"3DIk":function(e,t,n){n.d(t,"a",(function(){return a}));const a="v2"},"3R0Q":function(e,t,n){t.a=e=>{const t={};e.forEach(({label:e,timestamp:n})=>{t[e]=(t[e]||[]).concat([n])});const n={};return Object.keys(t).forEach(e=>{(t[e]||[]).forEach((t,a)=>{n[a?`${e}_${a+1}`:e]=t})}),n}},"3z7j":function(e,t,n){n.d(t,"a",(function(){return r}));var a=n("Wer7");function r(e,t){return n=>n(Object(a.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},"5FNA":function(e,t,n){n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n("qtKf"),r=n("Pqnw"),i=n("Wer7");const o=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:n,username:a})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:a,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},c=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),l=e=>o.reduce((t,n)=>{const o=[Object(r.a)("profileBoards",Object(a.c)(e,n))];return[!0,!1].forEach(t=>{[!0,!1].forEach(a=>{o.push(Object(i.f)(s.name,s.options({username:e,boardOrder:n,mixPublicSecret:t,filterStories:a})))})}),t.concat(o)},[])},"5S2N":function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("/MKj"),o=n("9WJf"),s=n("BkRI"),c=n.n(s),l=n("/mzO"),d=n("JW66"),u=n("eOdZ"),p=n("5FNA"),m=n("Wer7");var h=n("Sihc"),b=n("Y+p1"),g=n.n(b),f=n("Ye/N"),y=n("TgLd"),E=n("GBVV"),_=n("4cpq"),v=n("M1Uz"),S=n("nGHF"),w=n("n6mq");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O extends r.a.PureComponent{constructor(...e){super(...e),C(this,"state",{deleting:!1}),C(this,"unmounted",!1),C(this,"handleConfirm",()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),C(this,"handleDeleteDidComplete",e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast(({onHide:e})=>r.a.createElement(v.a,{onHide:e,text:f.a._("Pin deleted!","User deleted their pin","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return r.a.createElement(y.b,{heading:f.a._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:f.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:r.a.createElement(w.e,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1},r.a.createElement(w.e,{paddingX:1},r.a.createElement(w.f,{onClick:e,text:f.a._("Cancel")})),r.a.createElement(w.e,{paddingX:1},r.a.createElement(_.a,{id:"confirm-delete-pin"},r.a.createElement(E.b,{color:"red",onClick:this.handleConfirm,text:f.a._("Delete Pin"),submitting:t}))))},r.a.createElement(w.e,{padding:4},r.a.createElement(w.V,null,f.a._("Once you delete a Pin, you can't undo it!"))))}}const I=Object(S.c)(O);I.displayName="DeletePinConfirmation";var j=I,x=n("V711");function k({board:e={},canEdit:t,onBoardChange:n,onBoardCreate:a}){return r.a.createElement(w.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3},r.a.createElement(w.e,{column:12,mdColumn:3,paddingY:2},r.a.createElement(w.w,{htmlFor:"BoardPicker"},r.a.createElement(w.V,{size:"md"},f.a._("Board")))),t?r.a.createElement(w.e,{column:12,mdColumn:8},r.a.createElement(x.a,{id:"BoardPicker",board:e,onBoardChosen:n,onBoardCreate:a})):e.name&&r.a.createElement(w.e,{column:12,mdColumn:8,paddingY:2},r.a.createElement(w.V,{size:"md",weight:"bold"},e.name)))}var M=n("TSYQ"),T=n.n(M),P=n("JKZO"),B=n("Q7uW"),D=n("U4JR");function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class A extends r.a.Component{constructor(...e){super(...e),R(this,"state",{focused:!1}),R(this,"suggestionAnchorRef",r.a.createRef()),R(this,"setRef",e=>this.textAreaRef=e),R(this,"handleBlur",e=>{this.setState({focused:!1});const{onBlur:t}=this.props;t&&t(e)}),R(this,"handleFocus",e=>{this.setState({focused:!0});const{onFocus:t}=this.props;t&&t(e)}),R(this,"handleChange",({text:e,mentions:t})=>{this.props.onDescriptionChange({value:e,userMentionTags:t})})}render(){const{canAddUserMentionTags:e,canEdit:t,description:n,errorMessage:a,initialMentions:i,label:o,placeholder:s,onDescriptionChange:c}=this.props,{focused:l}=this.state;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.o,null),r.a.createElement(w.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3},r.a.createElement(w.e,{column:12,mdColumn:3,paddingY:2},r.a.createElement(w.w,{htmlFor:"DescriptionField"},r.a.createElement(w.V,{size:"md"},o))),t?r.a.createElement(w.e,{column:12,mdColumn:8},r.a.createElement(w.e,null,e?r.a.createElement("div",{className:T()("DescriptionField",{DescriptionField__error:!!a,DescriptionField__focus:l}),id:"DescriptionField",ref:this.suggestionAnchorRef,role:"textbox"},r.a.createElement(P.a,{initialMentions:i,initialText:n,onAddMention:()=>{Object(D.b)(8905,{element:116,tag_type:1})},onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{Object(D.b)(8908,{element:116,tag_type:1})},onSuggestionsPopoverOpen:()=>{Object(D.b)(8907,{element:116,tag_type:1})},maxSuggestions:4,placeholder:s})):r.a.createElement(w.W,{id:"DescriptionField",placeholder:s,value:n,onChange:({value:e})=>{c({value:e,userMentionTags:[]})},hasError:(a||"").length>0})),!!a&&r.a.createElement(w.e,{justifyContent:"center"},r.a.createElement(B.a,{errorMessage:a,htmlFor:"pin-edit-description"}))):r.a.createElement(w.e,{column:12,mdColumn:8,paddingY:2},r.a.createElement(w.V,{size:"md",weight:"bold"},n))))}}var L=A,N=n("VJm5"),U=n("rSLd"),F=n("xOLo");function V({isCarousel:e,onMouseEnter:t,onMouseLeave:n,shouldShowCarouselSliders:a,onCarouselSlide:i,currentIndex:o,carouselData:s,pinId:c,description:l,image:d={}}){return r.a.createElement(w.e,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},e&&(()=>{const e=s&&s.carousel_slots&&s.carousel_slots.length||1;return e>=2&&r.a.createElement(w.e,{direction:"row",padding:2},r.a.createElement(w.w,{htmlFor:"CardsIndex"},r.a.createElement(w.V,{size:"md"},o+1,"/",e)))})(),r.a.createElement(w.A,{width:236},r.a.createElement(w.e,{onMouseEnter:t,onMouseLeave:n},r.a.createElement(w.A,{rounding:2,wash:!0},e&&a&&r.a.createElement(w.e,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},r.a.createElement(F.default,{handleCarouselSwipe:i,carouselIndex:o,carouselData:s,pinId:c,isEditMode:!0})),e?r.a.createElement(N.a,{carouselIndex:o,isCloseup:!1,carouselData:s,pinId:c,isEditMode:!0}):r.a.createElement(w.v,{alt:l,color:"#efefef",naturalHeight:d.height,src:d.url,naturalWidth:d.width})),e&&r.a.createElement(U.default,{carouselIndex:o,carouselData:s,pinId:c,handleCarouselSwipe:i,isEditMode:!0,variant:"legacy"}))))}function H({apiErrorMessage:e,shouldShowGenericUpdateError:t,onClickDeleteButton:n,disableDelete:a,onHide:i,shouldDisableSave:o,triggerBoardAndSectionCreate:s}){return r.a.createElement(w.e,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1},r.a.createElement(_.a,{id:"delete-pin-button"},r.a.createElement(w.f,{text:f.a._("Delete","EditPinModal.EditPinFooter.Delete","delete pin"),onClick:n,disabled:a})),t&&r.a.createElement(w.e,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center"},r.a.createElement(B.a,{errorMessage:e||f.a._("Sorry! There was an error editing your Pin.","EditPinModal.EditPinFooter.ErrorMessageToast","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),r.a.createElement(w.e,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2},r.a.createElement(w.e,{paddingX:2},r.a.createElement(w.f,{text:f.a._("Cancel","EditPinModal.EditPinFooter.Cancel","cancel changes"),onClick:i})),r.a.createElement(w.e,{paddingX:2,"data-test-id":"edit-pin-save"},r.a.createElement(w.f,{text:f.a._("Save","EditPinModal.EditPinFooter.Save","save changes"),color:"red",onClick:s,disabled:o}))))}var z=n("NXrh");function q({board:e,canEdit:t,currentSection:n,onSectionChange:a,onSectionCreate:i,sectionId:o,sectionName:s}){const c=(null==e?void 0:e.id)?z.b:z.a;return r.a.createElement(w.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3},r.a.createElement(w.e,{column:12,mdColumn:3,paddingY:3},r.a.createElement(w.w,{htmlFor:"SectionPicker"},r.a.createElement(w.V,{size:"md"},f.a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")))),t&&e?r.a.createElement(w.e,{column:12,mdColumn:8},r.a.createElement(c,{board:e,onSectionChange:a,selectedSectionId:o,selectedSectionName:s,onSectionCreate:i})):r.a.createElement(w.e,{column:12,mdColumn:8,paddingY:2},r.a.createElement(w.V,{size:"md",weight:"bold"},n&&!(e||{}).is_collaborative?n.title:f.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit"))))}var W=n("VBRM"),G=n("8Enz"),Y=n("kT2/"),Q=n("6HHy"),X=n("1RGD");function K({keyValueBlocks:e,listBlocks:t,onUpdateKeyValueBlock:n,onUpdateListBlocks:i,templateType:o}){return r.a.createElement(w.e,null,1===o&&r.a.createElement(a.Fragment,null,r.a.createElement(w.e,{key:"cooktime",paddingY:2},r.a.createElement(w.V,{size:"md"},f.a._("Cook time","editModal.editStoryPinModal.details.cookTime","Label for cook time detail")),r.a.createElement(w.e,{paddingY:2},r.a.createElement(X.a,{onUpdate:e=>n(0,e),value:e[0]||null}))),r.a.createElement(w.e,{key:"servingSize",paddingY:2},r.a.createElement(w.V,{size:"md"},f.a._("Servings","editModal.editStoryPinModal.details.servings","Label for serving size detail")),r.a.createElement(w.e,{paddingY:2},r.a.createElement(Q.a,{showLabel:!1,onUpdate:e=>n(1,e),value:e[1]||null})))),2===o&&r.a.createElement(w.e,{key:"difficulty",paddingY:2},r.a.createElement(w.V,{size:"md"},f.a._("Difficulty","editModal.editStoryPinModal.details.difficulty","Label for difficulty level detail")),r.a.createElement(w.e,{paddingY:2},r.a.createElement(G.a,{showLabel:!1,onUpdate:e=>n(2,e),value:e[2]||null}))),r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.V,{size:"md"},(()=>{switch(o){case 1:return f.a._("Ingredients","editModal.editStoryPinModal.listHeading","Heading for an ingredients list");case 2:return f.a._("Supplies","editModal.editStoryPinModal.listHeading","Heading for a supplies list");default:return f.a._("What they'll need","editModal.editStoryPinModal.listHeading","Heading for a generic list")}})()),r.a.createElement(w.e,{paddingY:2},r.a.createElement(Y.a,{listBlocks:t,onUpdate:i}))))}var $=n("ESls"),Z=n("Joxa");var J=n("vvax"),ee=n("MNxV");var te=Object(i.connect)(()=>({}),e=>({completeResourceFetch:t=>e(Object(m.b)("PinResource",{field_set_key:"detailed",id:t.id},t)),invalidatePin:t=>e(Object(m.f)("PinResource",{field_set_key:"detailed",id:t}))}))((function({apiErrorMessage:e,board:t,completeResourceFetch:n,commentsDisabled:i,description:o,disableDelete:s,invalidatePin:c,isLoadingPin:d,isProcessing:p,onChangeBoard:m,onChangeComment:h,onChangePhoto:b,onChangeSection:g,onClickBoardCreate:E,onClickDeleteButton:_,onClickEditPages:v,onClickSectionCreate:S,onHide:C,photosDisabled:O,pinResource:I,sectionId:j,sectionName:k,title:M,triggerBoardAndSectionCreate:T}){var P,D;const R=null!==(P=I.data)&&void 0!==P?P:{},A=R.story_pin_data,L=null!==(D=R.images&&R.images["474x"])&&void 0!==D?D:{},[N,U]=Object(a.useState)(!1),[F,V]=Object(a.useState)(null),[H,q]=Object(a.useState)(!1),[G,Y]=Object(a.useState)({}),[Q,X]=Object(a.useState)([]);Object(a.useEffect)(()=>{const e=(null==A?void 0:A.metadata.basics)||null;if(e){const t=Object(Z.b)(e);Y(t.keyValueBlocks||{}),X(t.listBlocks||[])}},[A]),Object(a.useEffect)(()=>{e&&V(e)},[e]);const te=(e,t)=>{Y({...G,[e]:t}),U(!0)},ne=e=>{X(e),U(!0)},ae=R.created_at?new Date(R.created_at):null,re=ae&&Object(W.a)(ae,14),ie=!!re&&new Date<re,oe=Q.length>0||Object.keys(G).length>0,se=Object(J.b)(f.a._("Edit details and add, delete, or reorder pages up to {{ numDays }} days after your Story Pin is published. Edit the board and engagement settings any time.","editModal.editStoryPinModal.editTimeInformation","Let the user know how the edit settings are limited"),{numDays:14});return r.a.createElement(y.b,{accessibilityModalLabel:f.a._("Edit your previously saved pin","editModal.editStoryPinModal.accessibilityLabel","Accessible label for edit previously saved story pin modal"),footer:r.a.createElement(w.e,{display:"flex",justifyContent:"between"},r.a.createElement(w.e,{"data-test-id":"delete-pin-button"},r.a.createElement(w.f,{color:"white",disabled:s,onClick:_,size:"lg",text:f.a._("Delete","editModal.editStoryPinModal.deleteButton","Delete button for previously saved story pin")})),!!F&&r.a.createElement(w.e,{display:"flex",justifyContent:"center"},r.a.createElement(B.a,{errorMessage:F,htmlFor:"pin-edit-generic-error"})),r.a.createElement(w.e,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1},r.a.createElement(w.e,{paddingX:1},r.a.createElement(w.f,{onClick:C,size:"lg",text:f.a._("Cancel","editModal.editStoryPinModal.cancelButton","Cancel button to not save edits to previously saved story pin")})),r.a.createElement(w.e,{"data-test-id":"edit-pin-save",paddingX:1},r.a.createElement(w.f,{color:"red",onClick:()=>{if(N&&A){q(!0);const e=Object(Z.c)({keyValueBlocks:G,listBlocks:Q}),t=function(e){return{metadata:{basics:e.metadata.basics?Object(Z.a)(e.metadata.basics):void 0,diy_data:e.metadata.diy_data,pin_image_signature:e.metadata.pin_image_signature,pin_title:e.metadata.pin_title,recipe_data:e.metadata.recipe_data,template_type:e.metadata.template_type},pages:(t=e.pages,t.map(e=>{var t;const n=e.blocks.map(e=>{switch(e.type){case"story_pin_paragraph_block":return{block_style:e.block_style,style:e.style,text:e.text,type:0};case"story_pin_heading_block":return{block_style:e.block_style,level:e.level,style:e.style,text:e.text,type:1};case"story_pin_image_block":return{block_style:e.block_style,image_signature:e.image_signature,tracking_id:e.tracking_id,type:2};case"story_pin_video_block":return{block_style:e.block_style,tracking_id:e.tracking_id,type:3,video_signature:e.video_signature};default:return null}}).filter(Boolean);return n.length>0?{blocks:n,layout:e.layout,style:(null===(t=e.style)||void 0===t?void 0:t.background_color)?{background_color:e.style.background_color}:void 0}:null}).filter(Boolean))};var t}(A),a={...t,metadata:{...t.metadata,basics:e}},r={pin_id:R.id,story_pin:JSON.stringify(a)};u.a.create("StoryPinEditResource",r).callUpdate().then(e=>{const{resource_response:t}=e;c(R.id),n(t.data),T()}).catch(e=>{V(e.message),q(!1)})}else T()},size:"lg",text:f.a._("Done","editModal.editStoryPinModal.doneButton","Done button to save edits to previously saved story pin")})))),heading:f.a._("Edit Pin","editModal.editStoryPinModal.heading","Edit a previously saved story pin"),onDismiss:C,size:"md"},d||!I.isLoaded||H||p?r.a.createElement(w.e,{paddingX:12,paddingY:9},r.a.createElement(w.O,{accessibilityLabel:f.a._("Loading edit information","editPinModal.editStoryPinModal.spinner","Accessible label for the edit pin loading icon"),show:!0})):r.a.createElement(w.e,{overflow:"hidden"},r.a.createElement(w.e,{marginEnd:-4,marginStart:-4},r.a.createElement($.a,{name:"web_story_pin_limit_edits"},({anyEnabled:e})=>{var n;return r.a.createElement(w.e,{display:"flex",minHeight:300,overflow:"hidden",paddingX:8},r.a.createElement(w.e,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",paddingX:4},r.a.createElement(w.A,{wash:!0,rounding:4,width:120},r.a.createElement(w.v,{alt:o,color:"#efefef",naturalHeight:L.height,naturalWidth:L.width,src:L.url}),r.a.createElement(w.e,{position:"absolute",left:!0,top:!0,padding:2},r.a.createElement(w.e,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"center",opacity:.8,padding:2,rounding:"pill"},r.a.createElement(w.t,{accessibilityLabel:f.a._("Story Pin icon","editModal.editStoryPinModal.storyPinIndicator","Story Pin icon indicator"),color:"darkGray",icon:"story-pin",size:12}),r.a.createElement(w.e,{marginStart:1},r.a.createElement(w.V,{size:"md",weight:"bold"},null===(n=R.story_pin_data)||void 0===n?void 0:n.page_count))))),ie||!e?r.a.createElement(w.e,{"data-test-id":"edit-pages-button",paddingY:2},r.a.createElement(w.f,{inline:!0,onClick:v,text:f.a._("Edit Pages","editModal.editStoryPinModal.editPagesButton","Edit pages label for story pin creation entry point")})):null),r.a.createElement(w.e,{direction:"column",display:"flex",flex:"grow",paddingX:4},r.a.createElement(w.e,{marginBottom:-2,marginTop:-2},r.a.createElement(w.e,{maxHeight:500,overflow:"auto",paddingX:1},r.a.createElement(w.e,{maxWidth:504},e&&re&&r.a.createElement(w.e,{paddingY:2},ie?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.V,{size:"md"},Object(J.b)(f.a._("Edit until {{ editDate }}","editModal.editStoryPinModal.lastEditableDate","Let user know the last date this Pin can be edited on"),{editDate:r.a.createElement(ee.b,{dateFormatType:ee.a.NUMERIC,key:"noEditsTwoWeeksAfter-"+R.created_at,useUTC:!1,value:re})})),r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.V,{color:"gray",size:"md"},se))):r.a.createElement(w.V,{color:"gray",size:"md"},se)),r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.V,{size:"md"},f.a._("Title","editModal.editStoryPinModal.titleLabel","Label for form input where users will input the title of their pin")),r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.e,{alignItems:"center",color:"lightGray",display:"flex",justifyContent:"between",padding:4,rounding:4},r.a.createElement(w.V,{color:"gray",truncate:!0},M||""),r.a.createElement(w.t,{accessibilityLabel:f.a._("Lock","editModal.editStoryPinModal.lockIcon.accessibilityLabel","Label for the lock icon to show that editing a story pin title is locked"),color:"darkGray",icon:"lock"})))),r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.V,{size:"md"},f.a._("Board","editModal.editStoryPinModal.boardLabel","Label for dropdown where users will choose their board")),r.a.createElement(w.e,{paddingY:2},r.a.createElement(x.a,{board:t,id:"BoardPicker",isStoryPin:!0,onBoardChosen:m,onBoardCreate:E}))),r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.V,{size:"md"},f.a._("Section","editModal.editStoryPinModal.sectionLabel","Label for dropdown where users will choose their section")),r.a.createElement(w.e,{paddingY:2},(null==t?void 0:t.id)&&r.a.createElement(z.b,{isStoryPin:!0,board:t,onSectionChange:g,onSectionCreate:S,selectedSectionId:j,selectedSectionName:k}))),e&&oe&&ie&&r.a.createElement(K,{keyValueBlocks:G,listBlocks:Q,onUpdateKeyValueBlock:te,onUpdateListBlocks:ne,templateType:null==A?void 0:A.metadata.template_type}),R.can_delete_did_it_and_comments&&r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.V,{size:"md"},f.a._("Comments and Photos Permissions","editModal.editStoryPinModal.commentsAndPhotosPermissionsLabel","Label for dropdown where users can toggle off permissions for comments and photos")),r.a.createElement(w.e,{paddingY:2},r.a.createElement(l.a,{isNoTitle:!0,commentsDisabled:i,onCommentChange:h,onPhotoChange:b,photosDisabled:O}))))))))}))))}));function ne({canEdit:e,onTitleChange:t,title:n,errorMessage:a}){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.o,null),r.a.createElement(w.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3},r.a.createElement(w.e,{column:12,mdColumn:3,paddingY:2},r.a.createElement(w.w,{htmlFor:"TitleField"},r.a.createElement(w.V,{size:"md"},f.a._("Title","Label for editing title of pin","Label for editing title of pin")))),r.a.createElement(w.e,{column:12,mdColumn:8},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.e,null,r.a.createElement(w.X,{hasError:(a||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})),!!a&&r.a.createElement(w.e,{justifyContent:"center"},r.a.createElement(B.a,{errorMessage:a,htmlFor:"pin-edit-title"}))):r.a.createElement(w.e,{column:12,mdColumn:8,paddingY:2},r.a.createElement(w.V,{size:"md",weight:"bold"},n)))))}function ae({onChangeWebsite:e,link:t,errorMessage:n}){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.o,null),r.a.createElement(w.e,{mdDisplay:"flex",justifyContent:"between",paddingX:4,paddingY:3},r.a.createElement(w.e,{column:12,mdColumn:3,paddingY:2},r.a.createElement(w.w,{htmlFor:"WebsiteField"},r.a.createElement(w.V,{size:"md"},f.a._("Website")))),r.a.createElement(w.e,{column:12,mdColumn:8},r.a.createElement(w.e,null,r.a.createElement(w.X,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})),!!n&&r.a.createElement(w.e,{justifyContent:"center"},r.a.createElement(B.a,{errorMessage:n,htmlFor:"pin-edit-website"})))))}var re=n("TN0d"),ie=n("3DIk"),oe=n("Wrea"),se=n("sH+O"),ce=n("OSge"),le=n("r8eU"),de=n("NjDU"),ue=n("C0mq"),pe=n("eIuQ"),me=n("pLLR"),he=n("ANjH"),be=n("guDk"),ge=n("c50B"),fe=n("VqlB"),ye=n("w70y");function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e){return Boolean(e&&e.trim().length)}function ve(e,t){const n=_e(e),a=_e(t);return(n||a)&&e!==t}class Se extends a.Component{constructor(...e){super(...e),Ee(this,"state",{board:this.props.pinResource.data&&this.props.pinResource.data.board||null,commentsDisabled:this.props.pinResource.data&&this.props.pinResource.data.comments_disabled||!1,description:this.props.pinResource.data&&this.props.pinResource.data.description.trim()||"",apiErrorMessage:null,link:this.props.pinResource.data&&this.props.pinResource.data.link||"",photosDisabled:this.props.pinResource.data&&this.props.pinResource.data.did_it_disabled||!1,sectionId:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.id||null,sectionName:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.title||null,showDeleteConfirmation:!1,carousel_data:this.props.pinResource.data&&this.props.pinResource.data.carousel_data||null,title:this.props.pinResource.data&&this.props.pinResource.data.title||"",userNote:this.props.pinResource.data&&this.props.pinResource.data.unified_user_note&&this.props.pinResource.data.unified_user_note.trim()||"",isLoadingPin:!this.props.pinResource.isLoaded,isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1,shouldShowValidationUserMentionTagsError:!1,userMentionTags:this.props.pinResource.data&&this.props.pinResource.data.user_mention_tags||[]}),Ee(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),Ee(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),Ee(this,"updateCarouselSlotIndex",()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})}),Ee(this,"handleBoardChange",e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),Ee(this,"createBoard",e=>{const{createBoard:t}=this.props,{board:n}=this.state;!n.id&&n.name&&e&&t(n.name,e).then(e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}),Ee(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:d.a.BoardPrivacy.PUBLIC,access:"write"};this.setState({board:t,sectionId:null,sectionName:null})}),Ee(this,"createSection",()=>{const{board:e,sectionName:t}=this.state;if(!t)return;if(!e.id)return void this.createBoard();const n={boardId:e.id,name:t},{createSection:a}=this.props;a(n).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(e=>{const t=Object(be.c)(e);this.setState({shouldShowGenericUpdateError:!t,apiErrorMessage:t?e.message:null}),e&&Object(be.c)(e)&&this.showErrorToast(Object(be.b)(e)||e.message)})}),Ee(this,"handleSectionCreateClick",e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})}),Ee(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),Ee(this,"handleDeletePin",()=>{const{pinResource:{data:e},pinId:t,onDelete:n,onHide:a,changeBoardPinCount:r,changeUserPinCount:i,advertiser_id:o}=this.props,s={...o?{advertiser_id:o}:{},id:t};return u.a.create("PinResource",s).callDelete().then(()=>{if(this._isMounted){if(!e)return;const{board:{id:o},pinner:{id:s},section:c}=e;r({boardId:o,sectionId:c&&c.id||void 0,increment:-1}),i({userId:s,increment:-1}),re.a.instance.publish(o,"pinDeleted",t),re.a.instance.publish(s,"pinDeleted"),re.a.instance.publish(t,"pinDeleted"),a(),n&&n()}})}),Ee(this,"sanitizeCarouselData",e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)}),t}}return null}),Ee(this,"triggerBoardAndSectionCreate",e=>()=>{const{board:t,sectionId:n,sectionName:a}=this.state;t&&!t.id&&t.name?this.createBoard(e):!n&&a?this.createSection():this.handleSave()}),Ee(this,"logPinEditEvent",(e,t,n,a,r)=>{const i={},{pinId:o,view:s,viewParameter:c}=this.props,{userMentionTags:l}=this.state;if(i.objectId=o,i.num_user_mention_tags=l.length,e&&(i.board_was_modified=!0),!e&&t&&(i.board_section_was_modified=!0),n){const{description:e}=this.state,{description:t}=r;i.original_pin_description=t,i.edited_pin_description=e}if(a){const{carousel_data:e}=this.state,{carousel_data:t}=r;i.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(t)),i.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(e))}Object(D.b)(2,{component:208,view:s,viewParameter:c,...i})}),Ee(this,"handleSave",()=>{this.setState({apiErrorMessage:null,isProcessing:!0});const{advertiser_id:e,pinId:t,pinResource:{data:n},invalidatePinResource:a,completeResourceFetch:r,onHide:i}=this.props;if(!n)return;const{board:o,comments_disabled:s,did_it_disabled:c,title:l,description:d,link:p,section:m,carousel_data:h}=n,{carousel_data:b,shouldShowValidationLinkFormatError:f}=this.state;let y;if(b){const e=this.sanitizeCarouselData();e&&(y=JSON.stringify(e))}const{board:E,commentsDisabled:_,currentIndex:v,photosDisabled:S,title:w,description:C,sectionId:O,carousel_data:I,userMentionTags:j}=this.state,x=E||o,k=f?p:this.state.link,M={board_id:x.id,board_section_id:O,carousel_data_json:y,description:C,disable_comments:_,disable_did_it:S,id:t,link:k,title:w,user_mention_tags:JSON.stringify(j),...e?{advertiser_id:e}:{}},T=m&&m.id||null,P=x.id,B=o.id,D=B!==P,R=(Boolean(T)||Boolean(O))&&T!==O,A=ve(l,w),L=ve(d,C),N=ve(p,k),U=Boolean(I)&&Boolean(h)&&!g()(I,h);D||R||A||L||N||U||(s!==_||c!==S)?u.a.create("PinResource",M).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const{changeBoardPinCount:t,onSubmit:o,pinId:s,pinMoved:c}=this.props;(D||R)&&P&&B&&(c({selectedPinIds:[s],source:{boardId:B,sectionId:T},target:{boardId:P,sectionId:O}}),t({boardId:P,sectionId:O||void 0,increment:1}),t({boardId:B,sectionId:T||void 0,increment:-1})),o&&P&&x.url&&o({boardId:P,title:x.name,sectionId:O,url:x.url}),i(),a(s);const{data:l}=e;l.carousel_data&&(l.carousel_data.index=v),r(l),this.logPinEditEvent(D,R,L,U,n)}}).catch(e=>{const t=Object(be.c)(e),{shouldShowValidationTitleError:n,shouldShowValidationDescriptionError:a,shouldShowValidationLinkFormatError:r}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!(t||n||a||r)}),t&&this.showErrorToast(Object(be.b)(e)||e.message)}):(i(),a(t)),this.setState({isProcessing:!1})}),Ee(this,"handleTextChanges",(e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const a=c()(n),{carousel_slots:r=[]}=a,{currentIndex:i,shouldApplyTextToAll:o,description:s,link:l,title:d}=this.state,u=this.valueIsValidForType(e,t);switch(o?r.forEach(n=>n[t]=e):r[i]&&(r[i][t]=e),t){case"details":const t=0===i?e:s;this.setState({description:t,carousel_data:a||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===i?e:l;this.setState({link:n,carousel_data:a||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const r=0===i?e:d;this.setState({title:r,carousel_data:a||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}}),Ee(this,"handleDescriptionChange",({value:e,userMentionTags:t})=>{const n=this.valueIsValidForType(e,"description"),a=this.valueIsValidForType(t,"userMentionTags");t.length<this.state.userMentionTags.length&&Object(D.b)(8906,{element:116,tag_type:1}),this.setState({description:e,userMentionTags:t,userNote:e,shouldShowValidationDescriptionError:!n,shouldShowValidationUserMentionTagsError:!a,shouldShowGenericUpdateError:!1})}),Ee(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),Ee(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),Ee(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),Ee(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(ge.r)([Object(ge.q)({message:f.a._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;case"userMentionTags":return e.length<=5;default:return!0}}),Ee(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),Ee(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),Ee(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),Ee(this,"handlePhotoChange",e=>this.setState({photosDisabled:!e.value})),Ee(this,"handleShouldApplyToAll",e=>{if(e){const{currentIndex:t,carousel_data:n}=this.state;if(!n)return;const a=c()(n),{carousel_slots:r}=a,{details:i,link:o,title:s}=r[t];r.forEach(e=>{e.details=i,e.title=s,e.link=o}),this.setState({carousel_data:a,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),Ee(this,"handleCarouselSlider",e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})}),Ee(this,"handleClickStoryPinPages",()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/story-pin-builder/${e.id}/edit`)}),Ee(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),Ee(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}componentDidUpdate(e){const{pinResource:{data:t,isLoaded:n},carouselSlotCurrentIndex:a}=this.props;t&&n!==e.pinResource.isLoaded&&this.setState({board:t.board,commentsDisabled:t.comments_disabled,description:t.description&&t.description.trim(),isLoadingPin:!1,link:t.link,photosDisabled:t.did_it_disabled,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,userNote:t.unified_user_note,carousel_data:t.carousel_data,currentIndex:void 0!==a?a:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1,userMentionTags:t.user_mention_tags||[]})}componentWillUnmount(){this._isMounted=!1}showErrorToast(e){this.props.toastManagerContext.showOneToast(({onHide:t})=>r.a.createElement(v.a,{color:"red",duration:5e3,onHide:t,text:e})),this.props.onHide()}getCurrentUserId(e){const{adminModeInfo:t,advertiserOwnerUserId:n}=this.props;return t&&t.version===ie.a?n:e.isAuth?e.id:""}render(){const{disableDelete:e,onHide:t,pinResource:n,pinId:a,requestContext:i,adminModeInfo:s,viewer:c}=this.props,{apiErrorMessage:d,board:u,commentsDisabled:p,description:m,link:h,photosDisabled:b,sectionId:g,sectionName:E,showDeleteConfirmation:_,title:v,userNote:S,isLoadingPin:C,isProcessing:O,carousel_data:I,shouldApplyTextToAll:x,currentIndex:M,shouldDisableSave:T,shouldShowCarouselSliders:P,shouldShowValidationTitleError:B,shouldShowValidationDescriptionError:D,shouldShowValidationLinkFormatError:R,shouldShowGenericUpdateError:A,shouldShowValidationUserMentionTagsError:N,userMentionTags:U}=this.state;if(_)return r.a.createElement(j,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const F=n.data||{},z=!!(I&&I.carousel_slots&&I.carousel_slots.length>1),W=I&&I.carousel_slots&&I.carousel_slots.length>0&&I.carousel_slots[M]||{},{details:G="",link:Y="",title:Q=""}=W,X=(null==s?void 0:s.version)===ie.a&&!(null==s?void 0:s.writeMode),K=!!(F&&F.story_pin_data_id&&F.story_pin_data),$=F&&(F.access||[]).includes("write")||this.props.canEdit||!!u&&Object(o.a)({action:4,board:u}),Z=e=>{const t=this.getCurrentUserId(e),n=this.props.canEdit&&this.props.advertiserOwnerUserId?this.props.advertiserOwnerUserId:t;return $&&!F.is_repin&&!X&&!(F.aggregated_pin_data&&F.aggregated_pin_data.is_shop_the_look)&&!K&&(z||!I)&&(F.native_creator&&F.native_creator.id===n||z&&F.pinner&&F.pinner.id===n||F.link_domain&&F.link_domain.official_user&&F.link_domain.official_user.id===n||!!F.domain&&F.pinner&&F.pinner.id===n&&F.pinner.domain_url&&F.pinner.domain_url.includes(F.domain))},J=e=>!Z(e),ee=F&&F.images&&F.images["474x"]||{},re=new le.b(i,"web_story_pin_creator").enabledWithNoActivation(),oe=F.story_pin_data&&F.story_pin_data.metadata&&F.story_pin_data.metadata.version?Object(se.a)(F.story_pin_data.metadata.version,ce.c):null,de=null!=oe&&oe>=0,ue=!!F.story_pin_data&&!!F.story_pin_data.metadata&&!!F.story_pin_data.metadata.is_editable&&F.native_creator&&F.native_creator.id===this.getCurrentUserId(c);if(K&&re&&de&&ue)return r.a.createElement(te,{apiErrorMessage:d,board:u,commentsDisabled:p,description:m,disableDelete:e,isLoadingPin:C,isProcessing:O,onChangeBoard:this.handleBoardChange,onChangeComment:this.handleCommentChange,onChangePhoto:this.handlePhotoChange,onChangeSection:this.handleSectionChange,onClickBoardCreate:this.handleBoardCreateClick,onClickDeleteButton:this.onClickDeleteButton,onClickEditPages:this.handleClickStoryPinPages,onClickSectionCreate:this.handleSectionCreateClick,onHide:t,photosDisabled:b,pinResource:n,sectionId:g,sectionName:E,title:v,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(c)});const me=J(c)?null:r.a.createElement(ne,{canEdit:$,onTitleChange:z?this.handleCarouselTitleChange:this.handleTitleChange,title:z?Q:v,errorMessage:B?Object(pe.b)(z):""}),he=$||c.isAuth&&(F.pinner||{}).id===c.id?r.a.createElement(L,{canAddUserMentionTags:!J(c),canEdit:$,description:(e=>z?G:J(e)?S:m)(c)||"",errorMessage:(e=>D?(e=>J(e)?Object(pe.e)(z):Object(pe.a)(z))(e):N?Object(pe.d)(z):"")(c),initialMentions:U,label:J(c)?f.a._("Note","Label for editing user note","Label for editing user note"):f.a._("Description","Label for editing description","Label for editing description"),placeholder:J(c)?f.a._("Write a note about this Pin...","Placeholder for editing user note","Placeholder for editing user note"):f.a._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:z?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,be=Z(c)?r.a.createElement(ae,{link:z?Y:h,onChangeWebsite:z?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:R?Object(pe.c)(z):""}):null,ge=z?r.a.createElement(w.e,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},r.a.createElement(w.e,{paddingY:2},r.a.createElement(w.w,{htmlFor:"applyTextToAll"},r.a.createElement(w.V,null,f.a._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")))),r.a.createElement(w.e,{paddingX:2,paddingY:2},r.a.createElement(w.R,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:x}))):null,fe=F.can_delete_did_it_and_comments?r.a.createElement(l.a,{commentsDisabled:p,onCommentChange:this.handleCommentChange,onPhotoChange:this.handlePhotoChange,photosDisabled:b}):null;return r.a.createElement(y.b,{heading:f.a._("Edit this Pin","EditPinModal.ModalHeading.EditThisPin","Edit a previously saved pin"),accessibilityModalLabel:f.a._("Edit your previously saved pin","EditPinModal.ModalHeading.AccessibleLabel","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:t,footer:r.a.createElement(H,{apiErrorMessage:d,shouldShowGenericUpdateError:A,onClickDeleteButton:this.onClickDeleteButton,disableDelete:e,onHide:t,shouldDisableSave:T,triggerBoardAndSectionCreate:this.triggerBoardAndSectionCreate(c)})},C||!n.isLoaded||O?r.a.createElement(w.e,{display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(w.O,{accessibilityLabel:f.a._("loading","EditPinModal.LoadingPin.Spinner","Accessible label for the edit pin loading icon"),show:!0})):r.a.createElement(w.e,{display:"flex",justifyContent:"between",minHeight:350,paddingX:4},r.a.createElement(w.e,{column:12,mdColumn:9},r.a.createElement(k,{board:u||F.board,canEdit:$,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),r.a.createElement(q,{board:u||F.board,canEdit:$,onSectionCreate:this.handleSectionCreateClick,onSectionChange:this.handleSectionChange,sectionId:g,sectionName:E,currentSection:F.section}),me,he,be,ge,fe),r.a.createElement(V,{isCarousel:z,shouldShowCarouselSliders:P,onCarouselSlide:this.handleCarouselSlider,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,currentIndex:this.state.currentIndex,carouselData:this.state.carousel_data,pinId:a,description:m,image:ee})))}}const we=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object(he.compose)(ue.a,Object(ye.b)({key:"pinResource",name:"PinResource",options:e=>we(e.pinId,!0)}),me.e,S.c,Object(i.connect)((function(e,t){const{advertiser:n,viewer:a}=e;return a.isAuth&&n?{advertiser_id:n.id,...n.owner_user_id!==a.id?{advertiserOwnerUserId:n.owner_user_id,adminModeInfo:n.admin_mode_info}:{},viewer:a}:{viewer:a}}),e=>({changeBoardPinCount:t=>e(Object(oe.d)(t)),changeUserPinCount:t=>e(Object(de.b)(t)),completeResourceFetch:t=>e(Object(m.b)("PinResource",we(t.id,!1),t)),createBoard:(t,n)=>e(function(e,t){const n={name:e,privacy:d.a.BoardPrivacy.PUBLIC};return e=>u.a.create("BoardResource",n).callCreate().then(n=>{const a=n.resource_response.data;return e(t.username&&Object(m.f)("BoardsResource",Object(p.a)(t.username,!1))),a})}(t,n)),createSection:t=>e(Object(h.a)(t)),invalidatePinResource:t=>e(Object(m.f)("PinResource",we(t,!0))),pinMoved:Object(he.bindActionCreators)(fe.b,e)})))(Se)},"6HHy":function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=n("Ye/N"),o=n("vvax"),s=n("n6mq");function c({onUpdate:e,showLabel:t=!0,value:n}){const a=[];for(let r=1;r<=50;r+=1)a.push({value:String(r),label:Object(o.b)(i.a.ngettext("{{ servings }} serving","{{ servings }} servings",r,"storyboard.detailsList.field.servings","Option for number of servings a story pin recipe will provide"),{servings:r}).join("")});return r.a.createElement(s.e,{width:"100%",display:"flex"},r.a.createElement(s.e,{width:"100%",position:"relative"},r.a.createElement(s.M,{size:"lg",id:"servings",name:"servings",label:t?i.a._("Servings","storyboard.detailsList.field.servings","Header title for serving count entry for story pin recipe"):void 0,placeholder:i.a._("Pick a serving size","storyboard.detailsList.recipe","Placeholder caption for servings count input in story pin recipe"),value:n,options:a,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})))}},"8Enz":function(e,t,n){n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("Ye/N"),o=n("n6mq");function s({onUpdate:e,showLabel:t=!0,value:n}){const a=[{label:i.a._("Easy","storyboard.detailsList.field.difficulty","Easy difficulty rating for story pin"),value:String(1)},{label:i.a._("Intermediate","storyboard.detailsList.field.difficulty","Medium difficulty rating for story pin"),value:String(2)},{label:i.a._("Expert","storyboard.detailsList.field.difficulty","Hard difficulty rating for story pin"),value:String(3)},{label:i.a._("Not applicable","storyboard.detailsList.field.difficulty","Difficulty rating does not apply for story pin"),value:String(0)}];return r.a.createElement(o.e,{width:"100%",display:"flex"},r.a.createElement(o.e,{width:"100%"},r.a.createElement(o.M,{size:"lg",id:"servings",name:"servings",label:t?i.a._("Difficulty","storyboard.detailsList.field.difficulty","Header title for difficulty rating entry for story pin"):void 0,placeholder:i.a._("Pick a difficulty rating","storyboard.detailsList.field","Placeholder caption for difficulty rating input in story pin"),value:n,options:a,onChange:({value:t})=>{Number.isNaN(t)||e(t)}})))}},"8cMa":function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("Ye/N"),o=n("n6mq");t.a=function({type:e}){const t={group:{accessibilityLabel:i.a._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:i.a._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"protect"},secret:{accessibilityLabel:i.a._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return r.a.createElement(o.e,{marginStart:1},r.a.createElement(o.e,{marginStart:2},"sections"===e||"sectionsInline"===e?r.a.createElement(o.t,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):r.a.createElement(o.t,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})))}},"9QW3":function(e,t,n){n.d(t,"a",(function(){return o}));const a={row:0,section:0},r={row:-1,section:-1},i=()=>{};class o{constructor(e){this.index=Object.assign({},a),this.sections=e,this.updateCallback=i,this.selectItem=i}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===r.row&&t===r.section?this.index=Object.assign({},a):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===r.row&&t===r.section)this.index=Object.assign({},a);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},r),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},"B/lV":function(e,t,n){const a=e=>{const t=e.replace(new RegExp("^"+(window.location.origin||"")),""),n=document&&document.querySelector(`head > script[src='${t}']`);return!!n&&n.hasAttribute("defer")},r=e=>["pinimg","pinterest","pinterdev"].every(t=>!e.includes(t+".com/"));t.a=(e,t)=>{const n=(({name:e,initiatorType:t})=>{switch(t){case"xmlhttprequest":return"xmlhttprequest";case"img":return"image";case"video":return"video";default:{const t=e.split("."),n=(t.length>1&&t.pop()||"").toLowerCase();return["js","mjs"].includes(n)?"script":"css"===n?"css":["mp4","m4v","mov"].includes(n)?"video":["bmp","gif","jpg","jpeg","png","tiff","webp","svg"].includes(n)?"image":"other"}}})(e),{name:i}=e;return{category:n,isDeferred:"script"===n&&a(i),isExternal:r(i),isVisuallyCompleteRequired:"image"===n&&t.includes(i),timing:e}}},BkRI:function(e,t,n){var a=n("OBhP");e.exports=function(e){return a(e,5)}},C0mq:function(e,t,n){n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("EC67");function o(e){function t(t){const n=Object(i.g)(),a=Object(i.h)(),o=Object(i.j)();return r.a.createElement(e,Object.assign({},t,{history:n,location:a,match:o}))}return t.displayName=`withRouterShim(${e.displayName||e.name||""})`,t}},CP5N:function(e,t,n){var a=n("q1tI"),r=n("3R0Q"),i=n("B/lV"),o=n("vzKb"),s=n("FylZ"),c=n("mRg4"),l=n("LvPn"),d=n("XtwW"),u=n("LrH5"),p=n("fZG9"),m=n("xfna"),h=n("3/Bf");const b=Object(u.a)("PwtStopwatch"),g=(e,t)=>{if(d.a){if("start"===t.type&&!e.isTiming){const{name:e,startTime:n}=t;return Object(h.c)("TIMING."+e),{isTiming:!0,isSampled:t.isSampled,startTime:"number"==typeof n?n:d.a.now(),metricId:{type:"stopwatch",name:e},pwtStaticContext:t.pwtStaticContext,annotations:[],binaryAnnotations:{},spans:[]}}if("annotate"===t.type&&e.isTiming)return{...e,annotations:e.annotations.concat([{label:t.label,timestamp:d.a.now()}])};if("binaryAnnotate"===t.type&&e.isTiming)return b(`adding binary annotation {${t.name}: ${String(t.value)}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:t.value,type:t.annotationType}}};if("binaryAnnotateOperation"===t.type&&e.isTiming){const{value:n,type:a}=t.binaryAnnotationValueAndType;if(e.binaryAnnotations[t.name]){const r=e.binaryAnnotations[t.name].value||0;return b(`operating on binary annotation {\n          name: ${t.name}\n          pervious value: ${String(r)}\n          operand: ${String(n)}\n        }`),{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n?t.operation(r,n):r,type:a}}}}return{...e,binaryAnnotations:{...e.binaryAnnotations,[t.name]:{value:n,type:a}}}}if("addSubspan"===t.type&&e.isTiming){b(`adding subspan {${t.name}}`);const{startTime:n}=e;return{...e,spans:[...e.spans,{name:t.name,startTime:t.startTime||n,endTime:t.endTime,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]}}if("subspanStart"===t.type&&e.isTiming)return b(`starting subspan {${t.name}}`),{...e,spans:[...e.spans,{name:t.name,startTime:d.a.now(),endTime:1/0,annotationMap:{...t.annotations},binaryAnnotationMap:{...t.binaryAnnotations}}]};if("subspanStop"===t.type&&e.isTiming){b(`stopping subspan {${t.name}}`);const n=e.spans.findIndex(e=>e.name===t.name);return n>-1?(e.spans[n].endTime=d.a.now(),t.annotations&&(e.spans[n].annotationMap={...e.spans[n].annotationMap,...t.annotations}),t.binaryAnnotations&&(e.spans[n].binaryAnnotationMap={...e.spans[n].binaryAnnotationMap,...t.binaryAnnotations})):Object(h.b)("invalid_subspan_stop_name",{name:t.name}),e}if("stop"===t.type&&e.isTiming){const{startTime:n,metricId:a,pwtStaticContext:o,annotations:u,binaryAnnotations:m,isSampled:h,spans:b}=e;if(t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect(),h){const e=t.stopTime||d.a.now(),h={type:"COMPLETE",traceId:Object(s.a)(),startTime:n,endTime:e,spans:b.length?b.map(t=>(t.endTime===1/0&&(t.endTime=e),t)):(t.customStopwatchBuffer||[]).map(e=>Object(l.a)(Object(i.a)(e,[]))).filter(Boolean),annotationMap:Object(r.a)(u),binaryAnnotationMap:Object(p.a)({metricId:a,pwtStaticContext:o,binaryAnnotations:m,performanceResourceTimings:t.customStopwatchBuffer||[]})};Object(c.a)({metricId:a,pwtStaticContext:o,result:h})}return{isTiming:!1}}if("error"===t.type){const{error:e,stopwatchPerformanceObserver:n}=t;return e&&Object(h.b)(e),n&&n.disconnect(),{isTiming:!1}}if("abort"===t.type&&e.isTiming){t.stopwatchPerformanceObserver&&t.stopwatchPerformanceObserver.disconnect();const{metricId:n,pwtStaticContext:a}=e,r=t.reason||"";return Object(c.a)({metricId:n,pwtStaticContext:a,result:{type:"ABORT",reason:r}}),{isTiming:!1}}}return e};t.a=(e,t)=>{const n=Object(m.c)(),r=Object(a.useRef)([]),i=Object(a.useRef)(),[s,c]=Object(a.useReducer)(g,{isTiming:!1});return n?{isTiming:s.isTiming,start:a=>{if(window.PerformanceObserver){const e=1e3;r.current=[],i.current=Object(o.a)({entryTypes:["resource"]},t=>{r.current=r.current.concat(t.getEntries()),r.current.length>e&&(r.current=r.current.slice(-e))})}const s={type:"start",startTime:a,name:e,pwtStaticContext:n,isSampled:!t||Math.random()<t};return c(s)},stop:e=>c({type:"stop",stopTime:e,stopwatchPerformanceObserver:i.current,customStopwatchBuffer:r.current}),error:e=>{c({type:"error",stopwatchPerformanceObserver:i.current,error:e})},abort:e=>c({type:"abort",stopwatchPerformanceObserver:i.current,customStopwatchBuffer:r.current,reason:e}),annotate:e=>c({type:"annotate",label:e}),binaryAnnotate:(e,t,n)=>c({type:"binaryAnnotate",name:e,value:t,annotationType:n}),binaryAnnotateOperation:(e,t,n)=>c({type:"binaryAnnotateOperation",name:e,binaryAnnotationValueAndType:t,operation:n}),addSubspan:(e,t,n,a={},r={})=>c({type:"addSubspan",name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:r}),subspanStart:(e,t={},n={})=>c({type:"subspanStart",name:e,annotations:t,binaryAnnotations:n}),subspanStop:(e,t={},n={})=>c({type:"subspanStop",name:e,annotations:t,binaryAnnotations:n})}:null}},"Dw+G":function(e,t,n){var a=n("juv8"),r=n("mTTR");e.exports=function(e,t){return e&&a(t,r(t),e)}},DzJC:function(e,t,n){var a=n("sEfC"),r=n("GoyQ");e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return r(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),a(e,t,{leading:i,maxWait:t,trailing:o})}},EEGq:function(e,t,n){var a=n("juv8"),r=n("oCl/");e.exports=function(e,t){return a(e,r(e),t)}},EHyI:function(e,t,n){n.d(t,"a",(function(){return o}));var a=()=>{var e;return!!(null===(e=window.performance)||void 0===e?void 0:e.timing)},r=n("XtwW"),i=n("gg0E");function o(e){return!("desktop"===e&&!a())&&(!!r.a&&Object(i.a)())}},F4HH:function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("CP5N"),o=n("1dBE"),s=n("xfna");t.a=({name:e,v2LoggerMetricName:t,sampleRate:n,abortOnUnloadOrClientNavigation:c=!0})=>{const{Provider:l,useHook:d}=Object(o.b)("Stopwatch_"+e);return{Provider:function({children:t}){const o=Object(i.a)(e,n),d=Object(s.b)(),u=d?d.time:0,p=Object(a.useRef)(!1),m=e=>{p.current&&(p.current=!1,o&&o.abort(e))};return Object(a.useEffect)(()=>()=>{c&&m("unloadOrClientNavigation")},[u]),r.a.createElement(l,{value:{abort:m,addAnnotation:e=>{p.current&&o&&o.annotate(e)},addBinaryAnnotation:(e,t,n)=>{p.current&&o&&o.binaryAnnotate(e,t,n)},binaryAnnotationOperation:(e,t,n)=>{p.current&&o&&o.binaryAnnotateOperation(e,t,n)},addSubspan:(e,t,n,a,r)=>{p.current&&o&&o.addSubspan(e,t,n,a,r)},subspanStart:(e,t,n)=>{p.current&&o&&o.subspanStart(e,t,n)},subspanStop:(e,t,n)=>{p.current&&o&&o.subspanStop(e,t,n)},error:e=>{p.current&&(p.current=!1,o&&o.error(e))},start:()=>{o&&p.current&&o.abort("duplicated_init_stopwatch_action"),p.current=!0,null==o||o.start()},stop:e=>{p.current&&(p.current=!1,o&&o.stop(e))}}},t)},useHook:d}}},FylZ:function(e,t,n){function a(){let e="";for(let t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}n.d(t,"a",(function(){return a}))},G6z8:function(e,t,n){var a=n("fR/l"),r=n("oCl/"),i=n("mTTR");e.exports=function(e){return a(e,i,r)}},GBVV:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=n("n6mq");const o={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return r.a.createElement(i.e,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8},r.a.createElement(i.e,{dangerouslySetInlineStyle:o,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18}))}function c({disabled:e,name:t,onClick:n,size:a,submitting:o,text:c}){return r.a.createElement(i.e,{display:"flex",position:"relative"},o&&r.a.createElement(s,null),r.a.createElement(i.f,{color:"red",disabled:e||o,inline:!0,name:t,onClick:n,size:a,type:"submit",text:c}))}},Gi0A:function(e,t,n){var a=n("QqLw"),r=n("ExA7");e.exports=function(e){return r(e)&&"[object Map]"==a(e)}},IBrh:function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=n("mEMi"),o=(n("9QW3"),n("n6mq"));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends r.a.Component{constructor(e){super(e),s(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),s(this,"handleIndexUpdate",e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),s(this,"handleSelectItem",e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)}),s(this,"handleMouseEnter",e=>()=>{const{disabled:t,indexManager:n}=this.props;t||n.updateIndex(e)}),s(this,"handleMouseLeave",()=>{const{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),s(this,"renderItems",(e,t)=>{const{renderItem:n}=this.props,{selectedIndex:a}=this.state,{row:i,section:s}=a||{},{customProps:c={},items:l,renderItem:d}=e,{isDisabled:u=(e=>!1)}=c,p=t===s,m=d||n;return m&&l.map((e,n)=>{const a=u(e),s={section:t,row:n},l=p&&n===i;return r.a.createElement(o.e,{"data-test-id":"board-selection",key:n,ref:!a&&l?this.setSelectedItemRef:null},a?m({item:e,hovered:l,sectionProps:c}):r.a.createElement(o.U,{fullWidth:!1,onMouseEnter:this.handleMouseEnter(s),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2},m({item:e,hovered:l,sectionProps:c})))})}),s(this,"renderSections",()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map((t,n)=>r.a.createElement(o.e,{key:n},e&&e(t,n),this.renderItems(t,n)))});const{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),a=n.top,r=n.bottom,i=t.getBoundingClientRect(),o=i.top;r>=i.bottom?e.scrollIntoView(!1):a<=o&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return r.a.createElement(i.a,{fetchMore:n},({setRef:n,onScroll:a})=>r.a.createElement(o.e,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:a,overflow:"auto",ref:e=>{this.containerRef=e,n(e)}},this.renderSections()))}}},JKZO:function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("nokP"),o=n.n(i),s=n("yeYm"),c=n.n(s),l=n("clxp"),d=n("FDmi"),u=n("Ye/N"),p=n("n6mq");var m=e=>{const{id:t,isFocused:n,onMouseDown:a,onMouseEnter:i,onMouseUp:o,mention:s,role:c,searchValue:l}=e;return r.a.createElement("div",{id:t,onMouseDown:a,onMouseEnter:i,onMouseUp:o,searchvalue:l,role:c},r.a.createElement(p.e,{display:"flex",alignItems:"center",color:n?"lightGray":"transparent",rounding:4,dangerouslySetInlineStyle:{__style:{cursor:"pointer"}}},r.a.createElement(p.e,{padding:1},r.a.createElement(d.a,{accessibilityLabel:"",name:s.full_name,size:"sm",src:s.image_medium_url,verified:s.verified_identity&&s.verified_identity.verified})),r.a.createElement(p.e,{marginStart:2,marginEnd:2,overflow:"hidden"},r.a.createElement(p.V,{truncate:!0,weight:"bold",color:"darkGray"},s.full_name),r.a.createElement(p.e,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}}},r.a.createElement(p.V,{size:"sm",color:"darkGray"},s.username,s.explicitly_followed_by_me&&" • "+u.a._("Following","mentions.mentionsFlyout.following","Label to tell the user that they are viewing a user they follow"))))))},h=n("eOdZ"),b=n("vxan"),g=n("hM3f"),f=n("v83y");const y=e=>r.a.createElement(p.V,{inline:!0,color:"blue",weight:"bold"},e.children);t.a=Object(b.a)(({focusOnMount:e,initialMentions:t=[],initialText:n="",instanceId:i,maxSuggestions:s=g.a,makeCancelablePromise:d,onAddMention:u,onBlur:b,onChange:E,onFocus:_,onSearchMentionCancel:v,onSuggestionsPopoverClose:S,onSuggestionsPopoverOpen:w,placeholder:C,readOnly:O,spellCheck:I})=>{const j=Object(a.useRef)(null),[x,k]=Object(a.useState)(!1),[M,T]=Object(a.useState)(!1),[P,B]=Object(a.useState)([]),[{plugins:D,MentionSuggestions:R}]=Object(a.useState)(()=>(()=>{const e=o()({entityMutability:"IMMUTABLE",mentionComponent:y,mentionPrefix:"@",mentionTrigger:"@",positionSuggestions:g.f,supportWhitespace:!1}),{MentionSuggestions:t}=e;return{plugins:[e],MentionSuggestions:t}})()),[A,L]=Object(a.useState)();Object(a.useEffect)(()=>{L(f.EditorState.createWithContent(Object(g.c)({text:n,mentions:t})))},[i]),Object(a.useEffect)(()=>{k(!0)},[]),Object(a.useEffect)(()=>{e&&j.current&&setTimeout(j.current.focus,50)},[x]);const N=Object(a.useCallback)(e=>{B([]),u&&u(e)},[]),U=Object(a.useCallback)(e=>{b&&b(e)},[]),F=Object(a.useCallback)(e=>{const t=e.getCurrentContent(),n=t.getPlainText(""),a=Object(g.e)(t);L(e),E({text:n,mentions:a})},[]),V=Object(a.useCallback)(e=>{_&&_(e)},[]),H=Object(a.useCallback)(()=>{T(!1),S&&S()},[]),z=Object(a.useCallback)(()=>{T(!0),w&&w()},[]),q=Object(a.useCallback)((e,t)=>{if(v&&" "===e&&M&&v(),P.length>0)return"not-handled";const n=t.getCurrentContent(),a=t.getSelection();return F(f.EditorState.push(t,f.Modifier.replaceText(n,a,e),"adjust-depth")),"handled"},[P]),W=Object(a.useCallback)(({value:e})=>{d(h.a.create("UserMentionTypeaheadResource",{query:e,num_people:s}).callGet(),"userMentionTypeahead").then(e=>{const t=Object(g.d)({suggestions:e.resource_response.data});B(t)}).catch(()=>{})},[]);return r.a.createElement(l.a,{name:"EditorWithMentions"},x&&r.a.createElement(p.e,{"data-test-id":"editor-with-mentions",width:"100%"},r.a.createElement(c.a,{editorState:A,onBlur:U,onChange:F,onFocus:V,handleBeforeInput:q,placeholder:C,plugins:D,readOnly:O,ref:j,spellCheck:I,stripPastedStyles:!0}),r.a.createElement(R,{onAddMention:N,onClose:H,onOpen:z,onSearchChange:W,suggestions:P,entryComponent:m})))})},Joxa:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));const a=[0,2,1];function r(e){const{list_blocks:t,key_value_blocks:n}=e,a=t&&t.length>0?t.map(e=>{const{heading:t,blocks:n}=e;return{heading:t,blocks:n.map(e=>({text:e.text,type:9})),type:7}}):[];return{key_value_blocks:n&&n.length>0?n.map(e=>({category_type:e.category_type,type:8,value:e.value})):[],list_blocks:a}}function i(e){const{list_blocks:t,key_value_blocks:n}=e,a=t&&t.length>0?t.map(e=>{const{heading:t,blocks:n}=e;return{heading:t,items:n.map(e=>e.text)}}):[];return{keyValueBlocks:n&&n.length>0?n.reduce((e,t)=>{const{category_type:n,value:a}=t;return e[n]=a,e},{}):{},listBlocks:a}}function o(e){const{keyValueBlocks:t,listBlocks:n}=e;if(!t&&!n)return null;return{list_blocks:n?n.map(e=>{const{heading:t,items:n}=e;let a=[];return n&&(a=n.map(e=>({text:e,type:9}))),{blocks:a,heading:t,type:7}}):[],key_value_blocks:(t?Object.keys(t).map(e=>{const n=t[e],r=Number.parseInt(e,10),i=a.indexOf(r)>-1&&n===Number.parseInt(n,10).toString();return n&&i?{value:n,category_type:r,type:8}:null}):[]).filter(Boolean)}}},LvPn:function(e,t,n){n.d(t,"a",(function(){return o}));var a=n("pody"),r=n("nEAA");const i=({category:e,isDeferred:t,isExternal:n})=>[e].concat(t?["deferred"]:[]).concat(n?["external"]:[]).join("_");function o(e){const{category:t,timing:n,isDeferred:o,isExternal:s,isVisuallyCompleteRequired:c}=e;return n.responseEnd&&("image"!==t||c)?{name:i(e),startTime:n.startTime,endTime:n.responseEnd,annotationMap:Object(a.a)(n),binaryAnnotationMap:{category:Object(r.d)(t),decodedBodySize:Object(r.b)(n.decodedBodySize||0),initiatorType:Object(r.d)(n.initiatorType),isDeferred:Object(r.a)(o),isExternal:Object(r.a)(s),name:Object(r.d)(n.name),nextHopProtocol:Object(r.d)(n.nextHopProtocol),transferSize:Object(r.b)(n.transferSize||0)}}:null}},MhBu:function(e,t,n){function a(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}n.d(t,"a",(function(){return a}))},NXrh:function(e,t,n){n.d(t,"a",(function(){return E}));var a=n("q1tI"),r=n.n(a),i=n("/MKj"),o=n("Sihc"),s=n("Ye/N"),c=n("rrvb"),l=n("ANjH"),d=n("0BOE"),u=n("jdx6"),p=n("qyR9"),m=n("n6mq"),h=n("w70y");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g="NO_SECTION_VALUE";function f({section:e,hovered:t,searchQuery:n}){return r.a.createElement(m.e,null,r.a.createElement(m.e,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},r.a.createElement(m.e,{flex:"grow"},r.a.createElement(m.V,{weight:"bold"},Object(u.b)(n,e.title)))),e.id===g&&r.a.createElement(m.o,null))}class y extends a.Component{constructor(...e){super(...e),b(this,"state",{searchQuery:""}),b(this,"getPickerSections",()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let a=t&&t.data||[];return a=n?a.filter(e=>e.id!==n):[{id:g,title:s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...a],e.length>=p.a&&(a=Object(d.a)(a,e,"title")),[{items:a}]}),b(this,"createBtnDisabled",()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some(e=>e.title.toLowerCase()===t.toLocaleLowerCase())}),b(this,"handleSectionCreate",()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:a,onSectionCreate:r}=this.props,{searchQuery:i}=this.state;r?r(i):a&&e.id&&a(Object(o.a)({boardId:e.id,name:i})).then(e=>{n&&n.refreshData(),this.setState({searchQuery:""}),t(e)})}),b(this,"handleSectionSelected",e=>{const{onSectionChange:t}=this.props;e.id===g?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),b(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),b(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return r.a.createElement(f,{hovered:t,searchQuery:n,section:e})})}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refreshData()}}render(){const{isStoryPin:e,sectionsResource:t,selectedSectionId:n,mergingFromSectionId:a,selectedSectionName:i}=this.props,{searchQuery:o}=this.state;let l=a?s.a._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(n){let e;t&&t.data&&(e=t.data.find(e=>e.id===n)),l=e&&e.title||l}else i&&(l=i);return r.a.createElement(m.e,null,r.a.createElement(m.O,{accessibilityLabel:s.a._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!t&&!t.isLoaded}),(!t||t&&t.isLoaded)&&r.a.createElement(c.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:l,isStoryPin:e,onCreate:a?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:o,sections:this.getPickerSections()}))}}const E=y;t.b=Object(l.compose)(Object(i.connect)(),Object(h.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id}),allowStale:!1}))(E)},NdQN:function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("JW66"),o=n("Ye/N"),s=(n("9QW3"),n("n6mq"));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends a.Component{constructor(...e){super(...e),c(this,"setInputRef",e=>{e&&(this._input=e)}),c(this,"handleKeyDown",e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case i.a.KeyCode.ENTER:case i.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),n.select();break;case i.a.KeyCode.UP:e.preventDefault(),n.prev();break;case i.a.KeyCode.DOWN:e.preventDefault(),n.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){const{onChange:e,value:t}=this.props;return r.a.createElement("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"}},r.a.createElement(s.K,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:o.a._("Search","search bar placeholder text","search bar placeholder text"),ref:this.setInputRef,size:"lg",value:t}))}}t.a=l},NjDU:function(e,t,n){function a(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function r(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function i(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function o(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return c}));const s=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),c=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}})},OBhP:function(e,t,n){var a=n("fmRc"),r=n("gFfm"),i=n("MrPd"),o=n("WwFo"),s=n("Dw+G"),c=n("5Tg0"),l=n("Q1l4"),d=n("VOtZ"),u=n("EEGq"),p=n("qZTm"),m=n("G6z8"),h=n("QqLw"),b=n("yHx3"),g=n("wrZu"),f=n("+iFO"),y=n("Z0cm"),E=n("DSRE"),_=n("zEVN"),v=n("GoyQ"),S=n("1+5i"),w=n("7GkX"),C=n("mTTR"),O="[object Arguments]",I="[object Function]",j="[object Object]",x={};x[O]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object DataView]"]=x["[object Boolean]"]=x["[object Date]"]=x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Map]"]=x["[object Number]"]=x[j]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object Symbol]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x["[object Error]"]=x[I]=x["[object WeakMap]"]=!1,e.exports=function e(t,n,k,M,T,P){var B,D=1&n,R=2&n,A=4&n;if(k&&(B=T?k(t,M,T,P):k(t)),void 0!==B)return B;if(!v(t))return t;var L=y(t);if(L){if(B=b(t),!D)return l(t,B)}else{var N=h(t),U=N==I||"[object GeneratorFunction]"==N;if(E(t))return c(t,D);if(N==j||N==O||U&&!T){if(B=R||U?{}:f(t),!D)return R?u(t,s(B,t)):d(t,o(B,t))}else{if(!x[N])return T?t:{};B=g(t,N,D)}}P||(P=new a);var F=P.get(t);if(F)return F;P.set(t,B),S(t)?t.forEach((function(a){B.add(e(a,n,k,a,t,P))})):_(t)&&t.forEach((function(a,r){B.set(r,e(a,n,k,r,t,P))}));var V=L?void 0:(A?R?m:p:R?C:w)(t);return r(V||t,(function(a,r){V&&(a=t[r=a]),i(B,r,e(a,n,k,r,t,P))})),B}},OSge:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));const a="0.8.0",r=9/16;function i(e,t=1){return{x:e/5,y:e*(t-1)}}const o={HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",MENTION_STICKER:"story_pin_mention_sticker_block"},s={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1},c={...s,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28}},Pqnw:function(e,t,n){function a(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",(function(){return a}))},Q7uW:function(e,t,n){n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("n6mq");function o(e){const{htmlFor:t,errorMessage:n}=e;return r.a.createElement(i.w,{htmlFor:t},r.a.createElement(i.e,{marginTop:1},r.a.createElement(i.V,{color:"red",size:"md"},n)))}},Sihc:function(e,t,n){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var a=n("Pqnw"),r=n("uVIr"),i=n("VqlB"),o=n("eOdZ"),s=n("oN2T"),c=n("KFEb"),l=n("Wer7");function d(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:p=[]}){let m=0;"RECOMMENDATION"===n?m=1:"EDITED_RECOMMENDATION"===n&&(m=2);const h={board_id:e,initial_pins:u&&!u.all?u.pinIds:p,name:t,name_source:m};return t=>o.a.create("BoardSectionResource",h).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(d(e,n)),t(Object(r.a)({feedId:e,feedType:c.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(s.c)(e,"pin_count")),t(Object(l.f)("BoardSectionsRepinResource",{board_id:e}));const{all:o,pinIds:p}=u||{all:!1,pinIds:[]};return o?new Promise((a,r)=>t(Object(i.a)({inverseSelection:!0,selectedPinIds:p,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>a(n)).catch(r)):(p.length>0&&t(Object(a.a)(c.a.BOARD_PINS,e)),n)})}},V711:function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("/MKj"),o=n("8cMa"),s=n("JW66"),c=n("Ye/N"),l=n("rrvb"),d=n("0BOE"),u=n("jdx6"),p=n("Wer7"),m=n("qyR9"),h=n("w70y"),b=n("n6mq"),g=n("ANjH"),f=n("oN2T");function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E({board:e,hovered:t,searchQuery:n}){const a=e.privacy===s.a.BoardPrivacy.SECRET;return r.a.createElement(b.e,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},r.a.createElement(b.e,{flex:"grow"},r.a.createElement(b.V,{weight:"bold"},Object(u.b)(n,e.name))),r.a.createElement(b.e,{direction:"row",display:"flex",flex:"none"},a&&r.a.createElement(o.a,{type:"secret"}),e.is_collaborative&&r.a.createElement(o.a,{type:"group"})))}class _ extends a.Component{constructor(e){super(e),y(this,"getSections",()=>{const{searchQuery:e}=this.state,{boardResource:{data:{all_boards:t}}}=this.props;return e.length>=m.a?[{items:Object(d.a)(t,e)}]:[{items:t}]}),y(this,"createBtnDisabled",()=>{const{boardResource:{data:{all_boards:e}}}=this.props,{searchQuery:t}=this.state;return e.some(e=>e.name.toLowerCase()===t.toLowerCase())}),y(this,"handleBoardCreate",e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:a}=this.props;n(),a?a(e):t({name:e,privacy:"public"}).then(e=>{const{onBoardChosen:t}=this.props;t(e)})}),y(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),y(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),y(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return r.a.createElement(E,{board:e,hovered:t,searchQuery:n})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t,isStoryPin:n,viewer:a}=this.props,{searchQuery:i,selectedBoard:o}=this.state;let s=c.a._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?s=t.name:o&&(s=o.name),r.a.createElement(b.e,null,r.a.createElement(b.O,{accessibilityLabel:c.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&r.a.createElement(l.a,{createBtnDisabled:this.createBtnDisabled(),dropdownValue:s,isStoryPin:n,onCreate:this.handleBoardCreate(a),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:i,sections:this.getSections()}))}}t.a=Object(g.compose)(Object(i.connect)((function(e){const{advertiser:t,viewer:n}=e,a=n.isAuth&&t&&t.owner_user_id!==n.id;return{advertiser_id:a?t.id:null,username:a?t.owner_user_id:null,viewer:n}}),(function(e){return{invalidateBoardPickerBoardsResource:()=>{e(Object(p.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},createBoard:t=>e(Object(f.g)(t))}})),Object(h.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username,...e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{}}),allowStale:!1}))(_)},VOtZ:function(e,t,n){var a=n("juv8"),r=n("MvSz");e.exports=function(e,t){return a(e,r(e),t)}},VqlB:function(e,t,n){n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g}));var a=n("3z7j"),r=n("Pqnw"),i=n("uVIr"),o=n("MhBu"),s=n("eOdZ"),c=n("oN2T"),l=n("KFEb"),d=n("1inl"),u=n("Ye/N");function p(e){d.a.showError(function(e){switch(e.api_error_code){case 2171:case 2172:case 2173:return u.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}const m=e=>Object(r.a)(e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,e.sectionId||e.boardId);function h(e,t){const{source:n,target:r}=e;r.boardId!==n.boardId?(t(Object(c.c)(n.boardId,"pin_count")),t(Object(c.c)(r.boardId,"pin_count"))):n.sectionId&&r.sectionId||t(Object(c.c)(r.boardId,"pin_count")),n.sectionId&&t(Object(a.a)(n.sectionId)),r.sectionId&&t(Object(a.a)(r.sectionId))}function b(e){return t=>{const{selectedPinIds:n,source:a,target:r}=e;t(Object(o.a)({feedId:a.sectionId||a.boardId,feedType:a.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(i.a)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),h(e,t)}}function g(e){return t=>function(e,t){const{inverseSelection:n,selectedPinIds:a,source:r,target:c}=e;if(r.boardId===c.boardId&&(r.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){const e={board_id:r.boardId,new_board_id:c.boardId,old_section_id:r.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:a};return s.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(m(r)),t(m(c))])).catch(p)}{const e=(e,n)=>{t(Object(o.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:a,itemType:"pin"})),t(Object(i.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:a,itemType:"pin"}))};e(r,c);const n=()=>e(c,r);if(c.boardId===r.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:a};return s.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),p(e)})}{const e={section_id:r.sectionId,pins:a};return s.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),p(e)})}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:a};return s.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),p(e)})}}}(e,t).then(()=>h(e,t))}},Wrea:function(e,t,n){n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n("Wer7");const r=(e,t)=>n=>n(Object(a.a)("BoardResource",{board_id:e,field_set_key:t})),i=e=>r(e,"pin_count"),o=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),s=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),c=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),l=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},WwFo:function(e,t,n){var a=n("juv8"),r=n("7GkX");e.exports=function(e,t){return e&&a(t,r(t),e)}},XYm9:function(e,t,n){var a=n("+K+b");e.exports=function(e,t){var n=t?a(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},b2z7:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},c50B:function(e,t,n){n.d(t,"o",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"m",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"n",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"l",(function(){return u})),n.d(t,"q",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return y})),n.d(t,"s",(function(){return E})),n.d(t,"p",(function(){return _})),n.d(t,"k",(function(){return v})),n.d(t,"r",(function(){return S})),n.d(t,"t",(function(){return w}));const a=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach((e,a)=>{const r=t[e];r&&(n[a]=r)}),n.join("")};function r(e){return function(t,n){const a=[];t&&/\S/.test(t)||a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}const i=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function o(e){return function(t,n){const a=[];(t=t&&t.trim())&&!t.match(i)&&a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function s(e){return function(t,n){const a=[];(t=t&&t.trim())&&!t.match(/^[^0-9].*$/)&&a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function c(e){return function(t,n){const r=a(t.trim()),i=[];r&&""!==r&&r.length<2&&i.push(e.ageTooShortString);const o=Math.floor(parseInt(r,10));""===r||/^\d+$/.test(r)&&o>0&&o<300||i.push(e.invalidAgeString);const s={errors:i,warnings:[]};return n&&n(s),s}}function l(e){return function(t,n){const a=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),r=[],i=!1!==e.checkLength&&a.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!i||r.push(e.message);const o={errors:r,warnings:[]};return n&&n(o),o}}function d(e){return function(t,n){const r=/^\d+$/,i=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=a(t))&&!t.match(r)&&i.push(e.message));const o={errors:i,warnings:[]};return n&&n(o),o}}function u(e){return function(t,n){const r=/^[\d\ -]+$/,i=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=a(t))&&!t.match(r)&&i.push(e.message));const o={errors:i,warnings:[]};return n&&n(o),o}}function p(e){return function(t,n){const a=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function m(e){return function(t,n){const a=[];(e.should_trim||!1)&&(t=t&&t.trim());const r=t.length;e.min&&r<e.min?a.push(e.minErrorString):e.max&&r>e.max&&a.push(e.maxErrorString);const i={errors:a,warnings:[]};return n&&n(i),i}}function h(e){return function(t,n){const a=[];t!==(e&&e.targetValue)&&a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function b(e){return function(t,n){t&&(t=parseFloat(t));const a=[];t<=e.value&&a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function g(e){return function(t,n){t&&(t=parseFloat(t));const a=[];t<e.value&&a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function f(e){return function(t,n){const a=[];/^[\040-\176]*$/.test(t)||a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function y(e){return function(t,n){const a=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,r=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(a)&&(t=t&&t.trim(),r.push(e.message));const i={errors:r,warnings:[]};return n&&n(i),i}}function E(e){return function(t,n){t=t&&t.trim();const a=[],r=new Date(t);t&&!r.getTime()&&a.push(e.message);const i={errors:a,warnings:[]};return n&&n(i),i}}function _(e){return function(t,n){const a=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function v(e){return function(t,n){const a=[];e.pattern.test(t)||a.push(e.message);const r={errors:a,warnings:[]};return n&&n(r),r}}function S(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}function w(e,t){let n="";return t.some(t=>{const a=t(e);return a.errors.length>0&&(n=a.errors[0],!0)}),n}},dtqy:function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("/MKj"),o=n("5S2N"),s=n("Sp3T"),c=n("ANjH"),l=n("U4JR");t.a=Object(c.compose)(Object(i.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:a}=e&&t&&e[t]||{},{index:r}=a||{};return void 0!==n?{carouselSlotCurrentIndex:r||n||0}:{}}),(function(e){return function(t){const[n,i]=Object(a.useState)(!1),c=Object(s.a)(),{pinId:d,onDelete:u,onSubmit:p,carouselSlotCurrentIndex:m}=t;return r.a.createElement(a.Fragment,null,r.a.createElement(e,Object.assign({},t,{handlePinEditButtonClick:e=>c(()=>{e&&e.stopPropagation();const{component:n,onToggleModal:a}=t;a&&a(!0),Object(l.b)(101,{element:3,...n?{component:n}:{}}),i(!0)})})),n&&r.a.createElement(o.a,{carouselSlotCurrentIndex:m,onDelete:u,onHide:()=>{i(!1),t.onToggleModal&&t.onToggleModal(!1)},onSubmit:p,pinId:d}))}}))},eIuQ:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c}));var a=n("Ye/N");function r(e){return e?a.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):a.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function i(e){return e?a.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):a.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function o(e){return a.a._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function s(e){return e?a.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):a.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin")}function c(e){return e?a.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):a.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}},fZG9:function(e,t,n){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return y}));var a=n("bNC6"),r=n("HMdf"),i=n("+lzj"),o=n("SyXB"),s=n("nEAA");const c=(e,t)=>(e||[]).reduce((e,n)=>({...e,["experiment."+n]:Object(s.d)(t(n))}),{}),l=(e,t)=>"number"==typeof t?e(t):null,d=e=>e.reduce((e,t)=>e+t,0),u=(e,t)=>Object.keys(t).reduce((n,a)=>({...n,[`${e}${a}`]:t[a]}),{}),p=e=>{if(!e.length)return{};const t=e.map(({startTime:e,requestStart:t,responseStart:n,responseEnd:a})=>{const r=t||e;return{startTime:e,requestStart:r,responseStart:n||r,responseEnd:a}}),n=d(t.map(e=>e.requestStart-e.startTime)),a=d(t.map(e=>e.responseStart-e.requestStart)),r=d(t.map(e=>e.responseEnd-e.responseStart)),i=n+a+r,o=d(e.map(e=>e.decodedBodySize||0));return{decodedBodySize:Object(s.b)((c=o,Number(Number(c/1024).toFixed(3)))),"duration.all":Object(s.b)(i),"duration.requestStartToResponseStart":Object(s.b)(a),"duration.responseStartToResponseEnd":Object(s.b)(r),"duration.startToRequestStart":Object(s.b)(n)};var c},m=e=>{const t=e.filter(e=>!!e.responseEnd);return{...e.length?{...p(t),"count.completed":Object(s.b)(t.length)}:{},"count.all":Object(s.b)(e.length)}},h=e=>{const t=e.reduce((e,t)=>(e[t.category]=(e[t.category]||[]).concat([t]),e),{}),n={script:t.script,script_deferred:e.filter(e=>e.isDeferred),external:e.filter(e=>e.isExternal),css:t.css,image:t.image,video:t.video,xmlhttprequest:t.xmlhttprequest,visually_complete:e.filter(e=>e.isVisuallyCompleteRequired)};return Object.keys(n).reduce((e,t)=>({...e,...u(`resource.${t}.`,m((n[t]||[]).map(e=>e.timing)))}),{})},b=(e,t)=>{const{devicePixelRatio:n,navigator:r,innerWidth:i,innerHeight:o}=window,{deviceMemory:c,hardwareConcurrency:l,platform:d,userAgent:u}=r,{appType:p,appVersion:m,browserName:h,browserVersion:b,deviceType:g,isBot:f,isSocialBot:y,locale:E,osName:_,stageName:v}=t,S="desktop"===g?p||5:p||6,w="surface"===e.type&&"initial_app_load"===e.navigationType?1:4;return{"app.type":Object(s.c)(S),"app.version":Object(s.d)(m),"browser.name":Object(s.d)(h),"browser.version":Object(s.d)(b),"cpu.speed":Object(s.c)(l),"device.memory":Object(s.c)(c),"device.type":Object(s.c)(0),"device.typeName":Object(s.d)(g),"device.version":Object(s.d)("unknown"),"pwt.cause":Object(s.c)(w),"pwt.result":Object(s.c)(1),"view.type":Object(s.b)(0),"viewport.height":Object(s.b)(o||0),"viewport.width":Object(s.b)(i||0),devicePixelRatio:Object(s.b)(n||0),isBot:Object(s.a)(f),isSocialBot:Object(s.a)(y),locale:Object(s.d)(E),osName:Object(s.d)(_),platform:Object(s.d)(d||null),profilerVersion:Object(s.d)("3"),pwtActionName:Object(s.c)(Object(a.a)(e)),stageName:Object(s.d)(v),userAgent:Object(s.d)(u)}},g=({metricId:e,pwtStaticContext:t,binaryAnnotations:n={},performanceResourceTimings:a=[]})=>{let i={};{const{connection:e,hardwareConcurrency:t,deviceMemory:n}=window.navigator;i={"net.effectiveType":Object(s.d)((null==e?void 0:e.effectiveType)||null),"net.rtt":Object(s.b)(l(e=>10*Math.round(e/10),null==e?void 0:e.rtt)),"net.speed":Object(s.b)(Object(r.b)(a,!1)),"cpu.threads":Object(s.c)(t),"memory.size":Object(s.b)(n)}}return{...b(e,t),...n,...i}},f=(e,t,n,a)=>{var c;const{navigator:u}=window,{connection:p,serviceWorker:m}=u,{surface:h,navigationType:b,isAuthenticated:g}=e,{cumulativeLayoutShiftScore:f,longTaskDurations:y}=Object(i.b)();return{...y.length?{"longTask.count":Object(s.b)(y.length),"longTask.maxDuration":Object(s.b)(Math.max(...y)),"longTask.totalDuration":Object(s.b)(d(y))}:{},cumulativeLayoutShiftScore:Object(s.b)(100*f),"masonry.paginationMarkCount":Object(s.b)(Object(o.e)(o.a,t)),"metricId.isAuthenticated":Object(s.a)(g),"metricId.navigationType":Object(s.d)(b),"metricId.surface":Object(s.d)(h),"net.effectiveType":Object(s.d)((null==p?void 0:p.effectiveType)||null),"net.rtt":Object(s.b)(l(e=>10*Math.round(e/10),null==p?void 0:p.rtt)),"net.speed":Object(s.b)(Object(r.b)(n)),entryChunkAfterDoc:Object(s.a)(a),resourceBufferClearedCount:Object(s.c)(Object(o.e)("resourceBufferCleared",t)),scrollDuringLayout:Object(s.a)(Object(o.f)("scrollDuringLayout",t)),serviceWorker:Object(s.a)(m?!!m.controller:null),serviceWorkerState:Object(s.d)((null==m||null===(c=m.controller)||void 0===c?void 0:c.state)||null)}},y=({annotateExperiments:e,binaryAnnotations:t={},entries:n,entryChunkAfterDoc:a,metricId:r,performanceResources:i,pwtEndTime:o,pwtStaticContext:s})=>({...t,...h(i),...c(e,s.getExperimentGroup),...b(r,s),...f(r,o,n,a)})},gONw:function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("n6mq");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends a.Component{constructor(...e){super(...e),o(this,"state",{isHovering:!1}),o(this,"onHover",()=>{this.setState({isHovering:!0})}),o(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:n,inFlyoutExp:a}=this.props;return a?r.a.createElement(i.e,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover},r.a.createElement(i.e,null,r.a.createElement(i.A,{height:40,width:40,rounding:2},this.state.isHovering&&n?r.a.createElement(i.v,{alt:"",color:"",fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url}):r.a.createElement(i.e,{color:"lightGray",height:40,width:40}))),r.a.createElement(i.e,{padding:2},r.a.createElement(i.s,{size:"sm"},e))):r.a.createElement(i.e,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2},r.a.createElement(i.e,null,r.a.createElement(i.t,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})),r.a.createElement(i.e,{marginStart:3},r.a.createElement(i.V,{color:t?"darkGray":"gray",weight:"bold"},e)))}}var c=n("Ye/N"),l=n("w70y"),d=n("U4JR"),u=n("seP0");t.a=({inBoardToCollectionsExp:e,inFlyoutExp:t,inFirstBoardCreateGestaltExp:n,pinId:o,image:p,minHeight:m,onBoardSelected:h})=>{const[b,g]=Object(a.useState)(-1),f=Object(u.c)(),{data:y=[],error:E,isLoaded:_}=Object(l.a)({name:"BoardTitleSuggestionsResource",options:{pin_id:o}}),v=(S=y,Object(a.useMemo)(()=>S&&S.length?S.map(e=>e.title):[],[S]));var S;Object(a.useEffect)(()=>{_&&n&&f&&(E?f.error():f.stop())},[_]);const w=()=>{g(-1)},C=(e,n)=>{const a=b===n;return r.a.createElement("li",{key:n},r.a.createElement(i.U,{onMouseEnter:()=>(e=>{g(e)})(n),onMouseLeave:w,onTap:()=>(e=>{h(v[e],!1),Object(d.b)(101,{component:13025,element:23})})(n)},r.a.createElement(s,{selected:a,name:e,inFlyoutExp:t,image:p})))};return _?v&&v.length?t?r.a.createElement("div",null,r.a.createElement("ul",null,v.map(C))):n?r.a.createElement(i.e,null,r.a.createElement(i.e,{marginTop:5,marginStart:6,marginBottom:3},r.a.createElement(i.V,null,e?c.a._("Suggested collection names","collectionSuggestionList.title","text above suggested collection names list"):c.a._("Suggested board names","text above suggested board names list","text above suggested board names list"))),r.a.createElement("ul",null,v.map(C))):r.a.createElement(i.e,null,r.a.createElement(i.e,{marginTop:2,paddingX:5},r.a.createElement(i.V,null,c.a._("Suggested board names"))),r.a.createElement("ul",null,v.map(C))):null:r.a.createElement(i.e,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:m||""},r.a.createElement(i.O,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0}))}},gdcG:function(e,t,n){n.d(t,"a",(function(){return o}));var a=n("q1tI"),r=n.n(a),i=n("2WXK");function o(e){return function(t){const{isHovering:n,hoverHandlers:a}=Object(i.a)();return r.a.createElement(e,Object.assign({},t,{hoverHandlers:a,isHovering:n}))}}},guDk:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n("Ye/N");const r=()=>a.a._("We can’t complete this action because you’re in ‘read-only’ mode. Switch to ‘edit mode’ to make changes.","adminMode.writeOnlyAction.errorMessage","A toast message indicating that the user is trying to perform a write action in read-only mode."),i=[25],o=e=>!!e&&("string"==typeof e?e===r():!!e.code&&i.includes(e.code)),s=e=>e&&i.includes(e.code)?r():null},hM3f:function(e,t,n){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return m}));var a=n("aAE7"),r=n.n(a),i=n("n6mq"),o=n("v83y"),s=n("TgLd");const c=5,l=5,d=({text:e,mentions:t})=>{const n=[],a={},r=[];t&&t.forEach((e,t)=>{const{length:n,offset:i,object_id:o}=e;a[t]={data:{mention:{id:o}},mutability:"IMMUTABLE",type:"mention"},r.push({key:t,length:n,offset:i})}),n.push({text:e,key:null,depth:null,inlineStyleRanges:null,type:"unstyled",entityRanges:r});return Object(o.convertFromRaw)({entityMap:a,blocks:n})},u=e=>{const t=[];let n=0;return e.getBlocksAsArray().forEach((a,r)=>{let i=null;a.findEntityRanges(t=>{const n=t.getEntity();if(!n)return!1;const a=e.getEntity(n);return"mention"===a.getType()&&(i=a.data.mention,!0)},(e,a)=>{i&&t.push({object_id:i.id,offset:n+e,length:a-e,tag_type:1})}),n+=1+a.getLength()}),t},p=({suggestions:e})=>e.map(e=>({...e,name:e.username})),m=({decoratorRect:e,popover:t,state:n,props:a,...o})=>{const c=(e.x||e.left)+t.offsetWidth,l=(e.y||e.top)+t.offsetHeight,{top:d,left:u}=r()({decoratorRect:e,popover:t,state:n,props:a});let p=null;c>window.innerWidth&&(p=parseFloat(u)-c%window.innerWidth+"px");let m="",h=parseFloat(d)+5+"px";return l>window.innerHeight&&(m="translateY(-100%)",h=parseFloat(d)-20+"px"),{display:"block",top:h,left:p||u,zIndex:new i.m([s.a]).index(),transform:m}}},jdx6:function(e,t,n){n.d(t,"b",(function(){return l}));var a=n("q1tI"),r=n.n(a),i=n("8cMa"),o=n("JW66"),s=n("Ye/N"),c=n("n6mq");function l(e,t){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,a,i)=>{if(n.length>0&&e&&e.length){const o=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(r.a.createElement("em",{key:i,style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"}},t.substring(o,o+e.length)),a)}return[a]},[]):t}t.a=function(e){const{disabled:t,item:n,isSection:a,isSelectMode:d,isWithinSectionPicker:u,saveState:p,searchQuery:m,selected:h}=e,b=a?null:n,g=a?n:null,f=g&&g.title||b&&b.name||"";let y="",E=!1,_="",v=0;b&&({image_cover_url:y,is_collaborative:E,privacy:_,section_count:v=0}=b);const S=l(m,f),w=_===o.a.BoardPrivacy.SECRET,C=!t&&(h||!!p),O=!u&&v>0,I=v>0?"boardWithSection":"boardWithoutSection",j=d?s.a._("Select","Board select button label","Board select button label"):s.a._("Save","Pin save button label","Pin save button label");return r.a.createElement(c.e,{alignItems:"center",color:C?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":I},b?r.a.createElement(c.e,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none"},y?r.a.createElement(c.v,{src:y,alt:f,fit:"cover",naturalWidth:1,naturalHeight:1}):r.a.createElement("span",null)):r.a.createElement(c.e,{height:36,paddingX:2}),r.a.createElement(c.e,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow"},r.a.createElement(c.V,{color:t?"gray":"darkGray",size:"md",truncate:!0,weight:"bold"},S),(O||!C)&&r.a.createElement(c.e,{alignItems:"center",display:"flex"},w&&r.a.createElement(i.a,{type:"secret"}),E&&r.a.createElement(i.a,{type:"group"}),O&&r.a.createElement(i.a,{type:"sections"})),!O&&C&&!p&&r.a.createElement(c.e,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4},!d&&r.a.createElement(c.e,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},r.a.createElement(c.t,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})),r.a.createElement(c.V,{color:"white",overflow:"normal",size:"md",weight:"bold"},j)),!O&&C&&"loading"===p&&r.a.createElement(c.e,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35},r.a.createElement(c.O,{accessibilityLabel:s.a._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0}))))}},"kT2/":function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("JW66"),o=n("Ye/N"),s=n("n6mq");const c=e=>{const t=e.split("\n");t.push("");const n=[];let a,r=[];return t.forEach(e=>{const t=e.indexOf("•");t>-1?(a||(a=""),r.push(e.substring(t+1).trim())):((a||r.length>0)&&n.push({heading:a,items:r}),a=e,r=[])}),n},l=e=>{let t="";return e.forEach((n,a)=>{const{heading:r,items:i}=n;r&&(t+=r),i&&i.length>0&&(t+="\n• "+i.join("\n• ")),a<e.length-1&&(t+="\n\n")}),t};t.a=function({header:e,helperText:t,listBlocks:n,onUpdate:d,placeholderListBlocks:u}){const p=l(u||[{heading:o.a._("What you'll need","storyboard.detailsList.placeholder","Placeholder text header for details list of story Pin"),items:[o.a._("Write a bullet list of tools, materials and anything else!","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin"),o.a._("Type it up or copy and paste.","storyboard.detailsList.placeholder","Placeholder text instructions for details list of story Pin")]}]),[m,h]=Object(a.useState)(n?l(n):"");return r.a.createElement(s.e,null,r.a.createElement(s.W,{id:"storyboard-details-list",helperText:t,label:e,onChange:({value:e})=>{h(e),d(c(e))},onBlur:()=>{""===m.trim()&&h("")},onKeyDown:({event:e,value:t})=>{const{keyCode:n,target:a,shiftKey:r}=e;if(a instanceof HTMLTextAreaElement){const{selectionStart:o,selectionEnd:s}=a;if(o===s){let s=0,l=0,u="";if(n===i.a.KeyCode.ENTER?"\n• "!==t.substring(o-3,o)||"\n"!==t.substring(o,o+1)&&o!==t.length?r||"\n"===t.substring(o-1,o)||(s=0,u="\n• "):(s=-3,u="\n"):n!==i.a.KeyCode.BACKSPACE&&n!==i.a.KeyCode.DELETE||("\n• "===t.substring(o-3,o)?s=-3:"\n•"===t.substring(o-2,o)?s=-2:"\n"===t.substring(o-1,o)&&"•"===t.substring(o,o+1)&&(s=-1,l=1)),0!==s||0!==l||""!==u){const n=t.substring(0,o+s)+u+t.substring(o+l);h(n);const r=o+s+u.length;setTimeout(()=>{a.selectionStart=r,a.selectionEnd=r},10),d(c(n)),e.preventDefault()}}}},placeholder:p,rows:7,value:m}))}},mEMi:function(e,t,n){n.d(t,"a",(function(){return c}));var a=n("q1tI"),r=n.n(a),i=n("DzJC"),o=n.n(i);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends r.a.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",e=>{this.containerRef=e}),s(this,"fetchMoreIfNecessary",o()(()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:n},a)=>e+t+(a?a(t):2*t)>n)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},mRg4:function(e,t,n){n.d(t,"a",(function(){return y}));let a=null;var r=(e,t)=>(a=a||{results:[],context:t},a.results.push(e),a),i=n("FZ8N"),o=n("LrH5"),s=n("bNC6"),c=n("3/Bf"),l=n("o9su"),d=n("FylZ");const u=(e,t)=>Object.keys(e).reduce((n,a)=>{const r=e[a];return r&&(n[a]={timestamp:t+r}),n},{}),p=({span:e,id:t,parentId:n,timeOrigin:a})=>{return{id:t,parent_id:n,result:1,name:e.name,timestamp:a+e.startTime,duration:e.endTime-e.startTime,annotations:u(e.annotationMap,a),binary_annotations:(r=e.binaryAnnotationMap,Object.keys(r).reduce((e,t)=>{const n=r[t];if(!n)return e;const{value:a,type:i}=n;return null==a?e:e.concat({name:t,value:a,annotation_type:i})},[]))};var r},m=(e,{startTime:t,endTime:n,annotationMap:a,binaryAnnotationMap:r})=>({name:"pwt/"+e,startTime:t,endTime:n,annotationMap:a,binaryAnnotationMap:r}),h=({annotations:e})=>e.reduce((e,{key:t,timestamp:n})=>({...e,["server_"+t]:{timestamp:n}}),{}),b=(e,t)=>({...e,annotations:{...h(t),...e.annotations},binary_annotations:[...t.binary_annotations,...e.binary_annotations]}),g=({traceId:e,actionName:t,result:n,timeOrigin:a,serverDataToJoin:r})=>{const i=(null==r?void 0:r.client_span_id)||Object(d.a)();let o=p({span:m(t,n),id:i,parentId:null,timeOrigin:a}),s=null;return r&&(o=b(o,r),s=((e,t,n)=>{const a=Object(l.a)();return(null==a?void 0:a.responseEnd)?b(p({span:{name:"html",startTime:0,endTime:(null==a?void 0:a.responseEnd)||1,annotationMap:{},binaryAnnotationMap:{}},id:e.server_span_id||Object(d.a)(),parentId:t,timeOrigin:n}),e):null})(r,i,a)),{trace_id:e,spans:[o,...s?[s]:[],...n.spans.map(e=>p({span:e,id:Object(d.a)(),parentId:i,timeOrigin:a}))]}},f=Object(o.a)("reportResult");function y({metricId:e,pwtStaticContext:t,result:n}){const{ajax:a,serverData:o}=t,l=Object(s.b)(e),d=`${n.type}.${l}`;if(Object(c.c)(n.reason?d.concat("."+n.reason):d),"COMPLETE"!==n.type)return void f("Abort metric "+l,n);const u=(null===(p=window.performance)||void 0===p?void 0:p.now)?Date.now()-window.performance.now():"unknown";var p,m;if("unknown"===u)return f(`Unable to convert to absolute times for ${l} due to missing time origin`),void Object(c.c)("missingTimeOrigin."+l);if(i.c&&(window.PWT_LAB_DATA=r(n,t)),!i.c){const r="surface"===e.type&&"initial_app_load"===e.navigationType,s=n.traceId,c=g({traceId:s,actionName:l,result:n,timeOrigin:u,serverDataToJoin:r&&o||null});a({type:"POST",url:"/_/_/trace/trace/",data:{report_data:JSON.stringify(c),report_context:JSON.stringify((m=t,{debugTrace:i.a,locale:m.locale,stageName:m.stageName,userId:m.isAuthenticated?m.userId:null}))}}),f(`PinTrace ${l} will be available shortly: https://pintrace.pinadmin.com/zipkin/traces/${s}`,{duration:n.endTime-n.startTime,result:n,pwtStaticContext:t})}}},mvLR:function(e,t,n){function a(e){let t=!1;return{promise:new Promise((n,a)=>{e.then(e=>t?a({isCanceled:!0}):n(e),e=>a(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}n.d(t,"a",(function(){return a}))},nEAA:function(e,t,n){n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s}));const a=e=>"number"==typeof e?Math.round(e):e,r=e=>({type:"I16",value:a(e)}),i=e=>({type:"I32",value:a(e)}),o=e=>({type:"STRING",value:e}),s=e=>({type:"BOOL",value:e})},o9su:function(e,t,n){var a=n("XtwW");t.a=()=>{const[e]=a.a?a.a.getEntriesByType("navigation"):[];return e}},"oCl/":function(e,t,n){var a=n("CH3K"),r=n("LcsW"),i=n("MvSz"),o=n("0ycA"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)a(t,i(e)),e=r(e);return t}:o;e.exports=s},oN2T:function(e,t,n){n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return b})),n.d(t,"i",(function(){return g})),n.d(t,"g",(function(){return f})),n.d(t,"e",(function(){return y})),n.d(t,"m",(function(){return E})),n.d(t,"h",(function(){return v})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return w})),n.d(t,"l",(function(){return C})),n.d(t,"j",(function(){return O})),n.d(t,"k",(function(){return I})),n.d(t,"f",(function(){return j}));var a=n("4dcN"),r=n("Pqnw"),i=n("7w6Q"),o=n("eOdZ"),s=n("KFEb"),c=n("5FNA"),l=n("NjDU"),d=n("Wer7");const u="board_create",p="board_delete",m="board_edit";function h(e,t){return Object(d.a)("BoardResource",{board_id:e,field_set_key:t})}function b(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}function g(){return(e,t)=>{const{viewer:n}=t();n.isAuth&&Object(c.b)(n.username).forEach(t=>{e(t)})}}function f(e,t){const n={...e};return r=>(r({type:"BOARD_CREATE",payload:{board:e}}),o.a.create("BoardResource",n).callCreate().then(e=>{a.a.trackEvent(u,"success");const i=e.resource_response.data;return i&&(r(g()),(null==t?void 0:t.isFBC)||r(b(n,i))),i}).catch(e=>{throw a.a.trackEvent(u,"error"),e}))}function y(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function E(e){return t=>{const n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},r={board_id:e.id,name:e.name,description:e.description,category:e.category,event_date:e.event_date,event_start_date:e.event_start_date,collaborator_permissions_setting:e.collaborator_permissions_setting,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...n};return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:r}}),o.a.create("BoardResource",r).callUpdate().then(n=>{a.a.trackEvent(m,"success");const i=n&&n.resource_response&&n.resource_response.data||e;t(y(r,i))}).catch(e=>{throw a.a.trackEvent(m,"error"),e})}}function _(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function v(e){return(t,n)=>{const r=n().boards.content[e],{pin_count:i}=r,{id:s}=r.owner;return t({type:"BOARD_DELETE",payload:{boardId:e}}),o.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{a.a.trackEvent(p,"error"),t(_(e)),t(Object(l.b)({userId:s,increment:-i}))}).catch(e=>{throw a.a.trackEvent(p,"error"),e})}}function S(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function w(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),o.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function C(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),o.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function O(e,t){return n=>o.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([n(_(e)),n(h(t,"pin_count")),n(Object(r.a)(s.a.BOARD_SECTIONS,t))]))}function I(e,t){return n=>o.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response){return n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}const a=e.resource_response.data||{},r=(a.model||{}).custom_properties||{},{campaign_id:o="unknown"}=r,s=a.display_data||{},c={isSocialSeasonalBoard:!!a.display_data,socialHeaderBgImage:s.header_image,socialHeaderBgColor:s.header_background_color,textIconColor:s.text_icon_color};return i.a.increment(`web.seasonal_board.${o}.${t}.land`),n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:c})})}function j(){return e=>e({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}},"otv/":function(e,t,n){var a=n("nmnc"),r=a?a.prototype:void 0,i=r?r.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},pody:function(e,t,n){t.a=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0})},qyR9:function(e,t,n){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return y}));var a=n("q1tI"),r=n.n(a),i=n("jdx6"),o=n("gONw"),s=n("Ye/N"),c=n("gdcG"),l=n("n6mq");var d=Object(c.a)((function(e){const{buttonLabel:t,isHovering:n,isRowItem:a,hasHoverState:i,hoverHandlers:o,name:c,onClick:d}=e,u=c||t||s.a._("Create board");return r.a.createElement(l.U,{onMouseEnter:o.onMouseOver,onMouseLeave:o.onMouseLeave,onTap:d},r.a.createElement(l.e,{alignItems:"center",color:i&&n?"lightGray":"white",display:"flex",flex:a?"shrink":"none",height:64,width:"100%"},r.a.createElement(l.e,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton"},r.a.createElement(l.t,{accessibilityLabel:s.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})),c?r.a.createElement(l.e,{margin:1},r.a.createElement(l.V,{inline:!0,overflow:"normal"}," ",s.a._("Create: ")," ")):null,r.a.createElement(l.V,{align:"center",inline:!0,truncate:!0,weight:"bold"}," ",u," ")))})),u=n("9QW3"),p=n("NdQN"),m=n("IBrh"),h=n("seP0");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=2;class f extends a.Component{constructor(...e){super(...e),b(this,"state",{searchQuery:""}),b(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})}),b(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),b(this,"renderSectionHeader",(e,t)=>e.title?r.a.createElement(l.e,null,t>0&&r.a.createElement(l.o,null),r.a.createElement(l.e,{paddingX:3,paddingY:1},r.a.createElement(l.V,{size:"md"},e.title))):null),b(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:a,isSelectMode:o,disabledRowId:s}=this.props,{searchQuery:c}=this.state,{inSectionSelection:l=!1}=n,d=a&&a.board===e.id?a&&a.state:null,u="board_section"===e.type;return r.a.createElement(i.a,{isSelectMode:o,disabled:e.id===s&&l,item:e,isSection:u,isWithinSectionPicker:l,saveState:d,searchQuery:c,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:a,isLoaded:i,onCreate:c,pinId:h}=this.props;if(i){const{searchQuery:i}=this.state,s=a(i);return this.indexManager=new u.a(s.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),r.a.createElement(l.e,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}}},!n&&r.a.createElement(l.e,null,r.a.createElement(l.e,{paddingX:3,marginBottom:4,marginTop:1},r.a.createElement(p.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:i})),r.a.createElement(l.o,null)),r.a.createElement(m.a,{disabled:!!e,grow:!n&&!i,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:s}),r.a.createElement(l.o,null),c&&r.a.createElement(d,{buttonLabel:t,hasHoverState:!0,name:i,onClick:()=>c(i)}),n&&c&&h&&r.a.createElement(o.a,{onBoardSelected:c,pinId:h}))}return r.a.createElement(l.e,{paddingY:5},r.a.createElement(l.O,{accessibilityLabel:s.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0}))}}function y(e){const t=Object(h.c)();return r.a.createElement(f,Object.assign({},e,{boardPickerStopwatch:t}))}},rrvb:function(e,t,n){var a=n("q1tI"),r=n.n(a),i=n("Ye/N"),o=n("9QW3"),s=n("NdQN"),c=n("IBrh"),l=n("gdcG"),d=n("n6mq");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r.a.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"setContainerRef",e=>{this.containerRef=e}),u(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),u(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()}),u(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),u(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),u(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:a},isHovering:l,isStoryPin:u,onCreate:p,onSearchQueryUpdate:m,renderRow:h,searchQuery:b,sections:g,createBtnDisabled:f}=this.props,{showFlyout:y}=this.state;this.indexManager=new o.a(g.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const E=!b.trim()||!!f;return r.a.createElement("div",{ref:this.setContainerRef,style:{...u?{flex:"grow"}:{}}},r.a.createElement(d.U,{fullWidth:!!u,onMouseEnter:n,onMouseLeave:a,onTap:this.handleDropdownTouch,rounding:2},r.a.createElement(d.e,{alignItems:"center",color:l?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:u?4:3,rounding:u?4:2},r.a.createElement(d.e,{display:"flex",flex:"grow"},r.a.createElement(d.V,{weight:"bold"},e)),r.a.createElement(d.t,{accessibilityLabel:"",color:"darkGray",icon:"arrow-down",size:14}))),y&&r.a.createElement(d.e,{position:"relative"},r.a.createElement(d.e,{borderStyle:"sm",color:"white",dangerouslySetInlineStyle:{__style:{zIndex:1}},direction:"column",display:"flex",overflow:"hidden",position:"absolute",rounding:u?4:2,width:"100%"},r.a.createElement(d.e,null,r.a.createElement(d.e,{display:"flex",marginStart:-1,marginEnd:-1,padding:2},r.a.createElement(d.e,{display:"flex",flex:"grow",paddingX:1},r.a.createElement(s.a,{hideIcon:!0,indexManager:this.indexManager,onChange:m,value:b})),p&&r.a.createElement(d.e,{paddingX:1},r.a.createElement(d.f,{disabled:E,inline:!0,onClick:this.handleCreate,text:i.a._("Create","board or section dropdown create button","board or section dropdown create button")})))),r.a.createElement(c.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:h,sections:g}))))}}t.a=Object(l.a)(p)},"sH+O":function(e,t,n){n.d(t,"a",(function(){return a}));const a=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e.match(n)||!t.match(n))return null;const a=e.split("."),r=t.split("."),i=Math.max(a.length,r.length);for(let o=0;o<i;o+=1){const e=o<a.length?parseInt(a[o],10):0,t=o<r.length?parseInt(r[o],10):0;if(e<t)return-1;if(e>t)return 1}return 0}},seP0:function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));var a=n("FZ8N"),r=n("F4HH");const{Provider:i,useHook:o}=Object(r.a)({name:"board_picker",v2LoggerMetricName:16,sampleRate:a.b?1:.1}),s=(e,t)=>{let n="unknown";(null==t?void 0:t.includes("pin/"))?n="PinCloseup":"/"===t?n="HomeFeed":"PinBookMarklet"===t&&(n="PinBookmarklet"),null==e||e.addBinaryAnnotation("source",n,"STRING")},c=i,l=o},vxan:function(e,t,n){n.d(t,"a",(function(){return s}));var a=n("q1tI"),r=n.n(a),i=n("mvLR");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t,n;return n=t=class extends r.a.Component{constructor(...e){super(...e),o(this,"makeCancelablePromise",(e,t)=>{if(t){const e=this.cancelCallbackMap[t];e&&(e(),delete this.cancelCallbackMap[t])}const{cancel:n,promise:a}=Object(i.a)(e);return t?this.cancelCallbackMap[t]=n:this.cancelCallbacks.push(n),a}),o(this,"cancelCallbacks",[]),o(this,"cancelCallbackMap",{})}componentWillUnmount(){[...Object.keys(this.cancelCallbackMap).map(e=>this.cancelCallbackMap[e]),...this.cancelCallbacks].forEach(e=>e()),this.cancelCallbacks=[],this.cancelCallbackMap={}}render(){return r.a.createElement(e,Object.assign({},this.props,{makeCancelablePromise:this.makeCancelablePromise}))}},o(t,"displayName",`WithPromiseCancellation(${e.displayName||e.name||"Component"})`),n}},"w/wX":function(e,t,n){var a=n("QqLw"),r=n("ExA7");e.exports=function(e){return r(e)&&"[object Set]"==a(e)}},wrZu:function(e,t,n){var a=n("+K+b"),r=n("XYm9"),i=n("b2z7"),o=n("otv/"),s=n("yP5f");e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return a(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return r(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return i(e);case"[object Set]":return new c;case"[object Symbol]":return o(e)}}},xOLo:function(e,t,n){n.r(t),n.d(t,"CarouselSliders",(function(){return b}));var a=n("q1tI"),r=n.n(a),i=n("/MKj"),o=n("XSD5"),s=n("ZbwW"),c=n("Ye/N"),l=n("0nTG"),d=n("U4JR"),u=n("n6mq");const p={slider:{cursor:"pointer",height:"100%",position:"relative",width:"10%",zIndex:"105",pointerEvents:"auto"}},m=(e,t,n,a,r,i,o,s,c,u)=>{if(!u||!r){const{carousel_slots:u,id:p}=r;Object(d.b)(108,{...c,objectId:t,component:s,view:o,viewParameter:i,eventData:{pinCarouselSlotEventData:{carouselSlotId:u[n]&&Number(u[n].id),carouselDataId:Number(p),carouselSlotIndex:n,toCarouselSlotIndex:a}},...Object(l.f)(e)||{}})}},h=(e,t,n,a,r,i)=>{i||void 0===a||(e.preventDefault(),e.stopPropagation(),a(t,n)),void 0!==r&&r(n)},b=({carouselIndex:e,carouselData:t,changeCarouselSlotIndex:n,handleCarouselSwipe:a,pin:i,pinId:o,contextLogData:s,viewParameter:l,viewType:d,componentType:b,isEditMode:g})=>{if(!t)return null;const{carousel_slots:f,index:y}=t,E=void 0!==e?e:y,_=Math.max(0,E-1),v=Math.min(f.length-1,E+1);return r.a.createElement(u.e,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},r.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{h(e,o,_,n,a,g),m(i,o,E,_,t,l,d,b,s,g)},onKeyUp:e=>{h(e,o,_,n,a,g),m(i,o,E,_,t,l,d,b,s,g)},style:p.slider},E>0&&r.a.createElement(u.e,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(u.t,{color:"white",icon:"arrow-back",accessibilityLabel:c.a._("View Previous","Button to advance carousel to the previous image","Button to advance carousel to the previous image")}))),r.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{h(e,o,v,n,a,g),m(i,o,E,v,t,l,d,b,s,g)},onKeyUp:e=>{h(e,o,v,n,a,g),m(i,o,E,v,t,l,d,b,s,g)},style:p.slider},E<f.length-1&&r.a.createElement(u.e,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(u.t,{color:"white",icon:"arrow-forward",accessibilityLabel:c.a._("View Next","Button to advance carousel to the next image","Button to advance carousel to the next image")}))))};t.default=Object(i.connect)(({pins:e},{carouselData:t,pinId:n})=>{const a=e[n];return{pin:a,carouselData:t||Object(s.a)(a)}},e=>({changeCarouselSlotIndex:(t,n)=>e(Object(o.a)(t,n))}))(b)},xfna:function(e,t,n){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b}));var a=n("q1tI"),r=n.n(a),i=n("EHyI"),o=n("gg0E"),s=n("SyXB"),c=n("3/Bf"),l=n("+lzj"),d=n("HMdf");const u=Object(a.createContext)(null),p=Object(a.createContext)(null);function m({children:e,immutableLocation:t,resourceTimingCacheSize:n,routerHistoryAction:m,staticContext:h}){const b=Object(a.useRef)(null),g=Object(a.useRef)(null),f=Object(a.useRef)(t),y=Object(a.useRef)(!0);if(Object(a.useEffect)(()=>{Object(d.f)({size:n||1e3}),Object(l.c)(),Object(c.c)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach(e=>{window.performance[e]||Object(c.c)("not_supported.window.performance."+e)}):Object(c.c)("not_supported.window.performance"),window.PerformanceObserver||Object(c.c)("not_supported.window.PerformanceObserer"),Object(o.a)()||Object(c.c)("not_supported.grid_profiler"),y.current=!1},[]),f.current!==t){f.current=t,g.current=(null===(E=window.performance)||void 0===E?void 0:E.now)?window.performance.now():null;const{current:e}=g;if(!y.current){Object(c.c)("routeStart",{tags:{action:m}}),Object(d.a)(),Object(l.a)(),Object(s.b)();const{customBufferSize:t,defaultBufferSize:n}=Object(d.e)();e&&(Object(c.c)("routeStart.customBufferSize",{count:t}),Object(c.c)("routeStart.defaultBufferSize",{count:n}),b.current={time:e,action:m})}}var E;const _=Object(i.a)(h.deviceType);return r.a.createElement(u.Provider,{value:_?h:null},r.a.createElement(p.Provider,{value:b.current},e))}const h=()=>Object(a.useContext)(p),b=()=>Object(a.useContext)(u)},yHx3:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(a.index=e.index,a.input=e.input),a}},zEVN:function(e,t,n){var a=n("Gi0A"),r=n("sEf8"),i=n("mdPL"),o=i&&i.isMap,s=o?r(o):a;e.exports=s}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/109-1635de540d366c8bdb42.mjs.map