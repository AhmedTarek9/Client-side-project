(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["RenuxContainerCommon"],{"+6dQ":function(e,t,n){var r=n("28DW"),o=n("D2p8");t.a=e=>{o.c.resume(o.b),Object(r.a)("web.dismiss_account_switcher."+e)}},"/lhQ":function(e,t,n){t.a=e=>0===e.trim().length},"0Bqi":function(e,t,n){n.d(t,"a",(function(){return d}));var r=n("q1tI"),o=n.n(r),a=n("pkT/"),i=n("Ye/N"),s=n("MKeS"),c=n("YI5+"),l=n("n6mq");const u=Object(s.a)({resolved:{},chunkName:()=>"FullPageSignup",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:()=>n.e("FullPageSignup").then(n.bind(null,"QV6T")),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){const t=this.resolve(e);return n(t)},resolve(){return"QV6T"}});function d(e){return o.a.createElement(c.a,{onCloseClick:()=>{e.onClose&&e.onClose()},renderContent:()=>o.a.createElement(l.e,{display:"flex",justifyContent:"center",flex:"grow","data-test-id":"account-switcher-modal"},o.a.createElement(u,{fallback:o.a.createElement(a.a,null),container:e.container,email:e.email,isAccountSwitch:!0,isModal:!0,hideAccountSwitchValueProp:e.hideAccountSwitchValueProp,type:"login",signupSource:"login",customLoginTagline:e.customTaglineText||i.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account")}))})}},"0G5S":function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));const r=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(n){return console.error("Cannot access localStorage."),t}},o=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(t){console.error("Cannot access localStorage.")}},a=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(n){console.error("Cannot access localStorage.")}}},"4O/9":function(e,t,n){var r=n("Sxd8");e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},"573u":function(e,t,n){n.d(t,"a",(function(){return o}));const r=!("undefined"==typeof window||!window.performance||!window.performance.now);function o(e,t,n){this.category=e,this.variable=t,this.label=n,this.startTime,this.elapsedTime}function a(){return r?window.performance.now():Date.now()}function i(){this.timers={}}o.prototype.start=function(){return this.startTime=a(),this},o.prototype.end=function(){return this.elapsedTime=Math.round(a()-this.startTime),this.startTime=r?Math.round(this.startTime):null,this},o.prototype.getCompletedTime=function(){return this.elapsedTime},o.prototype.send=function(){if(this.elapsedTime>0&&this.elapsedTime<6e5){const{category:e,variable:t,label:r,elapsedTime:o}=this;Promise.resolve().then(n.bind(null,"rh3l")).then(({default:n})=>{n.logToServer(n.SERVER_LOG_TYPE.INTERACTION_TIMING,n.HTTP_METHOD.POST,{category:e,variable:t,label:r,time:o})})}return this},i.prototype.start=function(e,t,n,...r){const a=Array.prototype.slice.call([e,t,n,...r],0,2).join(":"),i=new o(e,t,n).start();this.timers[a]=i},i.prototype.end=function(e,t,n){const r=e+":"+t,o=this.timers[r];return o&&(o.end(),n&&o.send(),delete this.timers[r]),o};new i},AXUD:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));const r=412,o=429},"Aw+Z":function(e,t,n){var r=n("QLqj");t.a=e=>{r.b.localStorage.setItem("uoiou",!!e)}},CzMn:function(e,t,n){n.d(t,"a",(function(){return o}));var r=n("QLqj");function o(){return function(e){const t={};return e.forEach(e=>{const n=r.b.localStorage.getItem(e);n&&("signupInterestsPickerStartTime"===e?t.signupInterestsPickerTimeSpent=Date.now()-n:t[e]=n)}),JSON.stringify(t)}(["signupInterestsPickerScrollDown","signupInterestsPickerStartTime"])}},FwmB:function(e,t,n){n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return g}));var r=n("QLqj"),o=n("28DW"),a=n("J8m7"),i=n("vtuW"),s=n("AXUD"),c=n("AC0f");const l="OPEN_UNAUTH",u=e=>e&&!!e.key,d=Object.freeze({NOT_IN_EXPERIMENT:1,IN_DELAY:2,NO_LONGER_IN_DELAY:3,OTHER:4});function p(e){const t="susdd";r.b.sessionStorage.getItem(t)||r.b.sessionStorage.setItem(t,e),r.b.sessionStorage.setItem("susdst",(new Date).getTime())}function h(){return function(){if("undefined"==typeof window)return d.OTHER;const e=r.b.sessionStorage.getItem("susdst"),t=r.b.sessionStorage.getItem("susdd");return e&&t?(new Date).getTime()-e<=t?d.IN_DELAY:d.NO_LONGER_IN_DELAY:d.NOT_IN_EXPERIMENT}()===d.IN_DELAY}function m(e){return(Object(i.a)(c.b)||"").endsWith(e)}const g=(e,t,n="unknown_source",r=!1)=>{if(e){const i=e.http_status===s.b?s.b:e.api_error_code;let c=i;a.b.has(i)&&(c=a.b.get(i));const{container:l}=t;r?Object(o.a)(`unauth_web_client_cctld_login_api_error.${String(c)}.${l||"unknow_container"}.${n}`):Object(o.a)(`unauth_web_client_login_api_error.${String(c)}.${l||"unknow_container"}.${n}`)}}},"HRg/":function(e,t,n){var r=n("eOdZ"),o=n("Aw+Z"),a=n("QLqj"),i=n("kmwA"),s=n("VL22"),c=n("FwmB"),l=n("OX7c"),u=n("28DW"),d=n("i9Af");const p=function(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":e.facebook_id?s.a.FACEBOOK:e.google_open_id_token?s.a.GOOGLE_ONE_TAP:e.gplus_id_token?s.a.GOOGLE:e.phone_number?"phone_number":e.username_or_email?s.a.EMAIL:s.a.OTHER},h=function(e,t,n=!1){let r="referrer_unknown";try{const e=document.referrer;r=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(l){}const o=p(e),a=t===Object(t)?t.hybridTier:"tier_unknown",i=t===Object(t)?t.container:"container_unknown";Object(u.a)("login.referrer."+r+"."+o),Object(u.a)("login.container."+i+"."+o),Object(u.a)("login.type."+o);const s=p(e)||"method_unknown",c=t.page||"page_unknown";e.gplus_autologin?n?(Object(u.a)("mweb_autologin.google_success"),Object(u.h)("new_mweb_autologin_google",{page:c,referrer:r,container:i,hybridTier:a})):(Object(u.a)("web_autologin_google"),Object(u.h)("new_web_autologin_google",{page:c,referrer:r,container:i,hybridTier:a})):e.facebook_autologin?(Object(u.a)("web_autologin_facebook"),Object(u.h)("new_web_autologin_facebook",{page:c,referrer:r,container:i,hybridTier:a})):(Object(u.a)(`web_login.${s}.success.${c}.${i}.${r}.${a}`),Object(u.h)(`new_web_login.${s}.success`,{page:c,referrer:r,container:i,hybridTier:a}))},m=(e,t)=>{Object(u.a)(`web_cross_domain_login.${e}.${p(t)}`)};t.a=function(e,t,n={},s=!1,u,g,f=!1){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==i.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(t.origin))return function(e,t,n,r){m("attempt",e);const{referrer:o,facebookToken:a,unauthId:i}=r;return Object(d.loginUser)(e,{recaptchaV3Token:t,referrer:o,facebookToken:a,unauthId:i}).then(t=>{if(t&&t.data){m("success_with_token",e);const r=t.data;return Object(d.exchangeTokenAndSetSession)(r).then(t=>(m("success_token_exchanged",e),h(e,n),Promise.resolve()),t=>{throw m("success_token_not_exchanged",e),t})}throw m("success_without_token",e),new Error},t=>{throw m("failure",e),Object(c.f)(t,n,p(e),!0),t})}(e,g,n,t)}const b=s?null:a.b.localStorage.getItem("visitedPagesBeforeLogin"),_={...e,get_user:e.get_user||e.switch_account&&s,app_type_from_client:7===t.appType?7:5,visited_pages_before_login:b?JSON.stringify(b):null,recaptchaV2Token:u,recaptchaV3Token:g};return r.a.create("UserSessionResource",_).callCreate({showError:!1,async:!0}).then(t=>(h(e,n,f),Object(o.a)(!1),Object(l.a)("login").then(()=>t)),t=>(Object(c.f)(t,n,p(e)),Promise.reject(t)))}},HZII:function(e,t,n){var r=n("4O/9");e.exports=function(e){return r(2,e)}},IDoE:function(e,t,n){var r=n("xGpI");t.a=()=>Object.keys(Object(r.a)()).length},ItC7:function(e,t,n){n.r(t),n.d(t,"isRenuxBestPinsFallBack",(function(){return b})),n.d(t,"RenuxContainer",(function(){return _}));var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=n("QbJe"),s=n("NdXn"),c=n("MKmU"),l=n("ANjH"),u=n("gC5q"),d=n("Wer7"),p=n("0/lc"),h=n("U4JR"),m=n("zXAL"),g=n("5239");function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=e=>e&&e.display_data&&e.display_data.refresh_homefeed_background;class _ extends r.Component{constructor(...e){super(...e),f(this,"inRenuxExperience",()=>{const{experience:e}=this.props;return e&&500278===e.experience_id}),f(this,"handleDismiss",()=>{const{dismissCallback:e,experience:t,experienceClient:n,fetchUserHomefeedResource:r,viewer:o}=this.props;Object(h.b)(101,{component:17,element:1150,view:213}),this.inRenuxExperience()&&n.dismissExperience(11,500278),b(t)&&r(o),e&&e()}),f(this,"handleComplete",()=>{const{completeCallback:e,completeRenuxAction:t,experienceClient:n,fetchUserHomefeedResource:r,setRenuxUserState:o,viewer:a}=this.props;Object(h.b)(101,{component:17,element:96,view:213}),this.inRenuxExperience()&&n.completeExperience(11,500278);o(parseInt((new Date).getTime()/1e3,10)),t(),r(a),e&&e()})}componentDidMount(){const{experienceClient:e}=this.props;this.inRenuxExperience()&&e.viewExperience(11,500278)}render(){const{experience:e,isSimpleRenux:t}=this.props;if(t||this.inRenuxExperience()){const n=e&&e.display_data||{},r=t?g.y:n;return o.a.createElement(i.a,Object.assign({},Object(u.a)(s.a,!0)(r),{handleComplete:this.handleComplete,handleDismiss:this.handleDismiss},this.props))}return null}}t.default=Object(l.compose)(Object(a.connect)((function({viewer:e}){return{viewer:e}}),e=>({completeRenuxAction:()=>e({type:"COMPLETE_RENUX"}),fetchUserHomefeedResource:t=>e(Object(d.a)("UserHomefeedResource",Object(c.a)({inNux:!0,staticFeed:!1,viewerIsPartner:t.isAuth&&t.isPartner}))),setRenuxUserState:t=>e(Object(p.a)(g.v,t))})),m.a)(_)},L2Gz:function(e,t,n){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n("QLqj");function o(e,t){return e.some(e=>e.id===t.id)}function a(e){const t=[];if(e){const n=72e5,r=Date.now()-n;for(const o of e)o.ts>=r&&("string"==typeof o.image_signature&&t.push(o.image_signature),"string"==typeof o.first_pin_image_signature&&t.push(o.first_pin_image_signature))}return t}function i(){return{plpImages:a(r.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin")||[]),blpImages:a(r.b.localStorage.getItem("visitedBoardLandingPagesBeforeLogin")||[])}}function s(e){return e.url.split("/").pop().replace(/(--.*|\.jpg)$/g,"")}function c(e){const t=e.log_data;if(!t)return"";return JSON.parse(t).source||""}function l(e,t=5e-4){const n=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t},r=(e,t,r)=>"#"+n(e)+n(t)+n(r),o=(e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]})(e);if(!o)return e;const[a,i,s]=o;if(a/255**2.2*.2126+i/255**2.2*.7151+s/255**2.2*.0721<=t)return r(a,i,s);const c=(t/(a/255**2.2*.2126+i/255**2.2*.7151+s/255**2.2*.0721))**(1/2.2);return r(Math.floor(c*a),Math.floor(c*i),Math.floor(c*s))}},MKeS:function(e,t,n){n.d(t,"b",(function(){return O}));var r=n("q1tI"),o=n.n(r);function a(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c=n("TOwV"),l=n("2mql"),u=n.n(l);function d(e,t){if(!e){var n=new Error("loadable: "+t);throw n.framesToPop=1,n.name="Invariant Violation",n}}function p(e){console.warn("loadable: "+e)}var h=o.a.createContext();function m(e){return e+"__LOADABLE_REQUIRED_CHUNKS__"}var g={initialChunks:{}},f="PENDING",b="REJECTED";var _=function(e){return e};function w(e){var t=e.defaultResolveComponent,n=void 0===t?_:t,r=e.render,l=e.onLoad;function p(e,t){void 0===t&&(t={});var p=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),m={};function _(e){return t.cacheKey?t.cacheKey(e):p.resolve?p.resolve(e):"static"}function w(e,r,o){var a=t.resolveComponent?t.resolveComponent(e,r):n(e);if(t.resolveComponent&&!Object(c.isValidElementType)(a))throw new Error("resolveComponent returned something that is not a React component!");return u()(o,a,{preload:!0}),a}var x,y=function(e){var n,o;function c(n){var r;return(r=e.call(this,n)||this).state={result:null,error:null,loading:!0,cacheKey:_(n)},d(!n.__chunkExtractor||p.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),n.__chunkExtractor?(!1===t.ssr||(p.requireAsync(n).catch((function(){return null})),r.loadSync(),n.__chunkExtractor.addChunk(p.chunkName(n))),s(r)):(!1!==t.ssr&&(p.isReady&&p.isReady(n)||p.chunkName&&g.initialChunks[p.chunkName(n)])&&r.loadSync(),r)}o=e,(n=c).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o,c.getDerivedStateFromProps=function(e,t){var n=_(e);return i({},t,{cacheKey:n,loading:t.loading||t.cacheKey!==n})};var u=c.prototype;return u.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===b&&this.setCache(),this.state.loading&&this.loadAsync()},u.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},u.componentWillUnmount=function(){this.mounted=!1},u.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},u.getCacheKey=function(){return _(this.props)},u.getCache=function(){return m[this.getCacheKey()]},u.setCache=function(e){void 0===e&&(e=void 0),m[this.getCacheKey()]=e},u.triggerOnLoad=function(){var e=this;l&&setTimeout((function(){l(e.state.result,e.props)}))},u.loadSync=function(){if(this.state.loading)try{var e=w(p.requireSync(this.props),this.props,S);this.state.result=e,this.state.loading=!1}catch(t){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:p.resolve(this.props),chunkName:p.chunkName(this.props),error:t?t.message:t}),this.state.error=t}},u.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var n=w(t,e.props,{Loadable:S});e.safeSetState({result:n,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},u.resolveAsync=function(){var e=this,t=this.props,n=(t.__chunkExtractor,t.forwardedRef,a(t,["__chunkExtractor","forwardedRef"])),r=this.getCache();return r||((r=p.requireAsync(n)).status=f,this.setCache(r),r.then((function(){r.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:p.resolve(e.props),chunkName:p.chunkName(e.props),error:t?t.message:t}),r.status=b}))),r},u.render=function(){var e=this.props,n=e.forwardedRef,o=e.fallback,s=(e.__chunkExtractor,a(e,["forwardedRef","fallback","__chunkExtractor"])),c=this.state,l=c.error,u=c.loading,d=c.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===f)throw this.loadAsync();if(l)throw l;var p=o||t.fallback||null;return u?p:r({fallback:p,result:d,options:t,props:i({},s,{ref:n})})},c}(o.a.Component),E=(x=y,function(e){return o.a.createElement(h.Consumer,null,(function(t){return o.a.createElement(x,Object.assign({__chunkExtractor:t},e))}))}),S=o.a.forwardRef((function(e,t){return o.a.createElement(E,Object.assign({forwardedRef:t},e))}));return S.preload=function(e){p.requireAsync(e)},S.load=function(e){return p.requireAsync(e)},S}return{loadable:p,lazy:function(e,t){return p(e,i({},t,{suspense:!0}))}}}var x=w({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,n=e.props;return o.a.createElement(t,n)}}),y=x.loadable,E=x.lazy,S=w({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,n=e.props;return n.children?n.children(t):null}}),k=S.loadable,C=S.lazy,v="undefined"!=typeof window;function O(e,t){void 0===e&&(e=function(){});var n=(void 0===t?{}:t).namespace,r=void 0===n?"":n;if(!v)return p("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var o=null;if(v){var a=m(r),i=document.getElementById(a);if(i){o=JSON.parse(i.textContent);var s=document.getElementById(a+"_ext");if(!s)throw new Error("loadable-component: @loadable/server does not match @loadable/component");JSON.parse(s.textContent).namedChunks.forEach((function(e){g.initialChunks[e]=!0}))}}if(!o)return p("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var c=!1;return new Promise((function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,n=t.push.bind(t);function r(){o.every((function(e){return t.some((function(t){return t[0].indexOf(e)>-1}))}))&&(c||(c=!0,e()))}t.push=function(){n.apply(void 0,arguments),r()},r()})).then(e)}var I=y;I.lib=k,E.lib=C;t.a=I},MKmU:function(e,t,n){t.a=({inNux:e,inNewsHub:t,staticFeed:n,viewerIsPartner:r})=>({field_set_key:r?"hf_grid_partner":"hf_grid",in_nux:e,in_news_hub:t,prependPartner:r,static_feed:n})},NwVv:function(e,t,n){var r=n("ipvL"),o=n("bBqG");t.a=(e,t,n)=>{const a=r.a.getAccountsJSON();a[e.id]=(e=>{const t={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return t.fullName&&t.imageMediumUrl&&t.imageLargeUrl||Object(o.a)("utils.incomplete_user_values"),e.partner&&e.partner.is_create?{...t,partner:{is_create:e.partner.is_create}}:t})(e),r.a.setAccounts(JSON.stringify(a)),t&&n&&Object(o.a)("new_account_add_success",{method:t,user_added:e.id},n)}},OCob:function(e,t,n){var r=n("+NLT");t.a=()=>({referrer:r.a.instance.referrer,facebookToken:r.a.instance.facebook_token,unauthId:r.a.instance.unauth_id,origin:r.a.instance.origin,appType:r.a.instance.app_type})},QbJe:function(e,t,n){var r=n("q1tI"),o=n.n(r),a=n("/MKj"),i=n("L2Gz"),s=n("Ye/N"),c=n("EgnG"),l=n("n6mq");const u=2640,d=500,p=["blue","eggplant","green","maroon","midnight","navy","olive","orange","orchid","pine","purple","watermelon"],h=[10,-10,0];var m=o.a.memo((function(){const e=Object(r.createRef)();return Object(r.useEffect)(()=>{Object(c.a)({targets:e.current,translateY:["20%","-20%"],opacity:{value:0,delay:2680,duration:d},duration:4e3,easing:"cubicBezier(.35, 0, .7, .7)",fillMode:"forwards"})},[]),o.a.createElement(l.e,{width:"100%",ref:e,dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",columnGap:"8px"}}},function(){const e=[];let t,n=0;for(let r=0;r<3;r+=1){e.push([]),t=[];for(let e=0;e<p.length;e+=1){const a=p[n];t.push(o.a.createElement(l.e,{color:a,height:168,key:e,marginTop:2,rounding:4,width:112})),n+=3,n>=p.length&&(n=r)}e[r].push(o.a.createElement(l.e,{key:r,marginTop:h[r]},t))}return e}())}));var g=o.a.memo((function({selectedInterest:e}){const t=Object(r.createRef)(),n=Object(r.createRef)(),a=Object(r.createRef)(),i=(e,t)=>Object(c.a)({targets:n.current,opacity:[0,1],delay:3640,duration:d,fillMode:"forwards"});Object(r.useEffect)(()=>{Object(c.a)({targets:t.current,scale:[.5,1],translateY:[448,0],opacity:[{value:0,duration:0},{value:1,duration:0}],delay:u,duration:800,easing:"linear",fillMode:"forwards"}),i(n.current),i(a.current)},[]);const p={label:s.a._("Food and Drink","Title for topic","Title for topic"),images:{"400x":{height:561,url:"https://i.pinimg.com/400x/10/31/0a/10310a3d860e8f7f2a5753612a870f5a.jpg",width:400}}},{label:h,name:m,images:g}=e||p,{"400x":{url:f,height:b,width:_}}=g,w=(h||m||"").trim().toLowerCase().replace(/\s/g,"").concat(".com");return o.a.createElement(l.e,{ref:t,height:354,width:236,position:"absolute",marginTop:"auto",marginBottom:"auto",top:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{right:"96px"}}},o.a.createElement(l.A,{height:354,rounding:4,width:236},o.a.createElement(l.v,{alt:s.a._("Pin image","Pin image for nux loading step","Pin image for nux loading step"),color:"darkGray",fit:"cover",naturalHeight:b,naturalWidth:_,src:f})),o.a.createElement(l.e,{ref:n,margin:3,position:"absolute",right:!0,top:!0},o.a.createElement(l.f,{accessibilityLabel:s.a._("Save button"),color:"red",size:"lg",text:s.a._("Save","save button for nux loading step","save button for nux loading step")})),o.a.createElement(l.e,{ref:a,color:"lightGray",margin:3,paddingX:3,paddingY:1,rounding:"pill",position:"absolute",bottom:!0,left:!0,maxWidth:"90%",display:"flex",alignItems:"center",justifyContent:"between"},o.a.createElement(l.e,{alignItems:"center"},o.a.createElement(l.t,{accessibilityLabel:s.a._("link","Pin website url link for nux loading step","Pin website url link for nux loading step"),color:"darkGray",icon:"arrow-up-right",size:12})),o.a.createElement(l.e,{flex:"grow",height:18,marginStart:2,overflow:"hidden"},o.a.createElement(l.V,{size:"sm",truncate:!0,weight:"bold"},w))))}));const f={backgroundColor:"#efefef"},b={transition:"width .4s ease-out"};function _(e,t){return Object.assign({},b,{width:e+"%",borderRadius:t})}var w=({color:e="darkGray",height:t=8,progress:n=0,outerBorderRadius:r="10px",innerBorderRadius:a="inherit"})=>{return o.a.createElement(l.e,{width:"100%",overflow:"hidden",dangerouslySetInlineStyle:{__style:(i=t,s=r,Object.assign({},f,{height:i+"px",borderRadius:s}))}},o.a.createElement(l.e,{height:"inherit",color:e,dangerouslySetInlineStyle:{__style:_(n,a)}}));var i,s},x=n("eOdZ"),y=n("U4JR"),E=n("vVbV"),S=n("5239");function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C extends r.PureComponent{constructor(...e){super(...e),k(this,"state",{progressPercent:0}),k(this,"gridCopyRef",Object(r.createRef)()),k(this,"pinCopyRef",Object(r.createRef)()),k(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t}=this.props;if(Object(y.b)(8900,{view:t?213:24,viewParameter:261}),e(),!t){x.a.create("UserStateResource",{state:S.m,value:S.a}).callCreate()}})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t}=this.props;if(!t){x.a.create("UserStateResource",{state:S.m,value:S.w}).callCreate()}e("loader"),Object(y.b)(13,{view:t?213:24,viewParameter:261}),this.intervalId=setInterval(()=>this.setState(e=>({progressPercent:Math.min(e.progressPercent+100/17,100)})),300),Object(c.a)({targets:this.gridCopyRef.current,opacity:[1,0],delay:u,duration:d,easing:"linear",fillMode:"forwards"}),Object(c.a)({targets:this.pinCopyRef.current,opacity:[0,1],delay:3140,duration:d,easing:"linear",fillMode:"forwards"})}componentDidUpdate(e,t){const{progressPercent:n}=t,{progressPercent:r}=this.state;n!==r&&r>=100&&(clearInterval(this.intervalId),setTimeout(this.incrementStepAndCompleteLoading,1e3))}componentWillUnmount(){clearInterval(this.intervalId)}render(){const{isRenux:e,selectedInterests:t,showProgressBar:n}=this.props,{progressPercent:r}=this.state,a=e?s.a._("We're refreshing your home feed with lots of new Pins...","Details for ReNUX loading step","Details for ReNUX loading step"):s.a._("We're building your home feed with lots of Pins...","Details for nux loading step","Details for nux loading step"),i=s.a._("They are links saved from around the web","Pin education on NUX loading step","Pin education on NUX loading step"),c=o.a.createElement(w,{height:10,innerBorderRadius:"0 32px 32px 0",outerBorderRadius:"32px 32px 0 0",progress:r});return o.a.createElement(l.e,{display:"flex",direction:"column",height:"100%",overflow:"hidden","data-test-id":"nux-complete-loader"},o.a.createElement(l.e,{alignItems:"center",direction:"row",display:"flex",height:"100%",justifyContent:"between",overflow:"hidden",paddingX:12,width:"100%"},o.a.createElement(l.e,{marginStart:12,position:"relative",width:230},o.a.createElement(l.e,{ref:this.gridCopyRef},o.a.createElement(l.s,{size:"md"},s.a._("All set!","Title for nux loading step","Title for nux loading step")),o.a.createElement(l.e,{marginTop:4},o.a.createElement(l.V,null,a))),o.a.createElement(l.e,{ref:this.pinCopyRef,position:"absolute",top:!0},o.a.createElement(l.s,{size:"md"},s.a._("Pins are ideas","Pin education on NUX loading step","Pin education on NUX loading step")),o.a.createElement(l.e,{marginTop:4},o.a.createElement(l.V,null,i)))),o.a.createElement(l.e,{marginEnd:2},o.a.createElement(m,null)),o.a.createElement(g,{selectedInterest:t[0]})),!n&&o.a.createElement(l.e,{height:10,position:"absolute",top:!0,width:"100%"},o.a.createElement(l.e,{height:65,overflow:"hidden",paddingX:2,rounding:8},c)))}}var v=Object(a.connect)(({viewer:e})=>({viewer:e}),e=>({dispatchSetNuxStepProgress:t=>e(Object(E.a)(t))}))(C),O=n("IZzd"),I=n("028R"),T=n("0/lc");function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P extends r.Component{constructor(...e){super(...e),N(this,"onInstallButtonClicked",()=>{const{isRenux:e}=this.props;O.a.handleExtensionInstall(this.incrementStepAndCompleteLoading),Object(y.b)(101,{component:17,element:280,view:e?213:24,viewParameter:260})}),N(this,"onSkipButtonClick",()=>{const{isRenux:e}=this.props;Object(y.b)(101,{component:17,element:1150,view:e?213:24,viewParameter:260}),this.incrementStepAndCompleteLoading()}),N(this,"incrementStepAndCompleteLoading",()=>{const{incrementNuxStep:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(S.a),e()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxUpsellProgress:n}=this.props;t||n(S.w),e("extension"),Object(y.b)(13,{view:t?213:24,viewParameter:260})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t}}=this.props;return o.a.createElement(I.a,{header:e,installClick:this.onInstallButtonClicked,skipClick:this.onSkipButtonClick,subheader:t})}}var j=Object(a.connect)(null,(e,t)=>({setNuxUpsellProgress:t=>e(Object(T.a)(S.j,t)),dispatchSetNuxStepProgress:t=>e(Object(E.a)(t))}))(P),R=n("JW66"),A=n("7pfs");function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const U=()=>{},D=({isChecked:e,label:t,selectGender:n,value:r})=>o.a.createElement(A.a,null,({hovered:a,onMouseEnter:i,onMouseLeave:s})=>o.a.createElement(l.e,{color:a?"lightGray":"transparent","data-test-id":`nux-gender-${t}-label`,onKeyUp:t=>{e||t.keyCode!==R.a.KeyCode.SPACE&&t.keyCode!==R.a.KeyCode.ENTER||n()},onMouseEnter:i,onMouseLeave:s,onMouseUp:()=>{e||n()},rounding:a?2:0},o.a.createElement(l.w,{htmlFor:t},o.a.createElement(l.e,{alignItems:"center",display:"flex",flex:"none",height:60,paddingX:8},o.a.createElement(l.H,{checked:e,id:t,name:"genderOptions",onChange:U,size:"md",value:t}),o.a.createElement(l.e,{display:"flex",flex:"grow",marginStart:6},r))))),G=({children:e})=>o.a.createElement(l.s,{size:"sm"},e);class B extends r.PureComponent{constructor(...e){super(...e),L(this,"state",{customGender:this.props.customGender,gender:this.props.gender,showCustomGenderTextfield:this.props.gender===S.z&&this.props.customGender.length>0,showNextButton:[S.h,S.g].includes(this.props.gender)||this.props.customGender.length>0,showCustomGenderDoneButton:this.props.gender===S.z&&this.props.customGender.length>0}),L(this,"setCustomGender",e=>{e.target instanceof HTMLInputElement&&e.target.value.trim().length>0?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!0}):this.state.showNextButton&&e.target instanceof HTMLInputElement?this.setState({customGender:e.target.value,showCustomGenderDoneButton:!1}):this.setState({customGender:"",showCustomGenderDoneButton:!1})}),L(this,"updateGenderCompleteStep",()=>{const{incrementNuxStep:e,isRenux:t,updateGenderInfo:n}=this.props,{customGender:r,gender:o}=this.state;n(o===S.z?{gender:S.z,custom_gender:r.slice(0,30)}:{gender:o}).then(()=>{this.setUserStateCompletedGenderStep(),Object(y.b)(8900,{view:t?213:24,viewParameter:3120}),e()})}),L(this,"logButtonClick",e=>{let t;switch(e){case"genderButton":t=241;break;case"nextButton":t=96;break;case"submitButton":t=11906}t&&Object(y.b)(101,{component:17,element:t,view:this.props.isRenux?213:24,viewParameter:3120})})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxGenderProgress:n}=this.props;e("gender"),t||n(S.w),Object(y.b)(13,{view:t?213:24,viewParameter:3120})}onSelectGender(e){const{showCustomGenderTextfield:t,showNextButton:n}=this.state;n?this.setState({gender:e,showCustomGenderTextfield:e===S.z},()=>this.logButtonClick("genderButton")):e===S.z||t?this.setState({gender:S.z,customGender:"",showCustomGenderTextfield:!t,showCustomGenderDoneButton:!1},()=>this.logButtonClick("genderButton")):this.setState({gender:e},()=>{this.logButtonClick("genderButton"),this.updateGenderCompleteStep()})}setUserStateCompletedGenderStep(){const{isRenux:e,setNuxGenderProgress:t}=this.props;e||t(S.a)}render(){const{isRenux:e,personalizationCopy:{headerText:t,subHeaderText:n}}=this.props,{customGender:a,showCustomGenderDoneButton:i,showCustomGenderTextfield:c,showNextButton:u}=this.state,d=s.a._("Female","nux.gender.femaleButton","Option for select female gender"),p=s.a._("Male","nux.gender.maleButton","Option for select male gender"),h=s.a._("Specify another","nux.gender.specifyButton","Option for gender besides male and female"),m=s.a._("Enter preferred gender","nux.gender.customGenderPlaceholder","placeholder text for custom gender text field"),g=s.a._("Submit","nux.gender.submitCustomGender","button text for submitting a custom gender type"),f=c?o.a.createElement(r.Fragment,null,o.a.createElement(l.e,{"data-test-id":"nux-gender-unspecified-input",display:"flex",flex:"grow",marginEnd:!u&&i?3:0},o.a.createElement(l.e,{alignItems:"center",width:"100%"},o.a.createElement(l.X,{id:"customGender",onChange:({event:e})=>this.setCustomGender(e),placeholder:a||m,size:"lg"}))),!u&&i&&o.a.createElement(l.e,{"data-test-id":"nux-gender-unspecified-done-btn"},o.a.createElement(l.f,{color:"red",inline:!0,onClick:()=>{this.logButtonClick("submitButton"),this.updateGenderCompleteStep()},size:"lg",text:g}))):o.a.createElement(G,null,h);return o.a.createElement(l.e,{direction:"column",display:"flex",height:"100%",justifyContent:"start",paddingY:8,width:"100%"},o.a.createElement(l.e,{direction:"column",display:"flex",marginTop:11,paddingX:8,paddingY:8},e?o.a.createElement(l.e,{marginTop:8,paddingY:4},o.a.createElement(l.s,{align:"center",size:"md"},t),o.a.createElement(l.e,{marginTop:3},o.a.createElement(l.V,{align:"center"},n))):o.a.createElement(l.s,{align:"center",size:"lg"},t)),o.a.createElement(l.e,{paddingY:8},o.a.createElement(D,{isChecked:!c&&this.state.gender.toLowerCase()===S.g,label:S.g,selectGender:()=>this.onSelectGender(S.g),value:o.a.createElement(G,null,d)}),o.a.createElement(D,{isChecked:!c&&this.state.gender.toLowerCase()===S.h,label:S.h,selectGender:()=>this.onSelectGender(S.h),value:o.a.createElement(G,null,p)}),o.a.createElement(D,{isChecked:c,label:S.z,selectGender:()=>this.onSelectGender(S.z),value:f})),u&&o.a.createElement(l.e,{"data-test-id":"nux_gender_next_btn",marginEnd:8,marginStart:8,marginTop:"auto"},o.a.createElement(l.f,{accessibilityLabel:s.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:c&&0===this.state.customGender.length,onClick:()=>{this.logButtonClick("nextButton"),this.updateGenderCompleteStep()},size:"lg",text:s.a._("Next","next nux step button","next nux step button"),type:"button"})))}}var z=Object(a.connect)(({viewer:e})=>({gender:e.gender?e.gender:"",customGender:e.customGender?e.customGender:""}),(e,t)=>({dispatchSetNuxStepProgress:t=>e(Object(E.a)(t)),setNuxGenderProgress:t=>e(Object(T.a)(S.l,t)),updateGenderInfo:t=>e(Object(T.e)({updateUserData:t}))}))(B),M=n("TPPM"),H=n("w70y");var F=e=>{const{defaultOptions:t,id:n,items:r,name:a,onChange:i,value:s}=e,c=(r.data||t||[]).sort((e,t)=>e.name.localeCompare(t.name)).map(({name:e,key:t})=>({label:e.toString(),value:t}));return o.a.createElement(l.M,{id:n,name:a,onChange:i,options:c,size:"lg",value:s})};function X(e){const t=Object(H.a)({name:"CountriesResource"});return o.a.createElement(F,Object.assign({items:t},e))}function V(e){const t=Object(H.a)({name:"LocalesResource"});return o.a.createElement(F,Object.assign({items:t},e))}var Y=n("QLqj"),W=n("kmwA"),q=n("ANjH"),K=n("pLLR");function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class J extends r.PureComponent{constructor(...e){super(...e),$(this,"state",{locale:this.props.reduxLocale||(this.props.requestContext||{}).locale||S.c,country:this.props.reduxCountry||(this.props.requestContext||{}).country||S.b,swappingLanguage:!1}),$(this,"onNextButtonClick",()=>{const{incrementNuxStep:e,isRenux:t,updateUserInfo:n,setNuxLocaleProgress:r}=this.props,{country:o,locale:a}=this.state;n({updateUserData:{country:o,locale:a}}).then(()=>{t||r(S.a),Object(y.b)(101,{component:17,element:96,view:24,viewParameter:3139}),Object(y.b)(8900,{view:24,viewParameter:3139}),e()})}),$(this,"updateLocale",({value:e})=>this.setState({locale:e})),$(this,"updateCountry",({value:e})=>this.setState({country:e}))}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,setNuxLocaleProgress:n}=this.props;t||n(S.w),e("country");Y.b.localStorage.getItem("signupUserLocale")||Y.b.localStorage.getItem("signupUserCountry")||Object(y.b)(13,{view:24,viewParameter:3139})}componentDidUpdate(e,t){const{toggleLoadingIndicator:n,isBizNux:r,updateUserInfo:o}=this.props,{country:a,locale:i}=t,{country:s,locale:c}=this.state,l=a!==s,u=i!==c,d=W.a.settings.EU_COUNTRIES_2020_COOKIE_POLICY,p=!d.includes(a)&&d.includes(s);(l||u)&&o({updateUserData:{...p?{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1}:{},country:s,locale:c}}).then(()=>{l&&Y.b.localStorage.setItem("signupUserCountry",s),u&&(Y.b.localStorage.setItem("signupUserLocale",c),r?this.setState({swappingLanguage:!0}):n(!0),Object(M.a)("/"))})}render(){const{personalizationCopy:{headerText:e}}=this.props,{country:t,locale:n,swappingLanguage:r}=this.state;return o.a.createElement(l.e,{direction:"column",display:"flex",height:"100%",padding:8,width:"100%"},o.a.createElement(l.e,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginBottom:7},o.a.createElement(l.e,{marginTop:10,paddingY:5,width:"100%"},o.a.createElement(l.s,{align:"center",size:"md"},e)),o.a.createElement(l.e,{marginTop:12,paddingY:5,width:"100%"},o.a.createElement(l.e,{"data-test-id":"nux-locale-select"},o.a.createElement(V,{id:"newUserLanguage",name:"locale",onChange:this.updateLocale,value:n})),o.a.createElement(l.e,{"data-test-id":"nux-country-select",marginTop:4},o.a.createElement(X,{id:"newUserCountry",name:"country",onChange:this.updateCountry,value:t})))),o.a.createElement(l.e,{bottom:!0,"data-test-id":"nux-locale-country-next-btn"},o.a.createElement(l.f,{color:"red",disabled:r||"Country"===t,onClick:this.onNextButtonClick,size:"lg",text:s.a._("Next","go to next step","go to next step"),type:"submit"})))}}var Q=Object(q.compose)(Object(a.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),(e,t)=>({updateUserInfo:t=>e(Object(T.e)(t)),setNuxLocaleProgress:t=>e(Object(T.a)(S.k,t)),dispatchSetNuxStepProgress:t=>e(Object(E.a)(t))})),K.e)(J),Z=n("D2p8"),ee=n("b7nI"),te=n("TgLd"),ne=n("QAzJ");const re=600,oe=640,ae=520,ie=816,se=["NuxDismissableWelcome","NuxWelcomeNameStep","NuxAboutYouStep","NuxGenderStep","NuxLocaleCountryStep"],ce=e=>se.includes(e);var le=Object(r.memo)((function({children:e,currentIndex:t,hideDots:n,inUsecaseQuiz:a,isLoading:i,numSteps:u,onClose:d,onPrevStepClick:p,stepName:h}){const{anyEnabled:m}=Object(ne.a)("web_nux_modal_gestalt"),{isRTL:g}=Object(K.d)(),f=Object(r.useRef)(),b=Object(r.useRef)(),_=Object(r.useRef)(ce(h)),w=Object(r.useRef)(h);Object(r.useEffect)(()=>(m||(document.body&&(document.body.style.overflow="hidden"),Z.c.pause()),()=>{m||(document.body&&(document.body.style.overflow=""),Z.c.resume())}),[]),Object(r.useEffect)(()=>{m&&(ce(w.current)!==ce(h)&&(()=>{if(!f.current||!b.current)return;const e=!ce(h);Object(c.a)({targets:f.current,duration:e?500:0,width:e?[ae,ie]:[ie,ae],easing:"linear",fillMode:"forwards"}),Object(c.a)({targets:b.current,duration:e?500:0,height:e?[re,oe]:[oe,re],easing:"linear",fillMode:"forwards"})})(),w.current=h)},[h]);const x=o.a.createElement(o.a.Fragment,null,i&&o.a.createElement(ee.a,null),!!p&&o.a.createElement(l.e,{left:!g,right:g,marginStart:5,marginTop:5,minHeight:40,position:"absolute",top:!0},o.a.createElement(l.u,{accessibilityLabel:s.a._("Go back to previous step","Accessibility label on NUX back button","Accessibility label on NUX back button"),icon:"directional-arrow-left",iconColor:"darkGray",onClick:p,size:"md"})),!n&&o.a.createElement(l.e,{alignItems:"center",alignSelf:"center",display:"flex",height:16,justifyContent:"evenly",marginBottom:4,marginEnd:4,marginStart:4,marginTop:8,minHeight:16,width:40*u},[...Array(u).keys()].map(e=>{const n=e>t,r=n?"6px":"10px";return o.a.createElement(l.e,{color:n?"gray":"darkGray","data-test-id":"nux-toc-dot",height:r,key:e,rounding:"circle",width:r})})),!!d&&o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:a?{zIndex:1}:{}},marginEnd:6,marginTop:6,minHeight:40,position:"absolute",right:!0,top:!0},o.a.createElement(l.u,{accessibilityLabel:s.a._("cancel","close nux modal","close nux modal"),icon:"cancel",iconColor:"darkGray",onClick:d,size:"sm"})),o.a.createElement(l.e,{flex:"grow",height:"100%",width:"100%"},e));return m?o.a.createElement(te.b,{accessibilityModalLabel:"nux",closeOnOutsideClick:!1,onDismiss:()=>{},modalRef:f,size:_.current?ae:ie},o.a.createElement(l.e,{direction:"column",display:"flex",height:_.current?re:oe,position:"relative",ref:b},x)):o.a.createElement(l.x,null,o.a.createElement(l.e,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",zIndex:"999"}},display:"flex",height:"100vh",justifyContent:"center",overflow:"scroll",position:"fixed",top:!0,width:"100vw"},o.a.createElement(l.e,{color:"white",dangerouslySetInlineStyle:{__style:(y=h,{transition:ce(y)?"":"width 0.5s, height 0.5s",borderRadius:"32px"})},direction:"column",display:"flex",height:ce(h)?re:oe,position:"relative",rounding:2,width:ce(h)?ae:ie},x)));var y})),ue=n("FDmi");function de({account:e,large:t,viewerId:n}){const{email:r,fullName:a,id:i,imageMediumUrl:s,username:c}=e;if(n===i)return null;const u=!(null==s?void 0:s.includes("static/images/user/default"));return o.a.createElement(l.e,{alignItems:"center",direction:"row",display:"flex",height:"100%",width:"100%"},o.a.createElement(l.e,{paddingX:1},o.a.createElement(ue.a,{accessibilityLabel:"",name:null!=a?a:c,src:u?s:"",size:t?"lg":"md"})),o.a.createElement(l.e,{marginStart:3,flex:"grow"},o.a.createElement(l.V,{color:"darkGray",truncate:!0,weight:"bold"},a||c),r&&o.a.createElement(l.V,{color:"darkGray",truncate:!0},r)))}var pe=n("0Bqi");var he=e=>{const t=Object.keys(e.accounts).length;return o.a.createElement(l.e,{position:"relative"},o.a.createElement(l.e,{color:"lightGray",height:20*t*4,position:"absolute",width:1,dangerouslySetInlineStyle:{__style:{bottom:48,left:52}}}),o.a.createElement("ul",null,Object.keys(e.accounts).map(t=>{const n=e.accounts[t];return o.a.createElement("li",{key:t},o.a.createElement(l.U,{onTap:()=>e.onClick(n)},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{padding:"8px 16px 8px 28px"}},o.a.createElement(de,{account:n}))))})))},me=n("h4v/"),ge=n("OCob"),fe=n("HRg/"),be=n("qD10"),_e=n("NdXn"),we=n("gC5q"),xe=n("zRck"),ye=n("liz/");function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Se extends r.Component{constructor(...e){super(...e),Ee(this,"state",{failedAccount:null,showLoginModal:!1,isLoading:!1}),Ee(this,"handleAddAccount",()=>{Object(ye.i)("add_account_click",null,this.props.container),this.props.container===xe.c&&this.props.showLogin?this.props.showLogin():this.setState({showLoginModal:!0})}),Ee(this,"trackProfileNavigateClick",e=>{Object(ye.i)(`current_profile_${e}_click`,null,this.props.container)}),Ee(this,"handleSwitch",e=>{const{container:t}=this.props;this.setState({isLoading:!0}),Object(y.b)(101,{component:13369,element:11196}),Object(ye.i)("switch_account_click",{destination_user_id:e.id},t);const n={get_user:!0,switch_account:e.id};me.a.getInstance().pauseImpressionsAndFlush(),Object(fe.a)(n,Object(ge.a)(),{container:"account_switcher"},!0).then((n={})=>{if(n.resource_response&&n.resource_response.data&&n.resource_response.data.success){const n="/"+e.username;Object(ye.f)(n,e.id,t)}else Object(ye.e)(e.id,t),this.setState({failedAccount:e,isLoading:!1})},n=>{throw Object(ye.e)(e.id,t),this.setState({isLoading:!1}),n})}),Ee(this,"handleLinkedAccountSwitch",e=>{const{container:t,viewer:n}=this.props;if(this.setState({isLoading:!0}),Object(y.b)(101,{component:13369,element:e.partner&&e.partner.isLinkedBusiness?11195:11194}),me.a.getInstance().pauseImpressionsAndFlush(),e.partner&&e.partner.isLinkedBusiness){const n={business_id:e.id,get_user:!0};Object(fe.a)(n,Object(ge.a)(),{container:"account_switcher"},!0).then((n={})=>{Object(ye.f)("/",e.id,t)},n=>{throw Object(ye.e)(e.id,t),this.setState({isLoading:!1}),n})}else x.a.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete().then(()=>{Object(ye.h)(n.id),Object(ye.f)("/"+e.username,n.id,t)},e=>{throw Object(ye.e)(n.id,t),this.setState({isLoading:!1}),e})}),Ee(this,"handleCloseModal",()=>this.setState({showLoginModal:!1})),Ee(this,"handleReauthAccount",()=>{Object(ye.i)("switch_failure_prompt.login_click",null,this.props.container),this.setState({failedAccount:null,showLoginModal:!0})}),Ee(this,"handleRemoveUnauthAccount",e=>{Object(ye.i)("switch_failure_prompt.account_removed",{removed_user_id:e},this.props.container),Object(ye.h)(e),this.setState({failedAccount:null})}),Ee(this,"getBusinessAccounts",()=>{const{businessUser:e,viewer:{partner:t}}=this.props;if(!e.data)return null;return(t&&t.is_linked_business?e.data.owners:e.data.businesses).reduce((e,t)=>(e[t.id]=Object(we.a)(_e.a,!0)(t),t.partner&&t.partner.is_linked_business&&(e[t.id].email=t.partner.biz_ownership_email),e),{})}),Ee(this,"renderAccounts",e=>Object.keys(e).map((t,n)=>o.a.createElement("li",{key:n},o.a.createElement(l.U,{onTap:()=>{this.handleSwitch(e[t])}},o.a.createElement("div",{className:"AccountSwitcherListItem",style:{height:"auto"}},o.a.createElement(de,{large:!0,account:e[t],viewerId:this.props.viewer.id}))),n!==ye.a-2&&o.a.createElement(l.o,null)))),Ee(this,"renderPinnerButtons",e=>{const{onNavigateButtonClick:t}=this.props;return o.a.createElement(be.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`},o.a.createElement(l.f,{text:s.a._("View profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:s.a._("Go to current profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",color:"red",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}}))}),Ee(this,"renderBusinessButtons",e=>{const{onNavigateButtonClick:t}=this.props;return o.a.createElement(l.e,{display:"flex"},o.a.createElement(l.e,{marginEnd:2},o.a.createElement(be.a,{to:"/business/hub/",onClick:()=>{Object(y.b)(101,{element:11236}),t&&t()}},o.a.createElement(l.f,{key:"biz-hub-button",text:s.a._("Business hub","Link to Business hub from account switcher","Link to Business hub from account switcher"),accessibilityLabel:s.a._("Go to Business hub","Visit the Business hub for the current business user","Visit the Business hub for the current business user"),size:"sm",color:"red"}))),o.a.createElement(be.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${e}/`},o.a.createElement(l.f,{text:s.a._("Profile","Visit a user profile from account switcher","Visit a user profile from account switcher"),accessibilityLabel:s.a._("Go to current user profile","Visit a current user profile from account switcher","Visit a current user profile from account switcher"),size:"sm",onClick:()=>{this.trackProfileNavigateClick("button"),t&&t()}})))})}componentDidMount(){this.props.container===xe.c&&Object(ye.i)("modal.shown")}componentWillUnmount(){this.props.container===xe.c&&Object(ye.i)("modal.dismiss")}renderLoadingIndicator(){return this.state.isLoading?o.a.createElement(ee.a,null):null}render(){const{viewer:{partner:e}}=this.props,{failedAccount:t,isLoading:n,showLoginModal:r}=this.state,a=Object(ye.d)(),i=this.getBusinessAccounts(),c=Object.keys(a).length,u=a[this.props.viewer.id];delete a[u.id];const d=u.imageLargeUrl&&!u.imageLargeUrl.includes("static/images/user/default");return o.a.createElement(l.e,{flex:"grow"},r&&o.a.createElement(pe.a,{container:this.props.container,onClose:this.handleCloseModal,email:t?t.email:""}),t?o.a.createElement(l.e,{paddingX:4,paddingY:4,flex:"grow"},o.a.createElement(l.e,{marginBottom:3},o.a.createElement(l.V,null,s.a._("Oh no! You're no longer logged into","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it","Full sentence: \"Oh no! You're no longer logged into <user's account>\". Text telling user that they are no longer logged into an account after trying to switch to it"))),o.a.createElement(de,{viewerId:u.id,account:t}),o.a.createElement(l.e,{marginTop:4},o.a.createElement(l.f,{text:s.a._("Log in again","Text on button allowing user to log into an account after failing to switch to that account","Text on button allowing user to log into an account after failing to switch to that account"),color:"red",onClick:this.handleReauthAccount})),o.a.createElement(l.e,{marginTop:3},o.a.createElement(l.f,{text:s.a._("Remove account","Text on button allowing user to remove an account from their account switcher after failing to switch to it","Text on button allowing user to remove an account from their account switcher after failing to switch to it"),onClick:()=>this.handleRemoveUnauthAccount(t.id)}))):o.a.createElement(l.e,null,n&&this.renderLoadingIndicator(),o.a.createElement(l.e,null,o.a.createElement(l.e,{alignItems:"center",direction:"row",display:"flex",marginTop:1,padding:4,position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:1}}},o.a.createElement(l.e,{marginEnd:4},o.a.createElement(be.a,{className:"dangerouslyDisableFocusStyle",focusOnBody:!0,to:`/${u.username}/`},o.a.createElement(l.U,{onTap:()=>this.trackProfileNavigateClick("avatar")},o.a.createElement(ue.a,{name:u.fullName||u.username,size:"lg",src:d?u.imageLargeUrl:""})))),o.a.createElement(l.e,{flex:"grow"},o.a.createElement(l.e,{marginBottom:2},o.a.createElement(l.V,{color:"darkGray",truncate:!0,weight:"bold"},u.fullName||u.username),u.email&&o.a.createElement(l.V,{color:"darkGray",truncate:!0},u.email)),e?this.renderBusinessButtons(u.username):this.renderPinnerButtons(u.username))),i?o.a.createElement(he,{accounts:i,onClick:this.handleLinkedAccountSwitch}):null,o.a.createElement(l.o,null),e&&e.is_linked_business?null:o.a.createElement(l.e,null,o.a.createElement("ul",null,this.renderAccounts(a)))),c<ye.a&&!(e&&e.is_linked_business)&&o.a.createElement(l.e,{paddingX:4,paddingY:3},o.a.createElement(l.f,{text:s.a._("Add account","Short text on the button that allows a user to log in to another Pinterest account","Short text on the button that allows a user to log in to another Pinterest account"),onClick:()=>this.handleAddAccount()}))))}}var ke=Object(q.compose)(K.e,Object(H.b)({key:"businessUser",name:"UserResource",options:({viewer:e})=>({field_set_key:"linked_partner",user_id:e.id})}))(Se),Ce=n("v/Q4");function ve({customTaglineText:e,hideAccountSwitchValueProp:t,onDismiss:n,showAddAccount:a}){const[i,c]=Object(r.useState)(Boolean(a)),u=Object(Ce.a)(),d=Object(H.a)({name:"UserResource",options:{username:u.isAuth?u.username:"",field_set_key:"linked_partner"}});Object(r.useEffect)(()=>{u.isAuth&&Object(ye.g)(u,d.data)},[]);return i?o.a.createElement(pe.a,{container:xe.c,onClose:a?n:()=>c(!1),customTaglineText:e,hideAccountSwitchValueProp:t}):o.a.createElement(l.e,{position:"relative"},o.a.createElement(te.b,{accessibilityModalLabel:s.a._("View, add, and switch logged in users","modal which allows user to add and switch multiple accounts","modal which allows user to add and switch multiple accounts"),size:"sm",heading:s.a._("Switch accounts","Short title on modal that allows a user to switch between different Pinterest accounts","Short title on modal that allows a user to switch between different Pinterest accounts"),onDismiss:n},o.a.createElement(ke,{container:xe.c,onNavigateButtonClick:()=>n(),showLogin:()=>c(!0),viewer:u})))}var Oe=n("yaUg"),Ie=n("ihsa"),Te=n("V08O");const Ne={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},Pe="DelightfulBubbles__",je=["DelightfulBubbles__fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n","DelightfulBubbles__growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n","DelightfulBubbles__swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n",...Object.keys(Ne).map(e=>{const t=((e,t)=>{const n=e.length,r=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[r]})(Object.keys(Ne),e);return`${Pe}colorChange_${e} {\n      0% {\n        background-color: ${Ne[e]};\n      }\n      50% {\n        background-color: ${Ne[t]};\n      }\n    }\n    `})],Re=Object(Te.a)(je);function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Le=e=>{const{delay:t,diameter:n,height:r,initialColor:a,width:i,xOffset:s,yOffset:c}=e,u=((e,t,n,r,o,a,i,s)=>({bubblePositionStyles:{position:"absolute",marginLeft:a/2-o+"px",marginTop:n/2-o+"px",left:i+"px",top:s+"px"},bubbleSwirlStyles:{animation:`${Pe}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${Pe}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${Pe}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${Pe}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:t+"px",width:t+"px",borderRadius:"50%",backgroundColor:Ne[r],opacity:0,animation:`${Pe}colorChange_${r} 12s steps(1, start) ${e}s infinite forwards,\n      ${Pe}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${Pe}colorChange_${r} 12s steps(1, start) ${e}s infinite forwards,\n      ${Pe}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,r,a,Math.floor(n/2),i,s,c);return o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:u.bubblePositionStyles}},o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:u.bubbleSwirlStyles}},o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:u.bubbleGrowShrinkStyles}},o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:u.bubbleShapeStyles}}))))};class Ue extends r.Component{constructor(...e){super(...e),Ae(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){const{width:e,height:t}=this.props;return void 0!==e&&void 0!==t?{width:e,height:t}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{height:void 0,width:void 0}}createBubbles(e,t){const{bubbleSize:n,delayFactor:r,delayOffset:a,numBubbles:i,xRadiusAdjustment:s,yRadiusAdjustment:c}=this.props,l=e+2*c,u=t+2*s,d=[],p=Object.keys(Ne);for(let h=0;h<i;h+=1){const i=n+Object(Te.c)(-4,4),s=p[h%p.length],{x:c,y:m}=Object(Te.b)(l,u);d.push(o.a.createElement(Le,{delay:h*r+a,diameter:i,initialColor:s,xOffset:c,yOffset:m,height:e,width:t,key:h}))}return d}render(){const{height:e,width:t}=this.getSize();return o.a.createElement(l.e,{height:e,width:t,position:"relative"},o.a.createElement(Ie.a,{unsafeCSS:Re}),o.a.createElement(l.e,{ref:e=>this.containerElement=e},this.state.isInitialized&&this.createBubbles(e||0,t||0),o.a.createElement(l.e,{position:"relative"},this.props.children)))}}Ae(Ue,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});var De=Ue,Ge=n("/lhQ"),Be=n("EC51"),ze=n("28DW"),Me=n("0S8y");function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Fe extends r.PureComponent{constructor(...e){super(...e),He(this,"state",{name:this.props.firstName,showAccountSwitchModal:!1,showNameInput:!1,showNoNameError:!1,showNameLengthError:!1}),He(this,"onNameChange",({value:e})=>{this.setState({name:e||"",showNoNameError:!e||Object(Ge.a)(e),showNameLengthError:!!e&&e.length>30})}),He(this,"toggleNameInput",()=>{this.setState(({showNameLengthError:e,showNoNameError:t,showNameInput:n})=>({showNameInput:e||t||!n})),Object(y.b)(101,{element:136,view:24,viewParameter:259})}),He(this,"continueAndSave",()=>{const{firstName:e,incrementNuxStep:t,setNuxNameProgress:n,updateNameInfo:r}=this.props,{name:o}=this.state;r(Object(Me.a)(o)).then(()=>{n(),Object(y.b)(101,{element:96,view:24,viewParameter:259,did_edit_name:e!==o}),Object(y.b)(8900,{view:24,viewParameter:259}),t()})}),He(this,"getError",()=>{const{showNameLengthError:e,showNoNameError:t}=this.state;let n="";return t?n=s.a._("And your name is...?","Error flyout when user doesn't input name","Error flyout when user doesn't input name"):e&&(n=s.a._("Hmm, that's too long. Try a nickname instead?","nux.welcomeStep.nameLengthError","Name exceeds 30 character maximum error")),n}),He(this,"handleHideAccountSwitcher",()=>this.setState({showAccountSwitchModal:!1})),He(this,"handleNotYouClick",e=>{e.event.preventDefault(),Object(ze.a)("web.nux.click_login"),this.setState({showAccountSwitchModal:!0})})}componentDidMount(){this.props.dispatchSetNuxStepProgress("welcome"),Object(y.b)(13,{view:24,viewParameter:259})}render(){const{personalizationCopy:{headerText:e,subHeaderText:t},userEmail:n}=this.props,{name:a,showAccountSwitchModal:i,showNameInput:c}=this.state,u=t.indexOf(" ",Math.round(t.length/2)),d=Object(Oe.a)(s.a._("{{ titleText }} {{ name }}!","nux.welcomeStep.greetingHeader","Greeting with inferred name."),{titleText:e,name:a}).replace(",",""),p=d.indexOf(a)-1,h=this.getError(),m=o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:{textAlign:"center"}},direction:"column",display:"flex",overflow:"hidden",width:"100%"},o.a.createElement(l.w,{htmlFor:"name"},o.a.createElement(l.e,{marginEnd:-1,marginStart:-1,marginTop:4},c?o.a.createElement(l.s,{align:"center",size:"md"},e):o.a.createElement(r.Fragment,null,o.a.createElement(l.s,{align:"center",size:"md"},d.substring(0,p)),o.a.createElement(l.e,{alignItems:"center",display:"flex",height:44,justifyContent:"center",marginTop:4,paddingY:1},o.a.createElement(l.e,{maxWidth:"calc(100% - 80px)",marginStart:10},o.a.createElement(l.s,{align:"center",size:"md",truncate:!0},d.substring(p+1))),o.a.createElement(l.e,{"data-test-id":"nux-edit-name-btn",paddingX:1},o.a.createElement(l.u,{accessibilityLabel:s.a._("Edit Name","Botton that allows editing the user's name","Botton that allows editing the user's name"),bgColor:"transparent",icon:"edit",iconColor:"darkGray",onClick:this.toggleNameInput,size:"sm"})))))),c&&o.a.createElement(l.e,{alignItems:"start","data-test-id":"nux-edit-name-input",display:"flex",justifyContent:"center",marginTop:1,paddingY:1},o.a.createElement(l.e,{width:"69%"},o.a.createElement(l.X,{errorMessage:h,id:"name",onChange:this.onNameChange,placeholder:s.a._("name"),size:"lg",type:"text",value:a})),o.a.createElement(l.e,{"data-test-id":"nux-update-name-btn",marginStart:2},o.a.createElement(l.f,{accessibilityLabel:s.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user"),color:"gray",inline:!0,onClick:this.toggleNameInput,size:"lg",text:s.a._("Submit","Button that stores the name of the updated user","Button that stores the name of the updated user")}))));return o.a.createElement(r.Fragment,null,i&&o.a.createElement(ve,{customTaglineText:s.a._("Log in","Title on modal for users to log in to an existing account after they accidentally created a new account","Title on modal for users to log in to an existing account after they accidentally created a new account"),hideAccountSwitchValueProp:!0,onDismiss:this.handleHideAccountSwitcher,showAddAccount:!0}),o.a.createElement(l.e,{direction:"column",display:"flex",height:"100%",minWidth:"100%",paddingX:8,paddingY:8},o.a.createElement(l.e,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"start",width:"100%"},o.a.createElement(De,{delayOffset:-5,xRadiusAdjustment:40},o.a.createElement(l.e,{height:120,width:120},o.a.createElement(ue.a,{name:a}))),o.a.createElement(l.e,{alignItems:"center",marginTop:6,width:"100%"},o.a.createElement(l.V,{align:"center",size:"lg",truncate:!0},n)),o.a.createElement(l.e,{alignItems:"end",display:"flex",marginTop:2,width:"100%"},m),o.a.createElement(l.e,{marginTop:h?0:6,width:"100%"},t.length>120?o.a.createElement(l.V,{align:"center"},t):o.a.createElement(r.Fragment,null,o.a.createElement(l.V,{align:"center"},t.substring(0,u)),o.a.createElement(l.V,{align:"center"},t.substring(u))))),o.a.createElement(l.e,{"data-test-id":"nux_name_done_btn",marginTop:8},o.a.createElement(l.f,{accessibilityLabel:s.a._("Next","go to next nux step","go to next nux step"),color:"red",disabled:!!h,onClick:this.continueAndSave,size:"lg",text:s.a._("Next","next nux step button","next nux step button"),type:"button"})),o.a.createElement(l.e,{marginBottom:5,marginTop:5},o.a.createElement(l.U,{fullWidth:!1,onTap:this.handleNotYouClick},o.a.createElement(l.V,{align:"center",size:"sm"},s.a._("Already have a Pinterest account?","subtitle to ask users who create a new account if they meant to log in to an existing account","subtitle to ask users who create a new account if they meant to log in to an existing account")),o.a.createElement(l.V,{align:"center",size:"sm",weight:"bold"},o.a.createElement(Be.a,{href:"#"},s.a._("Log in instead","Link allowing users who just created a new account the option to log in instead into an existing account","Link allowing users who just created a new account the option to log in instead into an existing account")))))))}}var Xe=Object(a.connect)(({viewer:e})=>({firstName:e.firstName?e.firstName:"",userEmail:e.isAuth?e.email:""}),e=>({dispatchSetNuxStepProgress:t=>e(Object(E.a)(t)),updateNameInfo:t=>e(Object(T.e)({updateUserData:t})),setNuxNameProgress:()=>e(Object(T.a)(S.r,S.a))}))(Fe),Ve=n("eBDd"),Ye=n("r8eU"),We=n("CzMn"),qe=n("TSYQ"),Ke=n.n(qe),$e=n("1inl"),Je=n("Jr++"),Qe=n("rh3l"),Ze=n("ESls"),et=n("N0Eu"),tt=n("rgAY");var nt=function({clickHandler:e,interest:t,isSelected:n,text:a}){const[s,c]=Object(r.useState)(!1);let u="transparent";const d=!n&&!s;let p={};if(n&&t&&t.background_color){p={backgroundColor:Object(i.c)(t.background_color,5e-4)}}else n?u="darkGray":s&&(u="lightGray");const h=t&&"string"==typeof t.label?t.label:"",m=t?h||t.name:a||"";return o.a.createElement(l.U,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onTap:e,rounding:"pill"},o.a.createElement(l.e,{borderStyle:d?"lg":"none",color:u,dangerouslySetInlineStyle:{__style:{...p,borderStyle:d?"solid":"unset",padding:d?"2px":"4px"}},"data-test-id":"nux-picker-topic",direction:"row",display:"flex",height:48,rounding:"pill"},t&&(()=>{if(!t)return null;const{background_color:e,cycling_images:n,images:r}=t,a=r["400x"],i=n?n.map(e=>e["400x"]):[];return o.a.createElement(l.e,{marginEnd:1},o.a.createElement(l.A,{width:40,height:40,rounding:"circle"},i.length>0&&s?o.a.createElement(tt.a,{backgroundColor:e,cyclingImages:i,imageHeight:40,imageWidth:40,imgLabel:m}):o.a.createElement(l.v,{alt:m,color:e,fit:"cover",naturalHeight:a.height,naturalWidth:a.width,src:a.url})))})(),o.a.createElement(l.e,{alignItems:"center","data-test-id":"nux-picker-topic-label",display:"flex",justifyContent:"center",marginEnd:4,marginStart:t?2:4},o.a.createElement(l.V,{color:n?"white":"darkGray",size:"lg",weight:"bold"},m))))},rt=n("HZII");function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const at=n.n(rt)()(()=>{Y.b.localStorage.setItem("signupInterestsPickerScrollDown",!0)});class it extends o.a.PureComponent{constructor(...e){super(...e),ot(this,"state",{hoverSection:null,userExpandedSections:[]}),ot(this,"gridContainer",o.a.createRef()),ot(this,"scrollContainer",o.a.createRef()),ot(this,"handleScroll",()=>{const e=this.scrollContainer.current,t=this.gridContainer.current;if(e&&t){at();const n=e.scrollTop+e.offsetHeight>=t.clientHeight;this.props.handleBottomScroll(n)}}),ot(this,"onHoverSection",e=>{this.setState({hoverSection:e})}),ot(this,"onHoverLeaveSection",()=>{this.setState({hoverSection:null})}),ot(this,"onExpandSectionToggle",(e,t)=>{const{isRenux:n}=this.props,{userExpandedSections:r}=this.state;Object(y.b)(101,{component:36,element:t?11870:11871,view:n?213:24,viewParameter:172}),this.setState({userExpandedSections:t?r.concat(e):r.filter(t=>t!==e)})}),ot(this,"renderCategories",e=>{const{interests:t}=this.props,{userExpandedSections:n,hoverSection:r}=this.state,a=new Map;t.forEach(e=>{if(e.category_title){const t=e.category_title,n=a.get(t)||[];n.push(e),a.set(t,n)}});const i=[],c=e?7:5;for(const[u,d]of a.entries()){const t=a.size>2&&d.length>c,p=n.includes(u),h=t&&!p?d.slice(0,c):d,m=!e&&r===u&&t,g=s.a._("See less","nux.topicPicker.see_less","Text on button to show fewer topics"),f=o.a.createElement(l.e,{marginBottom:8},o.a.createElement(l.e,{display:"flex",justifyContent:e?"center":"between",alignItems:"center",padding:1,marginStart:5,marginEnd:5,marginBottom:2},o.a.createElement(l.s,{size:"sm"},u),m&&o.a.createElement(l.U,{fullWidth:!1,onTap:()=>this.onExpandSectionToggle(u,!p)},o.a.createElement(l.V,{size:"sm",weight:"bold"},p?g:s.a._("See all","nux.topicPicker.see_all","Text on button to expand the number of topics shown")))),this.renderInterests(h,e,e&&t?o.a.createElement(nt,{clickHandler:()=>this.onExpandSectionToggle(u,!p),isSelected:!1,text:p?g:s.a._("See more","nux.topicPicker.see_more","Text on button to expand the number of topics shown")}):void 0));e?i.push(o.a.createElement(l.e,{key:u},f)):i.push(o.a.createElement(l.U,{key:u,onMouseEnter:()=>this.onHoverSection(u),onMouseLeave:this.onHoverLeaveSection,onTap:()=>{}},f))}return o.a.createElement(o.a.Fragment,null,i)}),ot(this,"renderInterests",(e,t,n)=>{const{handleInterestClickFn:r,pickerType:a}=this.props;let i="xl_144";return a===S.s.CATEGORY_PICKER&&(i="lg_181_120"),[S.s.REFINED_CATEGORIZED_TOPIC_PICKER,S.s.CATEGORIZED_TOPIC_PICKER].includes(a)&&(i="lg_144_88"),o.a.createElement(l.e,{display:"flex",marginStart:t?0:5,marginTop:-1,justifyContent:t?"center":"start",wrap:!0},e.map((n,a)=>o.a.createElement(l.e,{key:a,padding:1},t?o.a.createElement(nt,{key:n.id,clickHandler:r(n),interest:n,isSelected:n.is_followed}):o.a.createElement(et.a,{clickHandler:r(n),index:a+1,interest:n,isSelected:n.is_followed,key:n.id,size:i,totalInterests:e.length}))),n&&o.a.createElement(l.e,{padding:1},n))})}componentDidMount(){this.scrollContainer.current&&this.scrollContainer.current.addEventListener("scroll",this.handleScroll)}componentWillUnmount(){this.scrollContainer.current&&this.scrollContainer.current.removeEventListener("scroll",this.handleScroll)}render(){const{disableScroll:e,interests:t,isNarrow:n,pickerType:r}=this.props,a=r===S.s.CATEGORY_PICKER?{}:{paddingBottom:"40px"},i=r===S.s.REFINED_CATEGORIZED_PILLS_TOPIC_PICKER;return t.length>0&&Y.b.localStorage.setItem("signupInterestsPickerStartTime",Date.now()),o.a.createElement(l.e,{ref:this.scrollContainer,dangerouslySetInlineStyle:{__style:a},flex:n?"shrink":"grow",height:"100%",overflow:e?"visible":"scrollY",paddingX:n?0:2,width:n?"65%":"100%"},t.length>0?o.a.createElement(l.e,{ref:this.gridContainer},S.o.has(r)?this.renderCategories(i):o.a.createElement(Ze.a,{name:"web_nux_topic_pills",isEligible:r!==S.s.CATEGORY_PICKER},({anyEnabled:e})=>this.renderInterests(t,e))):o.a.createElement(l.O,{accessibilityLabel:s.a._("Loading default interests"),show:!0}))}}var st=Object(q.compose)(Object(a.connect)(({viewer:e})=>({reduxCountry:e.country?e.country:"",reduxLocale:e.locale?e.locale:""}),()=>({})),K.e)(it),ct=n("573u");function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ut extends r.PureComponent{constructor(...e){super(...e),lt(this,"state",{currentCategory:null,hoverCategory:null,defaultInterests:[],defaultInterestsSet:new Set,addedContextualTopics:new Set,numTopicsToShow:null}),lt(this,"handleInterestClickFn",e=>()=>{const{selectedInterests:t,onSelectedInterestsChange:n}=this.props,r=!Object(i.b)(t,e);n([e],r),this.logInterestClick(r),this.contextualUpdateInterests(new Set([e.id]))}),lt(this,"logInterestClick",e=>{const{isRenux:t}=this.props,n=e?1030:1151;Object(y.b)(101,{component:36,element:n,view:t?213:24,viewParameter:172})}),lt(this,"componentName",S.n),lt(this,"recordRenderLogToServer",()=>{const e=this.renderTimers.pop();e.end(),Qe.default.logToServer(Qe.default.SERVER_LOG_TYPE.RENDER_TIME,Qe.default.HTTP_METHOD.POST,{timing:e.getCompletedTime(),component:this.componentName})}),lt(this,"renderTimers",[]),lt(this,"onClickCategory",e=>{const{isRenux:t}=this.props;Object(y.b)(101,{component:36,element:11870,view:t?213:24,viewParameter:172}),this.setState({currentCategory:e})}),lt(this,"hoverCategory",(e,t)=>{this.setState({hoverCategory:e?t:null})})}getExtraImageSignal(){const{plpImages:e,blpImages:t}=Object(i.a)(),{mostRecentPinImages:n}=this.props,r=e.concat(t);return n.concat(r)}componentDidMount(){const{hideFollowedInterests:e,isRenux:t,pickerType:n,selectedCategories:r,selectedInterests:o}=this.props;let a,i=!1;n===S.s.CATEGORY_PICKER?a=x.a.create("NuxInterestsCategoriesResource",{urlParams:Object(Je.a)()}):S.p.has(n)||S.o.has(n)||n===S.s.SIDEBAR_TOPIC_PICKER?(a=x.a.create("NuxInterestsRefinedResource",{extraImageSignal:this.getExtraImageSignal(),labelPfy:S.o.has(n),urlParams:Object(Je.a)(),refineWithInterestIds:r.map(e=>e.id),returnCategorized:S.o.has(n)||n===S.s.SIDEBAR_TOPIC_PICKER}),i=t):a=x.a.create("NuxInterestsResource",{is_renux:t,logNetworkTimer:!0,loggerComponentName:S.n,extraImageSignal:this.getExtraImageSignal(),hideFollowedInterests:e,urlParams:Object(Je.a)()}),a.callGet({showError:!1},{retries:1}).then(e=>{const t=e.resource_response&&e.resource_response.data;if(t){this.logSignupTiming();const e=t.filter(e=>!i||!e.is_followed),n=this.mapInterestsForDisplay(o,e),r=this.state.defaultInterests;this.setState({defaultInterests:n},()=>{r!==n&&this.renderTimers.unshift((new ct.a).start())});const a=new Set;n.forEach(e=>{!0===e.is_followed&&a.add(e.id)}),Object.keys(a).length>0&&this.contextualUpdateInterests(a)}}).catch(e=>{$e.a&&$e.a.showError(e.message||s.a._("Unable to load topics","Error message when failed to load topics.","Error message when failed to load topics."))})}componentDidUpdate(e,t){const{defaultInterests:n}=this.state;n!==t.defaultInterests&&this.renderTimers.length&&this.recordRenderLogToServer(),n.length>0&&0===t.defaultInterests.length&&this.props.preselect&&this.preselectInterests()}getInterestsWithUpdatedIsFollowed(){const{selectedInterests:e}=this.props,{defaultInterests:t}=this.state,n=t.map(t=>(t.is_followed=Object(i.b)(e,t),t)),r=[...e.filter(e=>"type_ahead_search"===Object(i.e)(e))];return n.concat(...r)}logSignupTiming(){const e=Y.b.localStorage.getItem("signupTime");if(e){const t=Date.now()-e;t<S.x&&Qe.default.logToServer(Qe.default.SERVER_LOG_TYPE.SIGNUP_LOAD,Qe.default.HTTP_METHOD.POST,{timing:t,component:"nux"}),Y.b.localStorage.removeItem("signupTime")}}mapInterestsForDisplay(e,t){const n=t.map(e=>({...e,is_followed:e.is_followed,label:e.name}));this.props.onSelectedInterestsChange(n.filter(e=>e.is_followed),!0);const r=new Set(e.map(e=>e.id)),o=n.filter(e=>!r.has(e.id));return e.concat(o)}preselectInterests(){const{numberToFollow:e,onSelectedInterestsChange:t}=this.props,{defaultInterests:n}=this.state,r=e||S.f;t(n.slice(0,r),!0)}contextualUpdateInterests(e){const{defaultInterests:t,defaultInterestsSet:n,addedContextualTopics:r}=this.state,o=[],a=[];let i=!1;t.forEach(t=>{if(o.push(t),n.add(t.id),e.has(t.id)&&!r.has(t.id)){const e=(t.contextual_interests||[]).filter(e=>!n.has(e.id));e.length>0&&("InsertionStrategy.INSERT_INPLACE"===t.contextual_insertion_strategy?o.push(...e):"InsertionStrategy.INSERT_AT_THE_END"===t.contextual_insertion_strategy&&a.push(...e),e.forEach(e=>{n.add(e.id)}),i=!0)}}),a.length>0&&o.push(...a),i&&this.setState({addedContextualTopics:new Set([...r,...e]),defaultInterests:o})}renderSidebar(e){const{currentCategory:t,hoverCategory:n}=this.state,r=s.a._("Picked for You","categorizedTopicPicker.PickedForYou","Category title for a collection of personalized topics just for the user");return o.a.createElement(l.e,{display:"flex",direction:"column",width:"33%"},o.a.createElement("div",{className:Ke()("hoverScrollbar")},o.a.createElement(l.e,{marginBottom:4},[r].concat(e).map(e=>{const a=e===(t||r),i=!a&&e===n?"lightGray":"transparent";return o.a.createElement(l.e,{key:e,margin:1,display:"flex"},o.a.createElement(l.U,{fullWidth:!1,onMouseEnter:()=>this.hoverCategory(!0,e),onMouseLeave:()=>this.hoverCategory(!1,e),onTap:()=>this.onClickCategory(e===r?null:e),rounding:"pill"},o.a.createElement(l.e,{color:a?"darkGray":i,padding:4,rounding:"pill"},o.a.createElement(l.V,{align:"left",size:"lg",color:a?"white":"darkGray",weight:"bold"},e))))}))))}render(){const{handleBottomScroll:e,isRenux:t,pickerType:n,selectedInterests:r}=this.props,{currentCategory:a,numTopicsToShow:i}=this.state,s=this.getInterestsWithUpdatedIsFollowed(),c=a?s.filter(e=>e.category_title===a):s,u=[...new Set(s.map(e=>e.category_title||"").filter(e=>!!e))],d=u.length>0&&n===S.s.SIDEBAR_TOPIC_PICKER,p=o.a.createElement(st,{key:a,disableScroll:!!i&&i<=5,handleBottomScroll:e,handleInterestClickFn:this.handleInterestClickFn,interests:i?c.slice(0,i):c,isNarrow:d,isRenux:!!t,pickerType:n,selectedInterests:r});return d?o.a.createElement(l.e,{overflow:"hidden",height:"100%",display:"flex",alignContent:"between",justifyContent:"between",paddingX:7},this.renderSidebar(u),o.a.createElement(l.o,null),p):p}}var dt=Object(a.connect)(({mostRecentPin:e})=>({mostRecentPinImages:e&&e.plp_image_signatures?e.plp_image_signatures:[]}),()=>({}))(ut),pt=n("DzJC"),ht=n.n(pt),mt=n("vvax");function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ft=o.a.createElement(l.e,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1))"}},height:20,left:!0,marginTop:-5,position:"absolute",right:!0,top:!0}),bt=e=>e===S.s.CATEGORY_PICKER?3407:S.p.has(e)?3408:172;class _t extends r.Component{constructor(...e){super(...e),gt(this,"state",{isBottom:!1}),gt(this,"getButtonAttributes",()=>{const{hideFollowedInterests:e,isRenux:t,pickerType:n,numberToFollow:r,selectedCategories:o,selectedInterests:a}=this.props,{isBottom:i}=this.state;if(n===S.s.CATEGORY_PICKER){const n=o.length,a=Math.max(0,r-n),i=s.a.ngettext("Pick {{ numberLeftToFollow }} category","Pick {{ numberLeftToFollow }} categories",a,"nux.picker.next_button","number of categories left to pick"),c=t&&e?s.a._("Next","go to next step","go to next step"):Object(Ve.a)(i,{numberLeftToFollow:""+a});return{text:a>0?c:s.a._("Next","go to next step","go to next step"),isDisabled:a>0}}const c=a.length,l=n===S.s.STANDARD_TOPIC_PICKER&&i&&c>=S.i?0:Math.max(0,r-c),u=s.a.ngettext("Pick {{ numberLeftToFollow }} more","Pick {{ numberLeftToFollow }} more",l,"number of interests left to pick","number of interests left to pick"),d=t&&e?s.a._("Next","go to next step","go to next step"):Object(Ve.a)(u,{numberLeftToFollow:""+l});return{text:l>0?d:s.a._("Done"),isDisabled:l>0}}),gt(this,"handleBottomScroll",e=>this.setState({isBottom:e})),gt(this,"handleBottomScrollThrottled",ht()(this.handleBottomScroll,50)),gt(this,"handleNextClick",()=>{const{isRenux:e,selectedCategories:t,selectedInterests:n,followedInterests:r,pickerType:o,setNuxPickerProgress:a,dispatchUpdateFollows:i,dispatchSubmitOrientationContext:s,requestContext:c}=this.props;if(o===S.s.CATEGORY_PICKER){const e=bt(o);return Object(y.b)(101,{component:17,element:96,view:this.viewType,viewParameter:e}),void this.logAndIncrementNuxStep(this.viewType,e)}let l;if(e){const e=t.length>0&&new Ye.b(c,"web_nux_topic_two_step_follow_categories").enabled()?t.reduce((e,t)=>(e[t.id]=t.is_followed,e),{}):{},n=r.reduce((e,t)=>(e[t.id]=t.is_followed,e),{});l=Promise.resolve(i({...e,...n}))}else{const e=[],t=[];n.forEach(n=>{e.push(n.id),t.push(n.log_data?n.log_data:null)});const r={interests:e.join(),log_data:JSON.stringify(t),referrer:"nux",user_behavior_data:Object(We.a)()};l=Promise.resolve(s(r))}l.then(()=>{e||a(S.a),o!==S.s.STANDARD_TOPIC_PICKER&&Object(y.b)(101,{component:17,element:96,view:this.viewType,viewParameter:bt(o)}),Object(y.b)(101,{component:17,element:96,view:this.viewType,viewParameter:172}),this.logAndIncrementNuxStep(this.viewType,172)})}),gt(this,"logAndIncrementNuxStep",(e,t)=>{Object(y.b)(8900,{view:e,viewParameter:t}),this.props.incrementNuxStep()})}componentDidMount(){const{dispatchSetNuxStepProgress:e,isRenux:t,pickerType:n,setNuxPickerProgress:r}=this.props;t||r(S.w),this.viewType=t?213:24,e("topic"),[S.s.CATEGORY_PICKER,S.s.STANDARD_TOPIC_PICKER].includes(n)&&Object(y.b)(13,{view:this.viewType,viewParameter:172}),n!==S.s.STANDARD_TOPIC_PICKER&&Object(y.b)(13,{view:this.viewType,viewParameter:bt(n)})}render(){const{hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,onSelectedInterestsChange:r,personalizationCopy:{headerText:a,subHeaderText:i},pickerType:c,preselect:u,selectedCategories:d,selectedInterests:p,numberToFollow:h}=this.props,m=this.getButtonAttributes(),g=c===S.s.CATEGORY_PICKER?d:p,f=c===S.s.CATEGORY_PICKER,b=[S.s.CATEGORY_PICKER,S.s.REFINED_TOPIC_PICKER].includes(c),_=t&&!b;return o.a.createElement(l.e,{direction:"column",display:"flex",height:"100%"},o.a.createElement(l.e,{display:"visuallyHidden",role:"alert"},Object(mt.b)(s.a._("{{selectedTopicsCount}} of at least 5 topics selected","accessible label how many topics are selected","accessible label how many topics are selected"),{selectedTopicsCount:g.length})),o.a.createElement(l.e,{marginBottom:8,marginTop:_?8:4,paddingX:8,wrap:!0},o.a.createElement(l.s,{align:"center",size:"md"},a),i&&o.a.createElement(l.e,{marginTop:2},o.a.createElement(l.V,{align:"center"},i))),o.a.createElement(dt,{handleBottomScroll:this.handleBottomScrollThrottled,hideFollowedInterests:e,isRenux:t,isSimpleRenux:n,numberToFollow:h,onSelectedInterestsChange:r,pickerType:c,preselect:u,selectedCategories:d,selectedInterests:g}),o.a.createElement(l.e,{position:"relative"},!f&&ft,o.a.createElement(l.e,{"data-test-id":"nux-picker-done-btn",marginBottom:8,marginTop:8,paddingX:8},o.a.createElement(l.f,{color:"red",disabled:m.isDisabled,onClick:this.handleNextClick,size:"lg",text:m.text,type:"submit"}))))}}var wt=Object(q.compose)(K.e,Object(a.connect)(null,(function(e){return{dispatchSetNuxStepProgress:t=>e(Object(E.a)(t)),dispatchUpdateFollows:t=>e(Object(T.d)(t,"renux")),dispatchSubmitOrientationContext:t=>e(Object(T.b)(t)),setNuxPickerProgress:t=>e(Object(T.a)(S.q,t))}})))(_t);var xt=n("EC67");function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Et extends r.Component{constructor(...e){super(...e),yt(this,"state",{followedInterests:[],isLoading:!1,nuxStep:this.getNextStepIndex(-1,this.props.steps,!1),selectedCategories:[],selectedInterests:[],userClickedBack:!1}),yt(this,"onComplete",()=>{const{handleComplete:e,isLandingPage:t,isRenux:n,dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:r}=this.props;Object(y.b)(4105,{view:n?213:24,viewParameter:171}),n||r(!0),e(),t&&this.handleNavigate("/")}),yt(this,"mounted",!1),yt(this,"handleNavigate",e=>{const{history:t}=this.props;t.push({pathname:e,state:{completedNux:!0}})}),yt(this,"handleSelectedInterestsChange",(e,t)=>{this.setState(this.isCategoryPickerStep()?(n,r)=>({selectedCategories:this.getUpdatedSelectedInterests(n.selectedCategories,e,t)}):(n,r)=>{const o=this.getUpdatedSelectedInterests(n.selectedInterests,e,t),a=this.getUpdatedFollowInterests(n.followedInterests,e,t),{dispatchSetNuxSelectedInterestImages:i}=r;return i(o.reduce((e,t)=>{if(t&&t.images&&t.images["400x"]){const n={bestPinsImages:t.best_pins_images,height:t.images["400x"].height,width:t.images["400x"].width,url:t.images["400x"].url};e.push(n)}return e},[])),{selectedInterests:o,followedInterests:a}})}),yt(this,"nuxSteps",{NuxWelcomeNameStep:Xe,NuxGenderStep:z,NuxLocaleCountryStep:Q,NuxPicker:wt,NuxExtensionUpsell:j,NuxEducationLoader:v}),yt(this,"onPrevStepClickFn",e=>{const{steps:t,isRenux:n}=this.props,r=t[e].moduleName,o=this.getPickerType();return()=>{const t={NuxWelcomeNameStep:259,NuxGenderStep:3120,NuxLocaleCountryStep:3139,NuxPicker:bt(o)}[r];t&&Object(y.b)(101,{component:17,element:34,view:n?213:24,viewParameter:t}),e>0&&this.setState({nuxStep:e-1,userClickedBack:!0})}})}componentDidMount(){const{isRenux:e,isSimpleRenux:t,requestContext:{experiments:n}}=this.props;e&&!t&&(n.getWithActivation("web_renux_topic_two_step"),n.getWithActivation("web_renux_topic_two_step_row")),this.mounted=!0,Object(y.b)(4104,{view:e?213:24,viewParameter:170})}componentWillUnmount(){this.mounted=!1}getUpdatedFollowInterests(e,t,n){let r=[...e];return t.forEach(e=>{const t={...e,is_followed:n};let o=!1;r=r.map(e=>e.id===t.id?(o=!0,t):e),o||r.push(t)}),r}getUpdatedSelectedInterests(e,t,n){let r=[...e];return t.forEach(t=>{const o=Object(i.b)(r,t);n&&!o?r.push({...t,is_followed:n}):!n&&o&&(r=e.filter(e=>e.id!==t.id))}),r}getPickerType(){const{steps:e}=this.props,{nuxStep:t}=this.state,n=e[t];return this.getPickerTypeFromStep(n)}getPickerTypeFromStep(e){const t=e.options&&e.options.pickerType;return t&&Object.values(S.s).includes(t)?t:S.s.STANDARD_TOPIC_PICKER}isCategoryPickerStep(){return this.getPickerType()===S.s.CATEGORY_PICKER}isRefinedPickerStep(){return S.p.has(this.getPickerType())}getPickerSubHeaderText(){const{requestContext:e}=this.props,{group:t}=e.experiments.getWithActivation("web_nux_picker_subheader");return"variant_0"===t?s.a._("Pro tip: We use topics you pick here to build your home feed","nux.picker.subheader","message about what a topic is and why users should choose it "):"variant_1"===t?s.a._("We use the topics you pick to find ideas you like ","nux.picker.subheader","message about what a topic is and why users should choose it "):""}getPersonalizationCopy(e){const{hideFollowedInterests:t,isRenux:n,isSimpleRenux:r,requestContext:o,steps:a}=this.props;let i,c;const l=e.moduleName,u=a.map(e=>e.moduleName).indexOf(l)===a.length-2;switch(l){case"NuxWelcomeNameStep":return{headerText:new Ye.b(o,"web_nux_simplified_welcome").enabledWithNoActivation()?s.a._("Welcome to Pinterest!","nux.welcomeStep.greeting","Nux welcome step heading"):s.a._("Welcome to Pinterest","greeting on welcome name step","greeting on welcome name step"),subHeaderText:s.a._("Your answers to the next few questions will help us find the right ideas for you","header on nux welcome and name editing step","header on nux welcome and name editing step")};case"NuxGenderStep":return i=s.a._("How do you identify?","Header in NUX gender step.","Header in NUX gender step."),c="",n&&(i=s.a._("Its time to refresh your feed!","Title on the modal asking user's gender","Title on the modal asking user's gender"),c=s.a._("How would you describe yourself?","Subtitle on the modal asking user's gender","Subtitle on the modal asking user's gender")),{headerText:i,subHeaderText:c};case"NuxLocaleCountryStep":return{headerText:s.a._("Pick your language and country/region","Header in NUX locale/country step","Header in NUX locale/country step")};case"NuxPicker":const e=r&&new Ye.b(o,"web_topic_educator_lego").enabledWithNoActivation();return!n&&this.isCategoryPickerStep()?i=Object(Ve.a)(s.a.ngettext("Pick at least {{numCategoriesToSelect}} category you want to explore","Pick at least {{numCategoriesToSelect}} categories you want to explore",S.d,"nux.topicPicker.heading","Header in NUX topic picker step, asking user to select some number of categories"),{numCategoriesToSelect:S.d.toString()}):!n&&this.isRefinedPickerStep()?(i=Object(Ve.a)(s.a.ngettext("Now pick {{numberToFollow}} (or more!) topics to go deeper","Now pick {{numberToFollow}} (or more!) topics to go deeper",S.e,"nux.topicPicker.heading","Header in NUX topic picker step, asking user to select some number of topics"),{numberToFollow:S.e.toString()}),c=this.getPickerSubHeaderText()):n&&this.isCategoryPickerStep()?i=s.a._("Pick the categories you want to explore","nux.topicPicker.heading","Header in NUX topic picker step, asking users to select some categories"):n&&this.isRefinedPickerStep()?i=s.a._("Now pick a few topics to go deeper","nux.topicPicker.heading","Header in NUX topic picker step, asking users to select some topics"):n&&t?(i=s.a._("What are you into these days?","Header in ReNUX topic picker step.","Header in ReNUX topic picker step."),c=s.a._("Pick the topics you want to see in your home feed","Subheader in ReNUX topic picker step.","Subheader in ReNUX topic picker step.")):e?(i=s.a._("Which topics do you want to see more of?","nux.topicPicker.heading","Header in NUX topic picker step for topic education experience."),c=s.a._("Ideas you see in you home feed are based on topics you like","nux.topicPicker.subheading","Subheader in NUX topic picker step for topic education experience.")):(i=u?s.a._("Last step! Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."):s.a._("Tell us what you're interested in","Header in NUX topic picker step.","Header in NUX topic picker step."),c=this.getPickerSubHeaderText()),{headerText:i,subHeaderText:c};case"NuxExtensionUpsell":return i=u?s.a._("Last step! Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."):s.a._("Get our handy browser button","Header in NUX browser extension upsell step.","Header in NUX browser extension upsell step."),{headerText:i,subHeaderText:s.a._("Quickly save any idea you find around the web","Subheader in NUX browser extension upsell step","Subheader in NUX browser extension upsell step")};default:return{}}}nuxStepToRender(e,t){const{hideFollowedInterests:n,isRenux:r,isSimpleRenux:a,requestContext:i}=this.props,{followedInterests:s,selectedCategories:c,selectedInterests:l}=this.state,u=e.moduleName,d=this.nuxSteps[u],p=this.hasNuxStep("NuxGenderStep"),h=r&&n?S.u:S.e,m=r?S.t:S.d;return o.a.createElement(d,Object.assign({},e.options,{key:this.getPickerType(),experiments:i.experiments,followedInterests:s,hasGenderStep:p,hideFollowedInterests:n,incrementNuxStep:this.incrementNuxStep(this.state.nuxStep),isRenux:r,isSimpleRenux:a,numberToFollow:this.isCategoryPickerStep()?m:h,onSelectedInterestsChange:this.handleSelectedInterestsChange,personalizationCopy:this.getPersonalizationCopy(e),pickerType:this.getPickerType(),requestContext:i,selectedCategories:c,selectedInterests:l,showTableOfContents:t,toggleLoadingIndicator:e=>this.setState({isLoading:e})}))}getNextStepIndex(e,t,n){const{isRenux:r}=this.props;let o=e+1;if(n)return o;if(!r)for(;o<t.length&&t[o].isCompleted;)o+=1;return o}incrementNuxStep(e){const{steps:t}=this.props,{userClickedBack:n}=this.state,r=this.getNextStepIndex(e,t,n);return r>=t.length?this.onComplete:()=>{(t=>{if(e!==t)this.setState({nuxStep:t})})(r)}}hasNuxStep(e){const{steps:t}=this.props;return t.some(t=>t.moduleName===e)}render(){const{handleDismiss:e,isLandingPage:t,isRenux:n,isSimpleRenux:r,steps:a}=this.props,{isLoading:i,nuxStep:s}=this.state,c=e=>["NuxEducationLoader"].includes(e),l=a.filter(e=>!c(e.moduleName)),u=c(a[s].moduleName)||t,d=a.filter(e=>S.p.has(this.getPickerTypeFromStep(e))).length>0,p=n?!u&&!r&&s>0:!u&&!r&&s>1;return o.a.createElement(le,{currentIndex:s,hideDots:(n||r)&&!d||u,isLoading:i,numSteps:l.length,onClose:u||!n&&!r?void 0:e,onPrevStepClick:p?this.onPrevStepClickFn(s):void 0,stepName:a[s].moduleName},this.nuxStepToRender(a[s],!u))}}yt(Et,"defaultProps",{hideFollowedInterests:!1,isRenux:!1,isSimpleRenux:!1});t.a=Object(q.compose)(Object(a.connect)(()=>({}),e=>({dispatchSetNuxSelectedInterestImages:t=>e(function(e){return{type:"SET_NUX_SELECTED_INTEREST_IMAGES",payload:{images:e}}}(t)),dispatchUpdateFirstHomeFeedRequestAfterNuxFlag:t=>e(Object(T.c)(t))})),xt.k,K.e)(Et)},VL22:function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n("17x9"),o=n.n(r),a=n("kmwA");const i={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",EMAIL:"email",OTHER:"other"},s=e=>e.facebook_id?i.FACEBOOK:e.google_open_id_token?i.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?i.GOOGLE:e.email?i.EMAIL:i.OTHER,c=(o.a.shape({credentials:o.a.shape({}),userData:o.a.shape({}),type:o.a.oneOf(Object.values(i))}),(e="")=>e in a.a.settings.MINIMUM_AGE_BY_EU_COUNTRY),l=e=>a.a.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)||a.a.settings.LATAM_AGE_COLLECTION.has(e)},"YI5+":function(e,t,n){n.d(t,"a",(function(){return u}));var r=n("q1tI"),o=n.n(r),a=n("Ye/N"),i=n("ihsa"),s=n("28DW"),c=n("n6mq");const l={mask:{backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:1,position:"fixed",top:"0px",bottom:"0px",left:"0px",right:"0px",zIndex:1e3},scroller:{WebkitOverflowScrolling:"touch",overflowY:"scroll",bottom:"0px",left:"0px",right:"0px",top:"0px",position:"fixed",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",WebkitFlexDirection:"column",msFlexDirection:"column",flexDirection:"column",WebkitJustifyContent:"space-around",msFlexPack:"distribute",justifyContent:"space-around"},modalContainer:{display:"flex",minHeight:"0px",position:"relative",opacity:1,borderRadius:"6px",margin:"0 auto"},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"}};function u(e){const t=e=>{Object(s.a)("unauth.account_switcher_modal."+e)},{renderContent:n}=e;return o.a.createElement("div",{style:l.mask},o.a.createElement(i.a,{unsafeCSS:"\n.AccountSwitcherModal {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n"}),o.a.createElement("div",{className:"AccountSwitcherModal",onClick:()=>{t("empty_space_click");const{onCloseClick:n}=e;n()},role:"dialog",style:l.scroller},o.a.createElement("div",{onClick:e=>{e.stopPropagation()},role:"dialog",style:l.modalContainer},n(),o.a.createElement("button",{"aria-label":a.a._("close","accessible label for close button","accessible label for close button"),onClick:()=>{t("close_button_click");const{onCloseClick:n}=e;n()},style:l.closeButton},o.a.createElement(c.t,{accessibilityLabel:a.a._("close","accessible label for close button","accessible label for close button"),color:"white",icon:"cancel",inline:!0})))))}},b7nI:function(e,t,n){var r=n("q1tI"),o=n.n(r),a=n("yweb"),i=n("n6mq");const s=()=>{const e=Object(a.b)();return o.a.createElement(i.O,{accessibilityLabel:e._("Loading","Label for loading spinner","Label for loading spinner"),show:!0})};t.a=()=>o.a.createElement(i.e,null,o.a.createElement(i.e,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,opacity:1,dangerouslySetInlineStyle:{__style:{zIndex:101}}},o.a.createElement(s,null)),o.a.createElement(i.e,{color:"white",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,opacity:.7,dangerouslySetInlineStyle:{__style:{zIndex:100}}}))},bBqG:function(e,t,n){var r=n("IDoE"),o=n("ipvL"),a=n("zRck"),i=n("28DW"),s=n("7Cbv");t.a=(e,t,n)=>{let c=o.a.getGroupId();c||(c=(()=>{const e=Object(s.a)();return Object(i.g)("web_account_switcher.utils.group_created",{group_id:e,group_count:Object(r.a)()}),e})(),o.a.setGroupId(c));const l={group_id:c,group_count:Object(r.a)()};let u="";n&&(u=n===a.c?"modal.":"flyout."),Object(i.g)(`web_account_switcher.${u}${e}`,Object.assign({},t,l))}},i9Af:function(e,t,n){n.r(t),n.d(t,"exchangeTokenAndSetSession",(function(){return u})),n.d(t,"verifyLoggedInStatus",(function(){return d})),n.d(t,"registerUser",(function(){return p})),n.d(t,"loginUser",(function(){return h}));var r=n("T0g9"),o=n("eOdZ"),a=n("kmwA"),i=n("28DW"),s=n("J8m7");const c=a.a.settings.ACCOUNTS_PINTEREST_URL,l=(e,t,n,r)=>{const o=e=>{const t=new Error(e.statusText);throw t.response=e,!t.api_error_code&&t.response&&(t.api_error_code=t.response.code,t.message=t.response.message),t},a={credentials:"include",mode:"cors"};return"POST"===n&&(a.method="POST",a.body=t,a.headers={"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":r},r||Object(i.a)("unauth.auth_handshake.cross_domain.no_unauth_id."+n)),fetch(e,a).then(e=>200===e.status||401===e.status?e:(o(e),{})).then(e=>e.json()).then(e=>"success"===e.status?Promise.resolve(e):e.code===s.r?(e.api_error_code=e.code,Promise.reject(e)):(o(e),{})).catch(e=>{throw e})},u=(e,t=!1)=>o.a.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),d=e=>{l(c+"/v3/handshake/verify/","","GET",e).then(e=>{if(e&&e.data){const t=e.data;u(t).then(e=>{window.location.reload()},e=>{})}},e=>{})},p=(e,{facebookToken:t,inviteCode:n,locale:o,referrer:i,unauthId:s})=>{const c=(e.business_name?"partner/handshake":(e.gplus_code||e.gplus_id_token)&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"email/handshake",u={};if(u.email=e.email||"",u.username=e.username||"",u.password=e.password||"",u.first_name=e.first_name||"",u.last_name=e.last_name||"",u.country=e.country||"",u.locale=o,u.referrer=i,e.age){const t=new Date;t.setFullYear(t.getFullYear()-e.age);const n=parseInt(t/1e3,10);u.birthday=n.toString()}if(e.custom_gender&&(u.custom_gender=e.custom_gender),e.gender&&(u.gender=e.gender),e.business_name&&(u.account_type=e.account_type,u.business_name=e.business_name,u.first_name=e.business_name),n&&(u.invite_code=n),e.facebook_id){const n=t||e.facebook_token||"";u.facebook_id=e.facebook_id,u.facebook_token=n,u.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(u.password=e.password||"",u.one_time_code=e.gplus_code,u.id_token=e.gplus_id_token,u.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(u.recaptcha_v3_token=e.recaptchaV3Token),l(`${a.a.settings.ACCOUNTS_PINTEREST_URL}/v3/register/${c}/`,Object(r.a)(u),"POST",s)},h=(e,{facebookToken:t,recaptchaV3Token:n,referrer:o,unauthId:i})=>{const s=(e.mfa_token?"mfa/handshake":e.gplus_id_token&&"gplus/handshake")||e.facebook_id&&"facebook/handshake"||"handshake",c={};if(e.username_or_email&&(c.username_or_email=e.username_or_email.trim(),c.password=e.password,c.referrer=o),e.facebook_id){const n=t||e.facebook_token||"";c.facebook_id=e.facebook_id,c.facebook_token=n,c.facebook_autologin=e.facebook_autologin||!1}return e.gplus_id_token&&(c.gplus_id_token=e.gplus_id_token,c.gplus_access_token=e.gplus_access_token,c.gplus_expires_at=e.gplus_expires_at,c.gplus_autologin=e.gplus_autologin||!1),e.mfa_token&&(c.mfa_token=e.mfa_token),n&&(c.token=n),l(`${a.a.settings.ACCOUNTS_PINTEREST_URL}/v3/login/${s}/`,Object(r.a)(c),"POST",i)}},ipvL:function(e,t,n){var r=n("0G5S"),o=n("zRck");const a=e=>"undefined"!=typeof window?Object(r.a)(e):null,i=(e,t)=>{"undefined"!=typeof window&&Object(r.c)(e,t)},s={getAccounts:()=>a(o.q),getAccountsJSON:()=>s.getAccounts()?JSON.parse(s.getAccounts()):{},getGroupId:()=>{const e=a(o.r);return e?JSON.parse(e):null},setAccounts:e=>i(o.q,e),setGroupId:e=>i(o.r,JSON.stringify(e))};t.a=s},"liz/":function(e,t,n){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return f}));var r=n("NwVv"),o=n("TPPM"),a=n("xGpI");n.d(t,"d",(function(){return a.a}));var i=n("ipvL"),s=n("bBqG");n.d(t,"i",(function(){return s.a}));var c=n("D2p8"),l=n("zRck"),u=n("IDoE");n.d(t,"c",(function(){return u.a}));n("+6dQ");const d=4,p=()=>({[l.q]:i.a.getAccountsJSON(),[l.r]:i.a.getGroupId()}),h=e=>{const t=i.a.getAccountsJSON();delete t[e],i.a.setAccounts(JSON.stringify(t))},m=(e,t)=>{if(!i.a.getAccounts()||e&&!(e.id in Object(a.a)())){if(e.partner&&e.partner.is_linked_business&&t)return void Object(r.a)({...e,email:t.partner&&t.partner.is_linked_business?t.partner.biz_ownership_email:""});Object(r.a)(e)}},g=(e,t,n)=>{Object(s.a)("switch_account_success",{destination_user_id:t},n),Object(o.a)(e)},f=(e,t)=>{c.c.resume(c.a),Object(s.a)("switch_account_failure",{destination_user_id:e},t)}},"pkT/":function(e,t,n){n.d(t,"a",(function(){return s}));var r=n("q1tI"),o=n.n(r),a=n("yweb"),i=n("n6mq");function s(){const e=Object(a.b)();return o.a.createElement(i.e,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(i.O,{accessibilityLabel:e._("Loading signup form"),show:!0}))}},vVbV:function(e,t,n){function r(e){return{type:"SET_NUX_PROGRESS",payload:{step:e}}}n.d(t,"a",(function(){return r}))},xGpI:function(e,t,n){var r=n("ipvL");t.a=()=>r.a.getAccountsJSON()},zRck:function(e,t,n){n.d(t,"q",(function(){return r})),n.d(t,"r",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"p",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return g})),n.d(t,"i",(function(){return f})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return w})),n.d(t,"o",(function(){return x}));const r="MULTIPLE_ACCOUNTS",o="MULTIPLE_ACCOUNTS_GROUP",a="account_switcher_flyout",i="account_switcher_modal",s="vmp_account_switcher_modal",c="account_recovery",l="board_invite",u="closeup",d="followbtn",p="flashlight_grid",h="google_one_tap_modal",m="inspired_banner",g="hybrid_clickthrough",f="hybrid_banner",b="pin_grid",_="pin_image",w="response_flyout",x="unauth_header"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/RenuxContainerCommon-2c00ac30a9b542bf49d9.mjs.map